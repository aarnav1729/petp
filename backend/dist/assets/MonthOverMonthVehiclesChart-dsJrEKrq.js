import{r as et,a as it,j as G}from"./index-QXbHcvC1.js";import{e as I,v as q,P as N,i as B,a as F,m as V,z as W,B as st,L as H,T as K,b as at,A as nt,d as Q,l as ot,p as rt}from"./AnimatedTheme-B_HNjjdc.js";import{X as U,c as $,V as tt,R as Z,a as lt,b as ht,A as ct}from"./AxisRendererY-Cm5Qepqo.js";import{f as J}from"./tslib.es6-CASWML4w.js";class k extends U{constructor(){super(...arguments),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGraphics(t,e){return this.makeColumn(e,t)}_makeFieldNames(){super._makeFieldNames();const t=this.get("xAxis"),e=this.get("yAxis"),s="CategoryAxis",i="ValueAxis";t.isType(s)&&(this.get("openCategoryXField")||(this._xOpenField=this._xField)),t.isType(i)&&(this.get("openValueXField")||(this._xOpenField=this._xField)),e.isType(s)&&(this.get("openCategoryYField")||(this._yOpenField=this._yField)),e.isType(i)&&(this.get("openValueYField")||(this._yOpenField=this._yField))}_prepareChildren(){super._prepareChildren();const t=this.get("xAxis"),e=this.get("yAxis"),s=this.dataItems.length,i=Math.max(0,this.startIndex()-2),a=Math.min(this.endIndex()+2,s-1);if(t.inited&&e.inited)for(let n=i;n<=a;n++){let o=this.dataItems[n];this._createGraphics(o)}}_updateChildren(){const t=this.chart;t&&(this._ph=t.plotContainer.height(),this._pw=t.plotContainer.width());const e=this.get("xAxis"),s=this.get("yAxis"),i=this.get("baseAxis"),a=this.columns.template;this.isDirty("fill")&&a.get("fill")==null&&a.set("fill",this.get("fill")),this.isDirty("fillPattern")&&a.get("fillPattern")==null&&a.set("fillPattern",this.get("fillPattern")),this.isDirty("stroke")&&a.get("stroke")==null&&a.set("stroke",this.get("stroke"));let n=0,o=0,l=0;I(i.series,d=>{if(d instanceof k){const m=d.get("stacked");m&&l==0&&o++,!m&&d.get("clustered")&&o++}d===this&&(n=o-1),l++}),this.get("clustered")||(n=0,o=1),o===0&&(o=1,n=0);const u=e.get("renderer"),c=s.get("renderer"),r="cellStartLocation",h="cellEndLocation",p=u.get(r,0),P=u.get(h,1),f=c.get(r,0),g=c.get(h,1);if(this._aLocationX0=p+n/o*(P-p),this._aLocationX1=p+(n+1)/o*(P-p),this._aLocationY0=f+n/o*(g-f),this._aLocationY1=f+(n+1)/o*(g-f),e.inited&&s.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty){const d=this.dataItems.length;let m=Math.max(0,this.startIndex()-2),X=Math.min(this.endIndex()+2,d-1);for(let x=0;x<m;x++)this._toggleColumn(this.dataItems[x],!1);let L=this.dataItems[m];for(let x=m;x<=X;x++){let A=this.dataItems[x];if(A.get("valueX")!=null&&A.get("valueY")!=null){if(L=A,x>0&&m>0)for(let M=x-1;M>=0;M--){let y=this.dataItems[M];if(y.get("valueX")!=null&&y.get("valueY")!=null){L=y;break}}break}else this._toggleColumn(A,!1)}for(let x=m;x<=X;x++){let A=this.dataItems[x];this._updateGraphics(A,L),A.get("valueX")!=null&&A.get("valueY")!=null&&(L=A)}for(let x=X+1;x<d;x++)this._toggleColumn(this.dataItems[x],!1)}}else this._skipped=!0;this.updateLegendMarker(this.get("tooltipDataItem")),super._updateChildren()}_createGraphics(t){let e=t.get("graphics");if(!e){e=this._makeGraphics(this.columns,t),t.set("graphics",e),e._setDataItem(t);const s=t.get("legendDataItem");if(s){const a=s.get("markerRectangle");if(a){const n=a.states.lookup("default");I(q,o=>{const l=e.get(o,this.get(o));a.set(o,l),n.set(o,l)})}}let i=t.get("rangeGraphics");i&&I(i,a=>{a.dispose()}),i=[],t.setRaw("rangeGraphics",i),this.axisRanges.each(a=>{const n=a.container,o=this._makeGraphics(a.columns,t);i&&i.push(o),o.setPrivate("list",a.columns),n.children.push(o)})}}createAxisRange(t){return I(this.dataItems,e=>{const s=e.get("graphics");s&&(s.dispose(),e.set("graphics",void 0))}),super.createAxisRange(t)}_updateGraphics(t,e){let s=t.get("graphics");const i=this._xField,a=this._yField,n=t.get(i),o=t.get(a);if(n!=null&&o!=null){const l=this._xOpenField,u=this._yOpenField,c=this.get("locationX",t.get("locationX",.5)),r=this.get("locationY",t.get("locationY",.5)),h=this.get("openLocationX",t.get("openLocationX",c)),p=this.get("openLocationY",t.get("openLocationY",r)),P=s.get("width"),f=s.get("height"),g=this.get("stacked"),d=this.get("xAxis"),m=this.get("yAxis"),X=this.get("baseAxis"),L=d.get("start"),x=d.get("end"),A=m.get("start"),M=m.get("end");let y,C,T,w,R=this.get("vcy",1),O=this.get("vcx",1),S=!1,E=!1;if(m.isType("CategoryAxis")&&d.isType("CategoryAxis")){let v=this._aLocationX0+h-.5,b=this._aLocationX1+c-.5;if(P instanceof N){let _=(b-v)*(1-P.value)/2;v+=_,b-=_}if(y=d.getDataItemPositionX(t,l,v,O),C=d.getDataItemPositionX(t,i,b,O),v=this._aLocationY0+p-.5,b=this._aLocationY1+r-.5,f instanceof N){let _=(b-v)*(1-f.value)/2;v+=_,b-=_}T=m.getDataItemPositionY(t,u,v,R),w=m.getDataItemPositionY(t,a,b,R),t.setRaw("point",{x:y+(C-y)/2,y:T+(w-T)/2})}else if(d===X){let v=this._aLocationX0+h-.5,b=this._aLocationX1+c-.5;if(P instanceof N){let _=(b-v)*(1-P.value)/2;v+=_,b-=_}if(y=d.getDataItemPositionX(t,l,v,O),C=d.getDataItemPositionX(t,i,b,O),T=m.getDataItemPositionY(t,a,r,R),this._yOpenField!==this._yField)w=m.getDataItemPositionY(t,u,p,R);else if(g){let _=t.get("stackToItemY");_?w=m.getDataItemPositionY(_,a,p,_.component.get("vcy")):w=m.basePosition()}else w=m.basePosition();t.setRaw("point",{x:y+(C-y)/2,y:T}),E=!0}else if(m===X){let v=this._aLocationY0+p-.5,b=this._aLocationY1+r-.5;if(f instanceof N){let _=(b-v)*(1-f.value)/2;v+=_,b-=_}if(T=m.getDataItemPositionY(t,u,v,R),w=m.getDataItemPositionY(t,a,b,R),C=d.getDataItemPositionX(t,i,c,O),this._xOpenField!==this._xField)y=d.getDataItemPositionX(t,l,h,O);else if(g){let _=t.get("stackToItemX");_?y=d.getDataItemPositionX(_,i,h,_.component.get("vcx")):y=d.basePosition()}else y=d.basePosition();S=!0,t.setRaw("point",{x:C,y:T+(w-T)/2})}this._updateSeriesGraphics(t,s,y,C,T,w,S,E),y<L&&C<L||y>x&&C>x||T<A&&w<=A||T>=M&&w>M||B(y)||B(T)?this._toggleColumn(t,!1):this._toggleColumn(t,!0);let z=t.get("rangeGraphics");z&&I(z,v=>{this._updateSeriesGraphics(t,v,y,C,T,w,S,E)}),this._applyGraphicsStates(t,e)}else this._toggleColumn(t,!1)}_updateSeriesGraphics(t,e,s,i,a,n,o,l){const u=e.get("width"),c=e.get("height"),r=e.get("maxWidth"),h=e.get("maxHeight"),p=this.getPoint(s,a),P=this.getPoint(i,n),f=t.get("point");if(f){const g=this.getPoint(f.x,f.y);f.x=g.x+this._x,f.y=g.y+this._y}if(s=p.x,i=P.x,a=p.y,n=P.y,F(u)){const g=(i-s-u)/2;s+=g,i-=g}if(F(r)&&r<Math.abs(i-s)){const g=(i-s-r)/2;s+=g,i-=g}if(F(c)){const g=(n-a-c)/2;a+=g,n-=g}if(F(h)&&h<Math.abs(n-a)){const g=(n-a-h)/2;a+=g,n-=g}this.get("adjustBulletPosition")&&(o&&(i=Math.min(Math.max(0,i),this._pw),s=Math.min(Math.max(0,s),this._pw)),l&&(a=Math.min(Math.max(0,a),this._ph),n=Math.min(Math.max(0,n),this._ph))),t.setRaw("left",s),t.setRaw("right",i),t.setRaw("top",a),t.setRaw("bottom",n),e.setPrivate("width",i-s),e.setPrivate("height",n-a),e.set("x",s),e.set("y",n-(n-a))}_handleDataSetChange(){super._handleDataSetChange(),I(this._dataItems,t=>{this._toggleColumn(t,!1)})}_applyGraphicsStates(t,e){const s=t.get("graphics"),i=s.states.lookup("dropFromOpen"),a=s.states.lookup("riseFromOpen"),n=s.states.lookup("dropFromPrevious"),o=s.states.lookup("riseFromPrevious");if(i||n||a||o){const l=this.get("xAxis"),u=this.get("yAxis"),c=this.get("baseAxis");let r,h,p;c===l&&u.isType("ValueAxis")?(r=t.get(this._yOpenField),h=t.get(this._yField),p=e.get(this._yField)):c===u&&l.isType("ValueAxis")&&(r=t.get(this._xOpenField),h=t.get(this._xField),p=e.get(this._xField)),F(r)&&F(h)&&(h<r?i&&i.apply():a&&a.apply(),F(p)&&(h<p?n&&n.apply():o&&o.apply()))}}disposeDataItem(t){super.disposeDataItem(t);const e=t.get("graphics");e&&(this.columns.removeValue(e),e.dispose());const s=t.get("rangeGraphics");s&&I(s,i=>{const a=i.getPrivate("list");a&&a.removeValue(i),i.dispose()})}hideDataItem(t,e){const s=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return J(this,void 0,void 0,function*(){const i=[s.hideDataItem.call(this,t,e)],a=t.get("graphics");a&&i.push(a.hide(e));const n=t.get("rangeGraphics");n&&I(n,o=>{i.push(o.hide(e))}),yield Promise.all(i)})}_toggleColumn(t,e){const s=t.get("graphics");s&&s.setPrivate("visible",e);const i=t.get("rangeGraphics");i&&I(i,n=>{n.setPrivate("visible",e)});const a=t.bullets;a&&I(a,n=>{n.setPrivate("hidden",!e)})}showDataItem(t,e){const s=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return J(this,void 0,void 0,function*(){const i=[s.showDataItem.call(this,t,e)],a=t.get("graphics");a&&i.push(a.show(e));const n=t.get("rangeGraphics");n&&I(n,o=>{i.push(o.show(e))}),yield Promise.all(i)})}updateLegendMarker(t){let e=this.get("legendDataItem");if(this.get("useLastColorForLegendMarker")&&!t){const s=this.dataItems[this.endIndex()-1];s&&(t=s)}if(e){let s=this.columns.template;if(t){let a=t.get("graphics");a&&(s=a)}const i=e.get("markerRectangle");if(i&&!e.get("itemContainer").get("disabled")){const a=i.states.lookup("default");I(q,n=>{const o=s.get(n,this.get(n));i.set(n,o),a.set(n,o)})}}}_getTooltipTarget(t){if(this.get("seriesTooltipTarget")=="bullet")return super._getTooltipTarget(t);let e=t.get("graphics");return e||this}}Object.defineProperty(k,"className",{enumerable:!0,configurable:!0,writable:!0,value:"BaseColumnSeries"});Object.defineProperty(k,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:U.classNames.concat([k.className])});class Y extends ${constructor(){super(...arguments),Object.defineProperty(this,"_frequency",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_itemMap",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=V(this._settings.themeTags,["axis"]),this.fields.push("category"),this.setPrivateRaw("name","category"),this.addTag("category"),super._afterNew()}_prepareChildren(){super._prepareChildren();const t=this.dataItems.length;let e=0;this._valuesDirty&&(this._itemMap={},I(this.dataItems,s=>{s.setRaw("index",e),this._itemMap[s.get("category")]=s,e++}),this.setPrivateRaw("maxZoomFactor",t)),this.setPrivateRaw("startIndex",Math.max(Math.round(this.get("start",0)*t),0)),this.setPrivateRaw("endIndex",Math.min(Math.round(this.get("end",1)*t),t)),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("endIndex")||this.isPrivateDirty("startIndex")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&this.dataItems.length>0&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges())}_handleRangeChange(){I(this.series,t=>{let e=this.dataItems[this.startIndex()].get("category"),s=this.dataItems[this.endIndex()-1].get("category"),i=t.get("baseAxis"),a=t.get("xAxis"),n=t.get("yAxis");if(a instanceof Y&&n instanceof Y)t._markDirtyAxes();else if(i===this){let o,l,u=n;if(a===i?(t.get("categoryXField")&&(o="categoryX"),t.get("openCategoryXField")&&(l="openCategoryX")):n===i&&(t.get("categoryYField")&&(o="categoryY"),t.get("openCategoryYField")&&(l="openCategoryY"),u=a),u instanceof tt&&(o||l)){let c,r;for(let f=0,g=t.dataItems.length;f<g;f++){let d=t.dataItems[f];if(o&&d.get(o)===e){c=d;break}if(l&&d.get(l)===e){c=d;break}}for(let f=t.dataItems.length-1;f>=0;f--){let g=t.dataItems[f];if(o&&g.get(o)===s){r=g;break}if(l&&g.get(l)===s){r=g;break}}let h=0,p=t.dataItems.length;c&&(h=t.dataItems.indexOf(c)),r&&(p=t.dataItems.indexOf(r)+1),t.setPrivate("startIndex",h),t.setPrivate("endIndex",p);let P=!1;for(let f=h;f<p;f++){const g=t.dataItems[f];if(I(t.__valueXShowFields,d=>{g.get(d)!=null&&(P=!0)}),I(t.__valueYShowFields,d=>{g.get(d)!=null&&(P=!0)}),P)break}t.setPrivate("outOfSelection",!P)}t._markDirtyAxes()}})}_prepareAxisItems(){var t;const e=this.get("renderer"),s=this.dataItems.length;let i=this.startIndex();i>0&&i--;let a=this.endIndex();a<s&&a++;const n=e.get("minorLabelsEnabled"),o=e.get("minorGridEnabled",n);let l=e.axisLength()/Math.max(e.get("minGridDistance"),1),u=Math.max(1,Math.min(s,Math.ceil((a-i)/l)));i=Math.floor(i/u)*u,this._frequency=u;for(let r=0;r<s;r++)this._toggleDataItem(this.dataItems[r],!1);let c=this.dataItems[i].get("index",0);for(let r=i;r<a;r=r+u){let h=this.dataItems[r];this._createAssets(h,[]),this._toggleDataItem(h,!0);let p=u;o&&(p=1),this._prepareDataItem(h,c,p),c++}if(e.get("minorGridEnabled"))for(let r=i;r<a;r++){let h=this.dataItems[r];r%u!=0&&(this._createAssets(h,["minor"],!0),this._toggleDataItem(h,!0),this._prepareDataItem(h,0,1),n||(t=h.get("label"))===null||t===void 0||t.setPrivate("visible",!1))}this._updateGhost()}_prepareDataItem(t,e,s){let i=this.get("renderer"),a=t.get("categoryLocation",0),n=t.get("endCategoryLocation",1),o=t.get("index");F(o)||(o=this.categoryToIndex(t.get("category")));let l=this.indexToPosition(o,a),u=t.get("endCategory"),c;u?(c=this.categoryToIndex(u),F(c)||(c=o)):c=o;let r=this.indexToPosition(c,n),h,p;t.get("isRange")?h=c:h=o+this._frequency-1,p=this.indexToPosition(h,n),i.updateLabel(t.get("label"),l,r,s),i.updateGrid(t.get("grid"),l,r),i.updateTick(t.get("tick"),l,r,s),i.updateFill(t.get("axisFill"),l,p),this._processBullet(t),i.updateBullet(t.get("bullet"),l,r);const P=this.get("fillRule");P&&P(t,e)}startIndex(){let t=this.dataItems.length;return Math.min(Math.max(this.getPrivate("startIndex",0),0),t-1)}endIndex(){let t=this.dataItems.length;return Math.max(1,Math.min(this.getPrivate("endIndex",t),t))}baseValue(){}basePosition(){return 0}getX(t){let e=this._itemMap[t];return e?this._settings.renderer.positionToCoordinate(this.indexToPosition(e.get("index",0))):NaN}getY(t){let e=this._itemMap[t];return e?this._settings.renderer.positionToCoordinate(this.indexToPosition(e.get("index",0))):NaN}getDataItemPositionX(t,e,s,i){const a=t.get(e),n=this._itemMap[a];return n?this.indexToPosition(n.get("index",0),s):NaN}getDataItemCoordinateX(t,e,s,i){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(t,e,s,i))}getDataItemPositionY(t,e,s,i){const a=t.get(e),n=this._itemMap[a];return n?this.indexToPosition(n.get("index",0),s):NaN}getDataItemCoordinateY(t,e,s,i){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(t,e,s,i))}indexToPosition(t,e){F(e)||(e=.5);let s=this.dataItems.length,i=this.get("startLocation",0),a=this.get("endLocation",1);s-=i,s-=1-a;let n=(t+e-i)/s,o=this.dataItems[t];return o&&(n+=o.get("deltaPosition",0)),n}categoryToIndex(t){let e=this._itemMap[t];return e?e.get("index"):NaN}dataItemToPosition(t){return this.indexToPosition(t.get("index"))}roundAxisPosition(t,e){return t+=(.5-e)/this.dataItems.length,this.indexToPosition(this.axisPositionToIndex(t),e)}axisPositionToIndex(t){let e=this.dataItems.length;return W(Math.floor(t*e),0,e-1)}getTooltipText(t,e){const s=this.dataItems[this.axisPositionToIndex(t)];if(s){const i=s.get("label");if(i)return st(i,this.get("tooltipText",""))}}_updateTooltipText(t,e){t._setDataItem(this.dataItems[this.axisPositionToIndex(e)]),t.label.text.markDirtyText()}getSeriesItem(t,e){if(this.dataItems.length>0){let s=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),i=this.axisPositionToIndex(e),a=t.dataItems[i],n=this.dataItems[i],o=n.get("category");if(a&&n&&a.get(s)===o)return a;for(let l=0,u=t.dataItems.length;l<u;l++){let c=t.dataItems[l];if(c.get(s)===o)return c}}}zoomToIndexes(t,e,s){let i=this.dataItems.length;this.zoom(t/i,e/i,s)}zoomToCategories(t,e,s){this.zoomToIndexes(this.categoryToIndex(t),this.categoryToIndex(e)+1,s)}getCellWidthPosition(){return this._frequency/this.dataItems.length/(this.get("end",1)-this.get("start",0))}nextPosition(t){t==null&&(t=1),this.get("renderer").getPrivate("letter")=="Y"&&(t*=-1);const e=this.getPrivate("tooltipPosition",0),s=W(this.axisPositionToIndex(e)+t,0,this.dataItems.length-1);return this.toGlobalPosition(this.indexToPosition(s))}}Object.defineProperty(Y,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CategoryAxis"});Object.defineProperty(Y,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$.classNames.concat([Y.className])});class j extends k{constructor(){super(...arguments),Object.defineProperty(this,"columns",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new H(K.new({}),()=>Z._new(this._root,{position:"absolute",themeTags:V(this.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template])))})}makeColumn(t,e){const s=this.mainContainer.children.push(e.make());return s._setDataItem(t),e.push(s),s}_processAxisRange(t){super._processAxisRange(t),t.columns=new H(K.new({}),()=>Z._new(this._root,{position:"absolute",themeTags:V(t.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template,t.columns.template]))}}Object.defineProperty(j,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColumnSeries"});Object.defineProperty(j,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:k.classNames.concat([j.className])});const ft=()=>(et.useEffect(()=>{const D=at.new("monthOverMonthVehiclesChartDiv");D.setThemes([nt.new(D)]);const t=D.container.children.push(lt.new(D,{panY:!1,layout:D.verticalLayout})),e=t.xAxes.push(Y.new(D,{categoryField:"month",renderer:ht.new(D,{minGridDistance:20}),tooltip:Q.new(D,{})}));e.get("renderer").labels.template.setAll({rotation:-45,centerY:rt,centerX:ot,paddingRight:15});const s=t.yAxes.push(tt.new(D,{min:0,renderer:ct.new(D,{})})),i=t.series.push(j.new(D,{name:"Vehicles",xAxis:e,yAxis:s,valueYField:"vehicles",categoryXField:"month",tooltip:Q.new(D,{labelText:"{categoryX}: {valueY}"})}));return i.columns.template.setAll({cornerRadiusTL:5,cornerRadiusTR:5,strokeOpacity:0}),i.columns.template.adapters.add("fill",(a,n)=>t.get("colors").getIndex(n.dataItem.index)),it.get("http://localhost:5000/api/md/monthly-vehicles").then(a=>{const n=a.data||[];e.data.setAll(n),i.data.setAll(n)}).catch(a=>{console.error("Error fetching monthly vehicles data:",a)}),i.appear(1e3),t.appear(1e3,100),()=>{D.dispose()}},[]),G.jsxs("div",{children:[G.jsx("div",{id:"monthOverMonthVehiclesChartDiv",style:{width:"100%",height:"500px"}}),G.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:G.jsxs("p",{children:[G.jsx("strong",{children:"Insights:"})," This chart shows how many vehicles were dispatched month over month based on the ",G.jsx("em",{children:"RFQ.createdAt"})," date. It helps identify seasonal trends and dispatch volume changes."]})})]}));export{ft as default};
