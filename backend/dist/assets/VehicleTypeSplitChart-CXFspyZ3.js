import{r as Me,a as Be,j as U}from"./index-Dzu3uDy9.js";import{g as Le,h as Re,f as Se,r as z,n as Ce,p as w,P as se,j as V,s as O,G as Ne,a as ae,k as Fe,l as we,C as Xe,o as Ye,q as He,S as je,t as Oe,u as be,e as T,v as ze,w as ke,x as Ve,L as me,T as ve,m as xe,y as Ee,b as We,A as qe,d as Ue}from"./AnimatedTheme-B_HNjjdc.js";import{f as te}from"./tslib.es6-CASWML4w.js";import{w as Ie,c as X}from"./path-CXeFd1JH.js";class re extends Le{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*Re,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(re,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"});Object.defineProperty(re,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Le.classNames.concat([re.className])});class ne extends Se{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(re.new(this._root,{}))}baseRadius(){const t=this.getPrivate("radius",0),e=this.getPrivate("innerRadius",0),i=this.get("baseRadius",0);return e+z(i,t-e)}radius(){const t=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(t?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const t=this.get("textType","adjusted"),e=this.get("inside",!1),i=this.get("orientation");let s=Ce(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",e);const n=O(s),u=V(s);let a=this.baseRadius(),d=this.radius();if(this._display.angle=0,t=="circular")this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.setRaw("x",void 0),this.setRaw("y",void 0),this._text.set("orientation",i),this._text.set("radius",d);else{a==0&&(s=0,d=0);let o=d*u,r=d*n;t=="radial"?(this.setRaw("x",o),this.setRaw("y",r),s<90||s>270||i!="auto"?(this._display.angle=s,this._flipped=!1):(this._display.angle=s+180,this._flipped=!0),this._dirty.rotation=!1):t=="adjusted"?(this.setRaw("centerX",w),this.setRaw("centerY",w),this.setRaw("x",o),this.setRaw("y",r)):t=="regular"&&(this.setRaw("x",o),this.setRaw("y",r))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const t=this.get("textType","regular"),e=this.get("inside",!1);let i=0,s=0,n=this.get("labelAngle",0),u=this.localBounds(),a=u.right-u.left,d=u.bottom-u.top;if(t=="radial"){if(this._flipped){let o=this.get("centerX");o instanceof se&&(a=a*(1-o.value*2)),i=a*V(n),s=a*O(n)}}else!e&&t=="adjusted"&&(i=a/2*V(n),s=d/2*O(n));this.setRaw("dx",i),this.setRaw("dy",s),super._updatePosition()}get text(){return this._text}}Object.defineProperty(ne,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"});Object.defineProperty(ne,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Se.classNames.concat([ne.className])});const Te=Math.abs,v=Math.atan2,H=Math.cos,Ke=Math.max,_e=Math.min,N=Math.sin,q=Math.sqrt,_=1e-12,I=Math.PI,le=I/2,Ge=2*I;function $e(c){return c>1?0:c<-1?I:Math.acos(c)}function Pe(c){return c>=1?le:c<=-1?-le:Math.asin(c)}function Je(c){return c.innerRadius}function Qe(c){return c.outerRadius}function Ze(c){return c.startAngle}function et(c){return c.endAngle}function tt(c){return c&&c.padAngle}function it(c,t,e,i,s,n,u,a){var d=e-c,o=i-t,r=u-s,y=a-n,l=y*d-r*o;if(!(l*l<_))return l=(r*(t-n)-y*(c-s))/l,[c+l*d,t+l*o]}function ie(c,t,e,i,s,n,u){var a=c-e,d=t-i,o=(u?n:-n)/q(a*a+d*d),r=o*d,y=-o*a,l=c+r,h=t+y,p=e+r,m=i+y,P=(l+p)/2,b=(h+m)/2,x=p-l,R=m-h,k=x*x+R*R,L=s-n,S=l*m-p*h,M=(R<0?-1:1)*q(Ke(0,L*L*k-S*S)),B=(S*R-x*M)/k,F=(-S*x-R*M)/k,C=(S*R+x*M)/k,A=(-S*x+R*M)/k,D=B-P,g=F-b,f=C-P,Y=A-b;return D*D+g*g>f*f+Y*Y&&(B=C,F=A),{cx:B,cy:F,x01:-r,y01:-y,x11:B*(s/L-1),y11:F*(s/L-1)}}function st(){var c=Je,t=Qe,e=X(0),i=null,s=Ze,n=et,u=tt,a=null,d=Ie(o);function o(){var r,y,l=+c.apply(this,arguments),h=+t.apply(this,arguments),p=s.apply(this,arguments)-le,m=n.apply(this,arguments)-le,P=Te(m-p),b=m>p;if(a||(a=r=d()),h<l&&(y=h,h=l,l=y),!(h>_))a.moveTo(0,0);else if(P>Ge-_)a.moveTo(h*H(p),h*N(p)),a.arc(0,0,h,p,m,!b),l>_&&(a.moveTo(l*H(m),l*N(m)),a.arc(0,0,l,m,p,b));else{var x=p,R=m,k=p,L=m,S=P,M=P,B=u.apply(this,arguments)/2,F=B>_&&(i?+i.apply(this,arguments):q(l*l+h*h)),C=_e(Te(h-l)/2,+e.apply(this,arguments)),A=C,D=C,g,f;if(F>_){var Y=Pe(F/l*N(B)),$=Pe(F/h*N(B));(S-=Y*2)>_?(Y*=b?1:-1,k+=Y,L-=Y):(S=0,k=L=(p+m)/2),(M-=$*2)>_?($*=b?1:-1,x+=$,R-=$):(M=0,x=R=(p+m)/2)}var E=h*H(x),W=h*N(x),J=l*H(L),Q=l*N(L);if(C>_){var Z=h*H(R),ee=h*N(R),he=l*H(k),de=l*N(k),j;if(P<I)if(j=it(E,W,he,de,Z,ee,J,Q)){var ge=E-j[0],pe=W-j[1],fe=Z-j[0],ye=ee-j[1],Ae=1/N($e((ge*fe+pe*ye)/(q(ge*ge+pe*pe)*q(fe*fe+ye*ye)))/2),De=q(j[0]*j[0]+j[1]*j[1]);A=_e(C,(l-De)/(Ae-1)),D=_e(C,(h-De)/(Ae+1))}else A=D=0}M>_?D>_?(g=ie(he,de,E,W,h,D,b),f=ie(Z,ee,J,Q,h,D,b),a.moveTo(g.cx+g.x01,g.cy+g.y01),D<C?a.arc(g.cx,g.cy,D,v(g.y01,g.x01),v(f.y01,f.x01),!b):(a.arc(g.cx,g.cy,D,v(g.y01,g.x01),v(g.y11,g.x11),!b),a.arc(0,0,h,v(g.cy+g.y11,g.cx+g.x11),v(f.cy+f.y11,f.cx+f.x11),!b),a.arc(f.cx,f.cy,D,v(f.y11,f.x11),v(f.y01,f.x01),!b))):(a.moveTo(E,W),a.arc(0,0,h,x,R,!b)):a.moveTo(E,W),!(l>_)||!(S>_)?a.lineTo(J,Q):A>_?(g=ie(J,Q,Z,ee,l,-A,b),f=ie(E,W,he,de,l,-A,b),a.lineTo(g.cx+g.x01,g.cy+g.y01),A<C?a.arc(g.cx,g.cy,A,v(g.y01,g.x01),v(f.y01,f.x01),!b):(a.arc(g.cx,g.cy,A,v(g.y01,g.x01),v(g.y11,g.x11),!b),a.arc(0,0,l,v(g.cy+g.y11,g.cx+g.x11),v(f.cy+f.y11,f.cx+f.x11),b),a.arc(f.cx,f.cy,A,v(f.y11,f.x11),v(f.y01,f.x01),!b))):a.arc(0,0,l,L,k,b)}if(a.closePath(),r)return a=null,r+""||null}return o.centroid=function(){var r=(+c.apply(this,arguments)+ +t.apply(this,arguments))/2,y=(+s.apply(this,arguments)+ +n.apply(this,arguments))/2-I/2;return[H(y)*r,N(y)*r]},o.innerRadius=function(r){return arguments.length?(c=typeof r=="function"?r:X(+r),o):c},o.outerRadius=function(r){return arguments.length?(t=typeof r=="function"?r:X(+r),o):t},o.cornerRadius=function(r){return arguments.length?(e=typeof r=="function"?r:X(+r),o):e},o.padRadius=function(r){return arguments.length?(i=r==null?null:typeof r=="function"?r:X(+r),o):i},o.startAngle=function(r){return arguments.length?(s=typeof r=="function"?r:X(+r),o):s},o.endAngle=function(r){return arguments.length?(n=typeof r=="function"?r:X(+r),o):n},o.padAngle=function(r){return arguments.length?(u=typeof r=="function"?r:X(+r),o):u},o.context=function(r){return arguments.length?(a=r??null,o):a},o}class ue extends Ne{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:st()})}_getTooltipPoint(){let t=this.get("tooltipX"),e=this.get("tooltipY"),i=0,s=0;ae(t)&&(i=t),ae(e)&&(s=e);let n=this.get("radius",0),u=this.get("innerRadius",0),a=this.get("dRadius",0),d=this.get("dInnerRadius",0);return n+=a,u+=d,u<0&&(u=n+u),t instanceof se&&(i=this.ix*(u+(n-u)*t.value)),e instanceof se&&(s=this.iy*(u+(n-u)*e.value)),this.get("arc")>=360&&u==0&&(i=0,s=0),{x:i,y:s}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let t=this.get("startAngle",0),e=this.get("arc",0);const i=this._generator;e<0&&(t=t+e,e=e*-1),e>.1&&i.cornerRadius(this.get("cornerRadius",0)),i.context(this._display);let s=this.get("radius",0),n=this.get("innerRadius",0),u=this.get("dRadius",0),a=this.get("dInnerRadius",0);s+=u,n+=a,n<0&&(n=s+n),i({innerRadius:n,outerRadius:s,startAngle:(t+90)*Re,endAngle:(t+e+90)*Re});let d=t+e/2;this.ix=V(d),this.iy=O(d);const o=this.get("shiftRadius",0);this.setRaw("dx",this.ix*o),this.setRaw("dy",this.iy*o),this.markDirtyPosition()}}}Object.defineProperty(ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"});Object.defineProperty(ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ne.classNames.concat([ue.className])});class at extends Fe{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,e=this.rule.bind(this);e("PercentSeries").setAll({legendLabelText:"{category}",legendValueText:"{valuePercentTotal.formatNumber('0.00p')}",colors:Xe.new(this._root,{}),width:we,height:we}),e("PieChart").setAll({radius:Ye(80),startAngle:-90,endAngle:270}),e("PieSeries").setAll({alignLabels:!0,startAngle:-90,endAngle:270}),e("PieSeries").states.create("hidden",{endAngle:-90,opacity:0}),e("Slice",["pie"]).setAll({position:"absolute",isMeasured:!1,x:0,y:0,toggleKey:"active",tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}",strokeWidth:1,strokeOpacity:1,role:"figure",lineJoin:"round"}),e("Slice",["pie"]).states.create("active",{shiftRadius:20,scale:1}),e("Slice",["pie"]).states.create("hoverActive",{scale:1.04}),e("Slice",["pie"]).states.create("hover",{scale:1.04}),e("RadialLabel",["pie"]).setAll({textType:"aligned",radius:10,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",paddingTop:5,paddingBottom:5,populateText:!0}),e("Tick",["pie"]).setAll({location:1}),e("SlicedChart").setAll({paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10}),e("FunnelSeries").setAll({startLocation:0,endLocation:1,orientation:"vertical",alignLabels:!0,sequencedInterpolation:!0}),e("FunnelSlice").setAll({interactive:!0,expandDistance:0}),e("FunnelSlice").states.create("hover",{expandDistance:.15}),e("Label",["funnel"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:w}),e("Label",["funnel","horizontal"]).setAll({centerX:0,centerY:w,rotation:-90}),e("Label",["funnel","vertical"]).setAll({centerY:w,centerX:0}),e("Tick",["funnel"]).setAll({location:1}),e("FunnelSlice",["funnel","link"]).setAll({fillOpacity:.5,strokeOpacity:0,expandDistance:-.1}),e("FunnelSlice",["funnel","link","vertical"]).setAll({height:10}),e("FunnelSlice",["funnel","link","horizontal"]).setAll({width:10}),e("PyramidSeries").setAll({valueIs:"area"}),e("FunnelSlice",["pyramid","link"]).setAll({fillOpacity:.5}),e("FunnelSlice",["pyramid","link","vertical"]).setAll({height:0}),e("FunnelSlice",["pyramid","link","horizontal"]).setAll({width:0}),e("FunnelSlice",["pyramid"]).setAll({interactive:!0,expandDistance:0}),e("FunnelSlice",["pyramid"]).states.create("hover",{expandDistance:.15}),e("Label",["pyramid"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:w}),e("Label",["pyramid","horizontal"]).setAll({centerX:0,centerY:w,rotation:-90}),e("Label",["pyramid","vertical"]).setAll({centerY:w,centerX:0}),e("Tick",["pyramid"]).setAll({location:1}),e("FunnelSlice",["pictorial"]).setAll({interactive:!0,tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}"}),e("Label",["pictorial"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:w}),e("Label",["pictorial","horizontal"]).setAll({centerX:0,centerY:w,rotation:-90}),e("Label",["pictorial","vertical"]).setAll({centerY:w,centerX:0}),e("FunnelSlice",["pictorial","link"]).setAll({fillOpacity:.5,width:0,height:0}),e("Tick",["pictorial"]).setAll({location:.5});{const i=e("Graphics",["pictorial","background"]);i.setAll({fillOpacity:.2}),He(i,"fill",t,"alternativeBackground")}}}class K extends je{_afterNew(){this._defaultThemes.push(at.new(this._root)),super._afterNew(),this.chartContainer.children.push(this.seriesContainer),this.seriesContainer.children.push(this.bulletsContainer)}_processSeries(t){super._processSeries(t),this.seriesContainer.children.moveValue(this.bulletsContainer,this.seriesContainer.children.length-1)}}Object.defineProperty(K,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentChart"});Object.defineProperty(K,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:je.classNames.concat([K.className])});class G extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"slicesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(be.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(be.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"ticksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(be.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"_lLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_rLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_hLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeSlices())}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeLabels())}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeTicks())})}makeSlice(t){const e=this.slicesContainer.children.push(this.slices.make());return e.on("fill",()=>{this.updateLegendMarker(t)}),e.on("fillPattern",()=>{this.updateLegendMarker(t)}),e.on("stroke",()=>{this.updateLegendMarker(t)}),e._setDataItem(t),t.set("slice",e),this.slices.push(e),e}makeLabel(t){const e=this.labelsContainer.children.push(this.labels.make());return e._setDataItem(t),t.set("label",e),this.labels.push(e),e}_shouldMakeBullet(t){return t.get("value")!=null}makeTick(t){const e=this.ticksContainer.children.push(this.ticks.make());return e._setDataItem(t),t.set("tick",e),this.ticks.push(e),e}_afterNew(){this.fields.push("category","fill"),super._afterNew()}_onDataClear(){const t=this.get("colors");t&&t.reset();const e=this.get("patterns");e&&e.reset()}_prepareChildren(){if(super._prepareChildren(),this._lLabels=[],this._rLabels=[],this._hLabels=[],this._valuesDirty){let t=0,e=0,i=0,s=1/0,n=0;T(this._dataItems,u=>{let a=u.get("valueWorking",0);t+=a,e+=Math.abs(a)}),T(this._dataItems,u=>{let a=u.get("valueWorking",0);a>i&&(i=a),a<s&&(s=a),n++;let d=a/e;e==0&&(d=0),u.setRaw("valuePercentTotal",d*100)}),this.setPrivateRaw("valueLow",s),this.setPrivateRaw("valueHigh",i),this.setPrivateRaw("valueSum",t),this.setPrivateRaw("valueAverage",t/n),this.setPrivateRaw("valueAbsoluteSum",e)}}show(t){const e=Object.create(null,{show:{get:()=>super.show}});return te(this,void 0,void 0,function*(){let i=[];i.push(e.show.call(this,t)),i.push(this._sequencedShowHide(!0,t)),yield Promise.all(i)})}hide(t){const e=Object.create(null,{hide:{get:()=>super.hide}});return te(this,void 0,void 0,function*(){let i=[];i.push(e.hide.call(this,t)),i.push(this._sequencedShowHide(!1,t)),yield Promise.all(i)})}_updateChildren(){super._updateChildren(),this._valuesDirty&&T(this._dataItems,t=>{t.get("label").text.markDirtyText()}),(this.isDirty("legendLabelText")||this.isDirty("legendValueText"))&&T(this._dataItems,t=>{this.updateLegendValue(t)}),this._arrange()}_arrange(){this._arrangeDown(this._lLabels),this._arrangeUp(this._lLabels),this._arrangeDown(this._rLabels),this._arrangeUp(this._rLabels),this._arrangeLeft(this._hLabels),this._arrangeRight(this._hLabels),T(this.dataItems,t=>{this._updateTick(t)})}_afterChanged(){super._afterChanged(),this._arrange()}processDataItem(t){if(super.processDataItem(t),t.get("fill")==null){let e=this.get("colors");e&&t.setRaw("fill",e.next())}if(t.get("fillPattern")==null){let e=this.get("patterns");e&&t.setRaw("fillPattern",e.next())}}showDataItem(t,e){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return te(this,void 0,void 0,function*(){const s=[i.showDataItem.call(this,t,e)];ae(e)||(e=this.get("stateAnimationDuration",0));const n=this.get("stateAnimationEasing");let u=t.get("value");const a=t.animate({key:"valueWorking",to:u,duration:e,easing:n});a&&s.push(a.waitForStop());const d=t.get("tick");d&&s.push(d.show(e));const o=t.get("label");o&&s.push(o.show(e));const r=t.get("slice");r&&s.push(r.show(e)),r.get("active")&&r.states.applyAnimate("active"),yield Promise.all(s)})}hideDataItem(t,e){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return te(this,void 0,void 0,function*(){const s=[i.hideDataItem.call(this,t,e)],n=this.states.create("hidden",{});ae(e)||(e=n.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const u=n.get("stateAnimationEasing",this.get("stateAnimationEasing")),a=t.animate({key:"valueWorking",to:0,duration:e,easing:u});a&&s.push(a.waitForStop());const d=t.get("tick");d&&s.push(d.hide(e));const o=t.get("label");o&&s.push(o.hide(e));const r=t.get("slice");r.hideTooltip(),r&&s.push(r.hide(e)),yield Promise.all(s)})}disposeDataItem(t){super.disposeDataItem(t);let e=t.get("label");e&&(this.labels.removeValue(e),e.dispose());let i=t.get("tick");i&&(this.ticks.removeValue(i),i.dispose());let s=t.get("slice");s&&(this.slices.removeValue(s),s.dispose())}hoverDataItem(t){const e=t.get("slice");e&&!e.isHidden()&&e.hover()}unhoverDataItem(t){const e=t.get("slice");e&&e.unhover()}updateLegendMarker(t){if(t){const e=t.get("slice");if(e){const i=t.get("legendDataItem");if(i){const s=i.get("markerRectangle");T(ze,n=>{e.get(n)!=null&&s.set(n,e.get(n))})}}}}_arrangeDown(t){if(t){let e=this._getNextDown();t.sort((i,s)=>i.y>s.y?1:i.y<s.y?-1:0),T(t,i=>{const s=i.label.adjustedLocalBounds();let n=s.top;i.y+n<e&&(i.y=e-n),i.label.set("y",i.y),e=i.y+s.bottom})}}_getNextUp(){return this.labelsContainer.maxHeight()}_getNextDown(){return 0}_arrangeUp(t){if(t){let e=this._getNextUp();t.sort((i,s)=>i.y<s.y?1:i.y>s.y?-1:0),T(t,i=>{const s=i.label.adjustedLocalBounds();let n=s.bottom;i.y+n>e&&(i.y=e-n),i.label.set("y",i.y),e=i.y+s.top})}}_arrangeRight(t){if(t){let e=0;t.sort((i,s)=>i.y>s.y?1:i.y<s.y?-1:0),T(t,i=>{const s=i.label.adjustedLocalBounds();let n=s.left;i.y+n<e&&(i.y=e-n),i.label.set("x",i.y),e=i.y+s.right})}}_arrangeLeft(t){if(t){let e=this.labelsContainer.maxWidth();t.sort((i,s)=>i.y<s.y?1:i.y>s.y?-1:0),T(t,i=>{const s=i.label.adjustedLocalBounds();let n=s.right;i.y+n>e&&(i.y=e-n),i.label.set("x",i.y),e=i.y+s.left})}}_updateSize(){super._updateSize(),this.markDirty()}_updateTick(t){}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}}Object.defineProperty(G,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentSeries"});Object.defineProperty(G,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Oe.classNames.concat([G.className])});class oe extends K{constructor(){super(...arguments),Object.defineProperty(this,"_maxRadius",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){super._afterNew(),this.seriesContainer.setAll({x:w,y:w})}_prepareChildren(){super._prepareChildren();const t=this.chartContainer,e=t.innerWidth(),i=t.innerHeight(),s=this.get("startAngle",0),n=this.get("endAngle",0),u=this.get("innerRadius");let a=ke(0,0,s,n,1);const d=e/(a.right-a.left),o=i/(a.bottom-a.top);let r={left:0,right:0,top:0,bottom:0};if(u instanceof se){let h=u.value,p=Math.min(d,o);h=Math.max(p*h,p-Math.min(i,e))/p,r=ke(0,0,s,n,h),this.setPrivateRaw("irModifyer",h/u.value)}a=Ve([a,r]);const y=this._maxRadius;this._maxRadius=Math.min(d,o);const l=z(this.get("radius",0),this._maxRadius);this.seriesContainer.setAll({dy:-l*(a.bottom+a.top)/2,dx:-l*(a.right+a.left)/2}),(this.isDirty("startAngle")||this.isDirty("endAngle")||y!=this._maxRadius)&&this.series.each(h=>{h._markDirtyKey("startAngle")}),(this.isDirty("innerRadius")||this.isDirty("radius"))&&this.series.each(h=>{h._markDirtyKey("innerRadius")})}radius(t){let e=z(this.get("radius",0),this._maxRadius),i=z(this.get("innerRadius",0),e);if(t){let s=this.series.indexOf(t),n=this.series.length,u=t.get("radius");return u!=null?i+z(u,e-i):i+(e-i)/n*(s+1)}return e}innerRadius(t){const e=this.radius();let i=z(this.get("innerRadius",0),e);if(i<0&&(i=e+i),t){let s=this.series.indexOf(t),n=this.series.length,u=t.get("innerRadius");return u!=null?i+z(u,e-i):i+(e-i)/n*s}return i}_updateSize(){super._updateSize(),this.markDirtyKey("radius")}}Object.defineProperty(oe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieChart"});Object.defineProperty(oe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:K.classNames.concat([oe.className])});class ce extends G{_makeSlices(){return new me(ve.new({}),()=>ue._new(this._root,{themeTags:xe(this.slices.template.get("themeTags",[]),["pie","series"])},[this.slices.template]))}_makeLabels(){return new me(ve.new({}),()=>ne._new(this._root,{themeTags:xe(this.labels.template.get("themeTags",[]),["pie","series"])},[this.labels.template]))}_makeTicks(){return new me(ve.new({}),()=>Ee._new(this._root,{themeTags:xe(this.ticks.template.get("themeTags",[]),["pie","series"])},[this.ticks.template]))}processDataItem(t){super.processDataItem(t);const e=this.makeSlice(t);e.on("scale",()=>{this._updateTick(t)}),e.on("shiftRadius",()=>{this._updateTick(t)}),e.events.on("positionchanged",()=>{this._updateTick(t)});const i=this.makeLabel(t);i.events.on("positionchanged",()=>{this._updateTick(t)}),this.makeTick(t),e.events.on("positionchanged",()=>{i.markDirty()})}_getNextUp(){const t=this.chart;return t?t._maxRadius:this.labelsContainer.maxHeight()/2}_getNextDown(){const t=this.chart;return t?-t._maxRadius:-this.labelsContainer.maxHeight()/2}_prepareChildren(){super._prepareChildren();const t=this.chart;if(t){if(this.isDirty("alignLabels")){let e=this.labels.template;if(this.get("alignLabels"))e.set("textType","aligned");else{let i=e.get("textType");(i==null||i=="aligned")&&e.set("textType","adjusted")}}if(this._valuesDirty||this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle")||this.isDirty("alignLabels")){this.markDirtyBounds();const e=this.get("startAngle",t.get("startAngle",-90)),s=this.get("endAngle",t.get("endAngle",270))-e;let n=e;const u=t.radius(this);this.setPrivateRaw("radius",u);let a=t.innerRadius(this)*t.getPrivate("irModifyer",1);a<0&&(a=u+a),T(this._dataItems,d=>{this.updateLegendValue(d);let o=s*d.get("valuePercentTotal")/100;const r=d.get("slice");if(r){r.set("radius",u),r.set("innerRadius",a),r.set("startAngle",n),r.set("arc",o);const h=d.get("fill");r._setDefault("fill",h),r._setDefault("stroke",h);const p=d.get("fillPattern");r._setDefault("fillPattern",p)}let y=Ce(n+o/2);const l=d.get("label");if(l&&(l.setPrivate("radius",u),l.setPrivate("innerRadius",a),l.set("labelAngle",y),l.get("textType")=="aligned")){let h=u+l.get("radius",0),p=u*O(y);y>90&&y<=270?(!l.isHidden()&&!l.isHiding()&&this._lLabels.push({label:l,y:p}),h*=-1,h-=this.labelsContainer.get("paddingLeft",0),l.set("centerX",we),l.setPrivateRaw("left",!0)):(!l.isHidden()&&!l.isHiding()&&this._rLabels.push({label:l,y:p}),h+=this.labelsContainer.get("paddingRight",0),l.set("centerX",0),l.setPrivateRaw("left",!1)),l.set("x",h),l.set("y",u*O(y))}n+=o,this._updateTick(d)})}}}_updateTick(t){const e=t.get("tick"),i=t.get("label"),s=t.get("slice"),n=e.get("location",1);if(e&&i&&s){const u=(s.get("shiftRadius",0)+s.get("radius",0))*s.get("scale",1)*n,a=i.get("labelAngle",0),d=V(a),o=O(a),r=this.labelsContainer,y=r.get("paddingLeft",0),l=r.get("paddingRight",0);let h=0,p=0;h=i.x(),p=i.y();let m=[];if(h!=0||p!=0){if(i.get("textType")=="circular"){const b=i.radius()-i.get("paddingBottom",0),x=i.get("labelAngle",0);h=b*V(x),p=b*O(x)}let P=-l;i.getPrivate("left")&&(P=y),m=[{x:s.x()+u*d,y:s.y()+u*o},{x:h+P,y:p},{x:h,y:p}]}e.set("points",m)}}_positionBullet(t){const e=t.get("sprite");if(e){const s=e.dataItem.get("slice");if(s){const n=s.get("innerRadius",0),u=s.get("radius",0),a=s.get("startAngle",0),d=s.get("arc",0),o=t.get("locationX",.5),r=t.get("locationY",.5),y=a+d*o,l=n+(u-n)*r;e.setAll({x:V(y)*l,y:O(y)*l})}}}}Object.defineProperty(ce,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieSeries"});Object.defineProperty(ce,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:G.classNames.concat([ce.className])});const rt=window.location.origin,ct=()=>(Me.useEffect(()=>{const c=We.new("vehicleTypeSplitChartDiv");c.setThemes([qe.new(c)]);const e=c.container.children.push(oe.new(c,{layout:c.verticalLayout})).series.push(ce.new(c,{valueField:"count",categoryField:"vehicleType",tooltip:Ue.new(c,{labelText:"{category}: {value} ({percentage}%)"})}));return Be.get(`${rt}/api/md/vehicle-type-details-split`).then(i=>{e.data.setAll(i.data)}).catch(i=>{console.error("Error fetching vehicle type split data:",i)}),e.labels.template.setAll({text:`{category}:
[bold]{value} ({percentage}%)`}),e.appear(1e3,100),()=>{c.dispose()}},[]),U.jsxs("div",{children:[U.jsx("div",{id:"vehicleTypeSplitChartDiv",style:{width:"100%",height:"500px"}}),U.jsx("div",{style:{textAlign:"center",marginTop:"20px",fontSize:"1rem"},children:U.jsxs("p",{children:[U.jsx("strong",{children:"Insights:"})," This chart displays the distribution of vehicle types (and additional details if desired) among all RFQs. Each slice represents the proportion of that specific vehicle type in relation to the total."]})})]}));export{ct as default};
