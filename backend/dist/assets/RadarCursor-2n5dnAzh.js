import{_ as S,a as mt,b as ke,c as ue,d as yr}from"./tslib.es6-CASWML4w.js";import{b as vr,r as T,g as K,e as Z,d as Ft,f as x,h as J,j as it,k as Nt,l as O,m as N,n as A,s as gr,V as M,o as Rt,D as Et,q as vi,t as mr,O as xr,v as Oe,w as br,x as ni,y as U,A as Cr,z as at,B as Pr,C as Ar,E as ht,F as tt,G as si,H as $t,I as fe,J as Ht,K as j,M as st,N as ot,S as lt,P as G,Q as ce,R as zt,T as Bt,U as Jt,W as At,X as gi,Y as mi,Z as xi,_ as pt,$ as ye,a0 as Dr,a as Ut,p as R,a1 as Sr,a2 as wt,a3 as Zt,a4 as dt,a5 as Qt,a6 as te,a7 as _r,a8 as Tr,a9 as ee,aa as Vr,ab as kr,ac as Gt,ad as oi,ae as St,af as bi,ag as H,ah as Or,ai as Ci,aj as de,ak as Fr,al as je,am as We,an as W,ao as ie,ap as li,aq as hi,ar as L,as as Lt,at as $,au as Ir,av as Ct,aw as wr,ax as vt,ay as Pi,az as Kt,aA as Ne,aB as V,aC as k,aD as ae,aE as Rr,aF as Lr,aG as Q,aH as yt,aI as rt,aJ as xt,aK as Mr,aL as q,aM as Se,aN as Ai,aO as ct,aP as Xr,aQ as Fe,aR as _e,aS as Be,aT as Dt,aU as ze,aV as Yr,aW as re,aX as Ee,aY as jr,aZ as He,a_ as Ue,a$ as Wr,b0 as Nr,b1 as qt,b2 as ui,b3 as Ie,b4 as me,b5 as di,b6 as Br,b7 as zr,b8 as Er,b9 as pi,ba as Di,bb as Si,bc as Hr,bd as Ur,be as fi,bf as Kr,bg as Gr,bh as Zr,bi as It,bj as ci,bk as _i,bl as ve,bm as qr,bn as pe,bo as $r,bp as Jr,bq as Qr,br as yi,bs as ta,bt as ea,bu as bt,bv as Te,bw as ia,bx as ra,by as Ve,bz as aa,bA as na}from"./HeatLegend-vW_cBZ4G.js";var Ti=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="DateAxisBreak",t.applyTheme(),t}return Object.defineProperty(r.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(t){this.setPropertyValue("startDate",t)&&(this.startValue=t.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(t){this.setPropertyValue("endDate",t)&&(this.endValue=t.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),r}(vr);T.registeredClasses.DateAxisBreak=Ti;var Vi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="DateAxisDataItem",t.applyTheme(),t.values.date={},t.values.endDate={},t}return Object.defineProperty(r.prototype,"date",{get:function(){return this.dates.date},set:function(t){this.setDate("date",t),this.value=t.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endDate",{get:function(){return this.dates.endDate},set:function(t){this.setDate("endDate",t),this.endValue=t.getTime()},enumerable:!0,configurable:!0}),r}(vi),B=function(h){S(r,h);function r(){var t=h.call(this)||this;return t._gapBreaks=!1,t.gridIntervals=new Rt,t.groupIntervals=new Rt,t.dateFormats=new Et,t.periodChangeDateFormats=new Et,t._baseIntervalReal={timeUnit:"day",count:1},t._prevSeriesTime={},t._minDifference={},t._firstWeekDay=1,t.groupMin={},t.groupMax={},t._intervalMax={},t._intervalMin={},t.className="DateAxis",t.setPropertyValue("markUnitChange",!0),t.snapTooltip=!0,t.tooltipPosition="pointer",t.setPropertyValue("groupData",!1),t.groupCount=200,t.events.on("parentset",t.getDFFormatter,t,!1),t.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]),t.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]),t.axisFieldName="date",t.applyTheme(),t}return r.prototype.fillRule=function(t){var e=t.value,i=t.component,a=i._gridInterval,n=K(a.timeUnit,a.count);Math.round((e-i.min)/n)/2==Math.round(Math.round((e-i.min)/n)/2)?t.axisFill.__disabled=!0:t.axisFill.__disabled=!1},r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),this.dateFormats.hasKey("millisecond")||this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.dateFormats.hasKey("second")||this.dateFormats.setKey("second",this.language.translate("_date_second")),this.dateFormats.hasKey("minute")||this.dateFormats.setKey("minute",this.language.translate("_date_minute")),this.dateFormats.hasKey("hour")||this.dateFormats.setKey("hour",this.language.translate("_date_hour")),this.dateFormats.hasKey("day")||this.dateFormats.setKey("day",this.language.translate("_date_day")),this.dateFormats.hasKey("week")||this.dateFormats.setKey("week",this.language.translate("_date_day")),this.dateFormats.hasKey("month")||this.dateFormats.setKey("month",this.language.translate("_date_month")),this.dateFormats.hasKey("year")||this.dateFormats.setKey("year",this.language.translate("_date_year")),this.periodChangeDateFormats.hasKey("millisecond")||this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.periodChangeDateFormats.hasKey("second")||this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second")),this.periodChangeDateFormats.hasKey("minute")||this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute")),this.periodChangeDateFormats.hasKey("hour")||this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("day")||this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("week")||this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("month")||this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))},r.prototype.createDataItem=function(){return new Vi},r.prototype.createAxisBreak=function(){return new Ti},r.prototype.validateDataItems=function(){var t=this.start,e=this.end,i=this.baseDuration,a=(this.max-this.min)/i;this._firstWeekDay=this.getFirstWeekDay(),this.getDFFormatter(),h.prototype.validateDataItems.call(this);var n=K(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=Math.max(1,(this.max-this.min)/n),this._deltaMinMax=this.baseDuration/2;var s=(this.max-this.min)/i;t=t+(e-t)*(1-a/s),this.zoom({start:t,end:e},!1,!0)},r.prototype.handleSelectionExtremesChange=function(){},r.prototype.getIntervalMax=function(t){return this._intervalMax[t.timeUnit+t.count]},r.prototype.getIntervalMin=function(t){return this._intervalMin[t.timeUnit+t.count]},r.prototype.calculateZoom=function(){var t=this;h.prototype.calculateZoom.call(this);var e=this.adjustDifference(this._minZoomed,this._maxZoomed),i=!1;if(this.groupData&&A(e)){var a=this.mainBaseInterval,n=this.getIntervalMin(a),s=this.getIntervalMax(a),o=n+(s-n)*this.start,l=n+(s-n)*this.end,d=this.adjustDifference(o,l),u=d+(this.startLocation+(1-this.endLocation))*this.baseDuration,p=void 0;this.groupInterval?p=mt({},this.groupInterval):(p=this.chooseInterval(0,u,this.groupCount,this.groupIntervals),K(p.timeUnit,p.count)<K(a.timeUnit,a.count)&&(p=mt({},a))),this._groupInterval=p;var f=p.timeUnit+p.count;this._currentDataSetId!=f&&(this._currentDataSetId=f,this.dispatch("groupperiodchanged")),this.series.each(function(y){y.baseAxis==t&&y.setDataSet(t._currentDataSetId)&&(i=!0)})}var c=this.chooseInterval(0,e,this._gridCount);K(c.timeUnit,c.count)<this.baseDuration&&(c=mt({},this.baseInterval)),this._gridInterval=c,this._nextGridUnit=mr(c.timeUnit),this._intervalDuration=K(c.timeUnit,c.count),this._gridDate=J(new Date(this.minZoomed-K(c.timeUnit,c.count)),c.timeUnit,c.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),O(this.series.iterator(),function(y){if(y.baseAxis==t){var v=y.getAxisField(t),g=J(new Date(t._minZoomed+t.baseDuration*.05),t.baseInterval.timeUnit,t.baseInterval.count,t._firstWeekDay,t._df.utc,void 0,t._df.timezoneMinutes,t._df.timezone).getTime(),m=g.toString(),b=y.dataItemsByAxis.getKey(t.uid).getKey(m+y.currentDataSetId),D=0;t.start!=0&&(b?(b=t.findFirst(b,g,v),D=b.index):D=y.dataItems.findClosestIndex(t._minZoomed,function(z){return z[v]},"left"));var C=t.baseInterval,_=it(J(new Date(t._maxZoomed),C.timeUnit,C.count,t._firstWeekDay,t._df.utc,void 0,t._df.timezoneMinutes,t._df.timezone),C.timeUnit,C.count,t._df.utc).getTime(),P=_.toString(),I=y.dataItemsByAxis.getKey(t.uid).getKey(P+y.currentDataSetId),F=y.dataItems.length;t.end!=1&&(I?F=I.index:(_-=1,F=y.dataItems.findClosestIndex(_,function(z){return z[v]},"right"),F++)),y.max(t)<g?(y.startIndex=y.dataItems.length,y.endIndex=y.dataItems.length,y.outOfRange=!0):y.min(t)>_?(y.startIndex=0,y.endIndex=0,y.outOfRange=!0):(y.outOfRange=!1,y.startIndex=D,y.endIndex=F),!i&&y.dataRangeInvalid&&y.validateDataRange()}})},r.prototype.findFirst=function(t,e,i){var a=t.index;if(a>0){var n=t.component,s=n.dataItems.getIndex(a-1),o=s[i];return!o||o.getTime()<e?t:this.findFirst(s,e,i)}else return t},r.prototype.validateData=function(){h.prototype.validateData.call(this),x(this.baseInterval.count)||(this.baseInterval.count=1)},Object.defineProperty(r.prototype,"minDifference",{get:function(){var t=this,e=Number.MAX_VALUE;return this.series.each(function(i){e>t._minDifference[i.uid]&&(e=t._minDifference[i.uid])}),(e==Number.MAX_VALUE||e==0)&&(e=K("day")),e},enumerable:!0,configurable:!0}),r.prototype.seriesDataChangeUpdate=function(t){this._minDifference[t.uid]=Number.MAX_VALUE},r.prototype.postProcessSeriesDataItems=function(t){var e=this;this._firstWeekDay=this.getFirstWeekDay(),t?this.seriesGroupUpdate(t):this.series.each(function(i){e.seriesGroupUpdate(i)}),this.addEmptyUnitsBreaks()},r.prototype.seriesGroupUpdate=function(t){var e=this;JSON.stringify(t._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)&&(t._baseInterval[this.uid]=this.mainBaseInterval,t.mainDataSet.each(function(i){e.postProcessSeriesDataItem(i)}),this.groupData&&this.groupSeriesData(t))},r.prototype.groupSeriesData=function(t){var e=this;if(t.baseAxis==this&&t.dataItems.length>0&&!t.dataGrouped){t.bulletsContainer.removeChildren();var i=[],a=this.mainBaseInterval,n=K(a.timeUnit,a.count);this.groupIntervals.each(function(s){var o=K(s.timeUnit,s.count);(o>n&&o<e.max-e.min||e.groupInterval)&&i.push(s)}),t._dataSets&&(t._dataSets.each(function(s,o){o.each(function(l){l.dispose()}),o.clear()}),t._dataSets.clear()),t.dataGrouped=!0,Z(i,function(s){var o="date"+e.axisLetter,l=s.timeUnit+s.count,d=new xr(t.mainDataSet.template.clone());t.dataSets.setKey(l,d);var u=t.mainDataSet,p=Number.NEGATIVE_INFINITY,f=0,c,y=[];Ft(t.dataFields,function(g,m){var b=g;b!=o&&b.indexOf("Show")==-1&&y.push(b)});var v;u.each(function(g){var m=g.getDate(o);if(m){var b=m.getTime();v=J(new Date(b),s.timeUnit,s.count,e._df.firstDayOfWeek,e._df.utc,void 0,e._df.timezoneMinutes,e._df.timezone);var D=v.getTime();p<D?(c&&t._adapterO&&Z(y,function(C){c.values[C].value=t._adapterO.apply("groupDataItem",{dataItem:c,interval:s,dataField:C,date:v,value:c.values[C].value}).value,c.values[C].workingValue=c.values[C].value}),c=d.create(),c.dataContext={},c.setWorkingLocation("dateX",t.dataItems.template.locations.dateX,0),c.setWorkingLocation("openDateX",t.dataItems.template.locations.openDateX,0),c.setWorkingLocation("dateY",t.dataItems.template.locations.dateY,0),c.setWorkingLocation("openDateY",t.dataItems.template.locations.openDateY,0),c.component=t,c.setDate(o,v),c._index=f,f++,Z(y,function(C){var _=g.values[C];if(_){var P=_.value;t._adapterO&&(P=t._adapterO.apply("groupValue",{dataItem:g,interval:s,dataField:C,date:v,value:P}).value);var I=c.values[C];x(P)?(I.value=P,I.workingValue=P,I.open=P,I.close=P,I.low=P,I.high=P,I.sum=P,I.average=P,I.count=1):I.count=0}}),e.postProcessSeriesDataItem(c,s),Ft(t.propertyFields,function(C,_){var P=C,I=g.properties[C];A(I)&&(c.hasProperties=!0,c.setProperty(P,I))}),c.groupDataItems=[g],p=D):c&&(Z(y,function(C){var _=t.groupFields[C],P=g.values[C];if(P){var I=P.value;if(t._adapterO&&(I=t._adapterO.apply("groupValue",{dataItem:g,interval:s,dataField:C,date:v,value:I}).value),x(I)){var F=c.values[C];x(F.open)||(F.open=I),F.close=I,(F.low>I||!x(F.low))&&(F.low=I),(F.high<I||!x(F.high))&&(F.high=I),x(F.sum)?F.sum+=I:F.sum=I,F.count++,F.average=F.sum/F.count,x(F[_])&&(F.value=F[_],F.workingValue=F.value)}}}),Oe(g.properties,c.properties),Ft(t.propertyFields,function(C,_){var P=C,I=g.properties[C];A(I)&&(c.hasProperties=!0,c.setProperty(P,I))}),c.groupDataItems.push(g))}c&&Oe(g.dataContext,c.dataContext)}),c&&t._adapterO&&Z(y,function(g){c.values[g].value=t._adapterO.apply("groupDataItem",{dataItem:c,interval:s,dataField:g,date:v,value:c.values[g].value}).value,c.values[g].workingValue=c.values[g].value})}),this.calculateZoom()}},r.prototype.getDFFormatter=function(){this._df=this.dateFormatter},r.prototype.postProcessSeriesDataItem=function(t,e){var i=this,a="";e?a=e.timeUnit+e.count:e=this.mainBaseInterval;var n=t.component,s=n.dataItemsByAxis.getKey(this.uid);Ft(t.dates,function(o){var l=t.getDate(o),d=l.getTime(),u=J(new Date(d),e.timeUnit,e.count,i._firstWeekDay,i._df.utc,void 0,i._df.timezoneMinutes,i._df.timezone),p=u.getTime(),f=it(new Date(p),e.timeUnit,e.count,i._df.utc);t.setCalculatedValue(o,p,"open"),t.setCalculatedValue(o,f.getTime(),"close"),s.setKey(p+a,t)})},r.prototype.addEmptyUnitsBreaks=function(){var t=this;if(this.skipEmptyPeriods&&x(this.min)&&x(this.max)){var e=this.baseInterval.timeUnit,i=this.baseInterval.count;this._axisBreaks&&this._axisBreaks.clear();for(var a=J(new Date(this.min),e,i,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),n=void 0,s=function(){it(a,e,i,o._df.utc);var l=a.getTime(),d=l.toString(),u=br(o.series.iterator(),function(p){return!!p.dataItemsByAxis.getKey(t.uid).getKey(d+p.currentDataSetId)});u?n&&(n.endDate=new Date(l-1),n=void 0):n||(n=o.axisBreaks.create(),n.startDate=new Date(l),o._gapBreaks=!0)},o=this;a.getTime()<this.max-this.baseDuration;)s()}},r.prototype.fixAxisBreaks=function(){var t=this;h.prototype.fixAxisBreaks.call(this);var e=this._axisBreaks;e&&e.length>0&&e.each(function(i){var a=Math.ceil(t._gridCount*(Math.min(t.end,i.endPosition)-Math.max(t.start,i.startPosition))/(t.end-t.start));i.gridInterval=t.chooseInterval(0,i.adjustedEndValue-i.adjustedStartValue,a);var n=J(new Date(i.adjustedStartValue),i.gridInterval.timeUnit,i.gridInterval.count,t._firstWeekDay,t._df.utc,void 0,t._df.timezoneMinutes,t._df.timezone);n.getTime()>i.startDate.getTime()&&it(n,i.gridInterval.timeUnit,i.gridInterval.count,t._df.utc),i.gridDate=n})},r.prototype.getFirstWeekDay=function(){return this._df?this._df.firstDayOfWeek:1},r.prototype.getGridDate=function(t,e){var i=this._gridInterval.timeUnit,a=this._gridInterval.count;J(t,i,1,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);var n=t.getTime(),s=Nt(t),o=it(s,i,e,this._df.utc).getTime(),l=this.isInBreak(o);l&&l.endDate&&(s=new Date(l.endDate.getTime()),J(s,i,a,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),s.getTime()<l.endDate.getTime()&&it(s,i,a,this._df.utc),o=s.getTime());var d=this.adjustDifference(n,o),u=Math.round(d/K(i));return u<a?this.getGridDate(t,e+a):s},r.prototype.getBreaklessDate=function(t,e,i){var a=new Date(t.endValue);J(a,e,i,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),it(a,e,i,this._df.utc);var n=a.getTime();return t=this.isInBreak(n),t?this.getBreaklessDate(t,e,i):a},r.prototype.validateAxisElements=function(){var t=this;if(x(this.max)&&x(this.min)){this.calculateZoom();var e=this._gridDate.getTime(),i=this._gridInterval.timeUnit,a=this._gridInterval.count,n=Nt(this._gridDate),s=this._dataItemsIterator;this.resetIterators();for(var o=function(){var u=l.getGridDate(Nt(n),a);e=u.getTime();var p=Nt(u);p=it(p,i,a,l._df.utc);var f=l.dateFormats.getKey(i);l.markUnitChange&&n&&ni(u,n,l._nextGridUnit,l._df.utc)&&i!=="year"&&(f=l.periodChangeDateFormats.getKey(i));var c=l._df.format(u,f),y=s.find(function(v){return v.text===c});y.__disabled&&(y.__disabled=!1),l.appendDataItem(y),y.axisBreak=void 0,y.date=u,y.endDate=p,y.text=c,l.validateDataElement(y),n=u},l=this;e<=this._maxZoomed;)o();var d=this.renderer;this._axisBreaks&&O(this._axisBreaks.iterator(),function(u){if(u.breakSize>0){var p=u.gridInterval.timeUnit,f=u.gridInterval.count;if(U(u.startPoint,u.endPoint)>d.minGridDistance*4)for(var c=u.gridDate.getTime(),y,v=0,g=function(){var m=Nt(u.gridDate);if(c=it(m,p,f*v,t._df.utc).getTime(),v++,c>u.adjustedStartValue&&c<u.adjustedEndValue){var b=Nt(m);b=it(b,p,f,t._df.utc);var D=t.dateFormats.getKey(p);t.markUnitChange&&y&&ni(m,y,t._nextGridUnit,t._df.utc)&&p!=="year"&&(D=t.periodChangeDateFormats.getKey(p));var C=t._df.format(m,D),_=s.find(function(P){return P.text===C});_.__disabled&&(_.__disabled=!1),t.appendDataItem(_),_.axisBreak=u,u.dataItems.moveValue(_),_.date=m,_.endDate=b,_.text=C,y=m,t.validateDataElement(_)}};c<=u.adjustedMax;)g()}})}},r.prototype.validateDataElement=function(t){if(t.itemIndex=this._axisItemCount,this._axisItemCount++,x(this.max)&&x(this.min)){var e=this.renderer,i=t.value,a=t.endValue;x(a)||(a=i);var n=this.valueToPosition(i),s=this.valueToPosition(a),o=s;!t.isRange&&this._gridInterval.count>this.baseInterval.count&&(s=n+(s-n)/(this._gridInterval.count/this.baseInterval.count)),t.position=n;var l=t.tick;l&&!l.disabled&&e.updateTickElement(l,n,s);var d=t.grid;d&&!d.disabled&&e.updateGridElement(d,n,s);var u=t.axisFill;u&&!u.disabled&&(e.updateFillElement(u,n,o),t.isRange||this.fillRule(t));var p=t.mask;p&&e.updateFillElement(p,n,s),t.bullet&&e.updateBullet(t.bullet,n,s);var f=t.label;if(f&&!f.disabled){var c=f.location;c==0&&(this._gridInterval.count==1&&this._gridInterval.timeUnit!="week"&&!t.isRange?c=.5:c=0),e.updateLabelElement(f,n,s,c)}}},Object.defineProperty(r.prototype,"baseDuration",{get:function(){return K(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:!0,configurable:!0}),r.prototype.adjustMinMax=function(t,e){return{min:t,max:e,step:this.baseDuration}},r.prototype.fixMin=function(t){var e=this.baseInterval,i=J(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime(),a=it(new Date(i),e.timeUnit,e.count,this._df.utc).getTime();return i+(a-i)*this.startLocation},r.prototype.fixMax=function(t){var e=this.baseInterval,i=J(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime(),a=it(new Date(i),e.timeUnit,e.count,this._df.utc).getTime();return i+(a-i)*this.endLocation},r.prototype.chooseInterval=function(t,e,i,a){a||(a=this.gridIntervals);var n=a.getIndex(t),s=K(n.timeUnit,n.count),o=a.length-1;if(t>=o)return mt({},a.getIndex(o));var l=Math.ceil(e/s);return e<s&&t>0?mt({},a.getIndex(t-1)):l<=i?mt({},a.getIndex(t)):t+1<a.length?this.chooseInterval(t+1,e,i,a):mt({},a.getIndex(t))},r.prototype.formatLabel=function(t){return this._df.format(t)},r.prototype.dateToPosition=function(t){return this.valueToPosition(t.getTime())},r.prototype.anyToPosition=function(t){return t instanceof Date?this.dateToPosition(t):this.valueToPosition(t)},r.prototype.dateToPoint=function(t){var e=this.dateToPosition(t),i=this.renderer.positionToPoint(e),a=this.renderer.positionToAngle(e);return{x:i.x,y:i.y,angle:a}},r.prototype.anyToPoint=function(t){return t instanceof Date?this.dateToPoint(t):this.valueToPoint(t)},r.prototype.positionToDate=function(t){return new Date(this.positionToValue(t))},r.prototype.getPositionX=function(t,e,i,a,n){var s=this.getTimeByLocation(t,e,i);x(s)||(s=this.baseValue);var o=this.valueToPosition(s);return n&&(o=N(o,n.start,n.end)),o},r.prototype.getPositionY=function(t,e,i,a,n){var s=this.getTimeByLocation(t,e,i),o=t.getValue("valueX","stack");x(s)||(s=this.baseValue);var l=this.valueToPosition(s+o);return n&&(l=N(l,n.start,n.end)),l},r.prototype.getAngle=function(t,e,i,a,n){var s=this.getTimeByLocation(t,e,i),o=t.getValue(a,"stack");x(s)||(s=this.baseValue);var l=this.valueToPosition(s+o);return n&&(l=N(l,n.start,n.end)),this.positionToAngle(l)},r.prototype.getTimeByLocation=function(t,e,i){if(A(e)){x(i)||(i=t.workingLocations[e],x(i)||(i=0));var a=t.values[e].open,n=t.values[e].close,s=t.values[e].workingValue,o=t.values[e].value,l=o-s;if(a-=l,n-=l,x(a)&&x(n))return a+(n-a)*i}},r.prototype.processSeriesDataItem=function(t,e){var i=t.component,a,n=t["date"+e];if(x(this.timezoneOffset)?(n.setTime(n.getTime()+(n.getTimezoneOffset()-this.timezoneOffset)*6e4),t.setValue("date"+e,n.getTime(),0)):A(this.timezone)&&(n=gr(n,this.timezone),t.setValue("date"+e,n.getTime(),0),t["date"+e]=n),n)a=n.getTime();else return;var s=t["openDate"+e],o=this._prevSeriesTime[i.uid],l;if(s&&(l=s.getTime()),x(l)){var d=Math.abs(a-l);this._minDifference[i.uid]>d&&(this._minDifference[i.uid]=d)}var u=a-o;u>0&&this._minDifference[i.uid]>u&&(this._minDifference[i.uid]=u),this._prevSeriesTime[i.uid]=a,i._baseInterval[this.uid]&&this.postProcessSeriesDataItem(t)},r.prototype.updateAxisBySeries=function(){h.prototype.updateAxisBySeries.call(this);var t=this.chooseInterval(0,this.minDifference,1);this.minDifference>=K("day",27)&&t.timeUnit=="week"&&(t.timeUnit="month",t.count=1),t.timeUnit=="month"&&(this.minDifference>=K("day",29*2)&&t.count==1&&(t.count=2),this.minDifference>=K("day",29*3)&&t.count==2&&(t.count=3),this.minDifference>=K("day",29*6)&&t.count==5&&(t.count=6)),this.minDifference>=K("hour",23)&&t.timeUnit=="hour"&&(t.timeUnit="day",t.count=1),this.minDifference>=K("week",1)-K("hour",1)&&t.timeUnit=="day"&&(t.timeUnit="week",t.count=1),this.minDifference>=K("year",1)-K("day",1.01)&&t.timeUnit=="month"&&(t.timeUnit="year",t.count=1),this._baseIntervalReal=t,this._mainBaseInterval=t},Object.defineProperty(r.prototype,"baseInterval",{get:function(){return this._groupInterval?this._groupInterval:this._baseInterval?this._baseInterval:this._baseIntervalReal},set:function(t){JSON.stringify(this._baseInterval)!=JSON.stringify(t)&&(this._baseInterval=t,this._mainBaseInterval=t,x(t.count)||(t.count=1),this.invalidate(),this.postProcessSeriesDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mainBaseInterval",{get:function(){return this._baseInterval?this._baseInterval:this._mainBaseInterval?this._mainBaseInterval:this._baseIntervalReal},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(t){if(t){var e=this.axisBreaks.template;e.startLine.disabled=!0,e.endLine.disabled=!0,e.fillShape.disabled=!0,e.breakSize=0}else this._gapBreaks&&(this.axisBreaks.clear(),this._gapBreaks=!1);this.setPropertyValue("skipEmptyPeriods",t)&&(this.invalidate(),this.postProcessSeriesDataItems(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(t){this.setPropertyValue("tooltipDateFormat",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(t){this.setPropertyValue("markUnitChange",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),r.prototype.getTooltipText=function(t){var e,i=this.positionToDate(t);if(i=J(i,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),this.tooltipDate=i,A(this.tooltipDateFormat))e=this._df.format(i,this.tooltipDateFormat,["day","month","week","year"].indexOf(this.baseInterval.timeUnit)==-1);else{var a=this.dateFormats.getKey(this.baseInterval.timeUnit);a?e=this._df.format(i,a):e=this.getPositionLabel(t)}return this._adapterO?this._adapterO.apply("getTooltipText",e):e},r.prototype.roundPosition=function(t,e,i){var a=this.baseInterval,n=a.timeUnit,s=a.count,o=this.positionToDate(t);if(J(o,n,s,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),e>0&&it(o,n,e*s,this._df.utc),i>0&&i<1&&o.setTime(o.getTime()+this.baseDuration*i),this.isInBreak(o.getTime()))for(;o.getTime()<this.max&&(it(o,n,s,this._df.utc),!!this.isInBreak(o.getTime())););return this.dateToPosition(o)},r.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},r.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},r.prototype.getSeriesDataItem=function(t,e,i){var a=this.positionToValue(e),n=.5;this.axisLetter=="Y"?n=t.dataItems.template.locations.dateY:n=t.dataItems.template.locations.dateX;var s=a-n*this.baseDuration,o=J(new Date(a),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),l=J(new Date(a+this.baseDuration),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);l.getTime()>o.getTime()&&Math.abs(l.getTime()-s)<Math.abs(s-o.getTime())&&(o=l);var d=t.dataItemsByAxis.getKey(this.uid),u=d.getKey(o.getTime()+t.currentDataSetId);if(!u&&i){var p;this.axisLetter=="Y"?p="dateY":p="dateX",u=t.dataItems.getIndex(t.dataItems.findClosestIndex(o.getTime(),function(f){return f[p]?f[p].getTime():-1/0},"any"))}return u},r.prototype.getPositionLabel=function(t){var e=this.positionToDate(t);return this._df.format(e,this.getCurrentLabelFormat())},r.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")},r.prototype.initRenderer=function(){h.prototype.initRenderer.call(this);var t=this.renderer;t&&(t.ticks.template.location=0,t.grid.template.location=0,t.labels.template.location=0,t.baseGrid.disabled=!0)},Object.defineProperty(r.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),r.prototype.animateMinMax=function(t,e){var i=this,a=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing);return a.events.on("animationprogress",function(){i.dispatch("extremeschanged")}),a},r.prototype.handleExtremesChange=function(){if(h.prototype.handleExtremesChange.call(this),this.groupData){var t=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[t]=this._finalMin,this.groupMax[t]=this._finalMax}},r.prototype.zoomToDates=function(t,e,i,a,n){t=this._df.parse(t),e=this._df.parse(e),this.zoomToValues(t.getTime(),e.getTime(),i,a,n)},r.prototype.zoomToValues=function(t,e,i,a,n){var s=this;if(this.groupData){var d=this.adjustDifference(t,e),u=!1;e==this.max&&(u=!0);var p=!1;if(t==this.min&&(p=!0),A(d)){var f=this.mainBaseInterval,c=this.chooseInterval(0,d,this.groupCount,this.groupIntervals);(c.timeUnit==f.timeUnit&&c.count<f.count||K(c.timeUnit,1)<K(f.timeUnit,1))&&(c=mt({},f));var y=c.timeUnit+c.count,v=this.groupMin[y],g=this.groupMax[y];(!x(v)||!x(g))&&(v=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,this.series.each(function(D){var C=D.min(s),_=D.max(s);if(D._dataSets){var P=D._dataSets.getKey(c.timeUnit+c.count);if(P){var I=P.getIndex(0),F=P.getIndex(P.length-1);I&&(D.xAxis==s?C=I.dateX.getTime():D.yAxis==s&&(C=I.dateY.getTime())),F&&(D.xAxis==s?_=F.dateX.getTime():D.yAxis==s&&(_=F.dateY.getTime()))}}_=J(it(new Date(_),c.timeUnit,1,s._df.utc),c.timeUnit,1,s._df.firstDayOfWeek,s._df.utc,void 0,s._df.timezoneMinutes,s._df.timezone).getTime(),C<v&&(v=C),_>g&&(g=_)}),this.groupMin[y]=v,this.groupMax[y]=g),t=N(t,v,g),e=N(e,v,g),n&&(u&&(t=e-d,t=N(t,v,g)),p&&(e=t+d,e=N(e,v,g)));var o=(t-v)/(g-v),l=(e-v)/(g-v);this.zoom({start:o,end:l},i,a)}}else{var o=this.valueToPosition(t),l=this.valueToPosition(e);this.zoom({start:o,end:l},i,a)}},r.prototype.asIs=function(t){return t=="baseInterval"||h.prototype.asIs.call(this,t)},r.prototype.copyFrom=function(t){var e=this;h.prototype.copyFrom.call(this,t),this.dateFormats=t.dateFormats,this.periodChangeDateFormats=t.periodChangeDateFormats,this.groupIntervals.clear(),t.groupIntervals.each(function(i){e.groupIntervals.push(mt({},i))}),this.gridIntervals.clear(),t.gridIntervals.each(function(i){e.gridIntervals.push(mt({},i))}),t._baseInterval&&(this.baseInterval=t._baseInterval)},r.prototype.showTooltipAtPosition=function(t,e){var i=this;if(e||(t=this.toAxisPosition(t)),this.snapTooltip){var a=this.positionToDate(t),n=a.getTime(),s;if(this.series.each(function(d){if(d.baseAxis==i){var u=i.getSeriesDataItem(d,t,!0);if(u){var p=void 0;d.xAxis==i&&(p=u.dateX),d.yAxis==i&&(p=u.dateY),s?Math.abs(s.getTime()-n)>Math.abs(p.getTime()-n)&&(s=p):s=p}}}),s){var o=s.getTime();s=J(new Date(o),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),o=s.getTime();var l=this.renderer.tooltipLocation;l==0&&(l=1e-4),s=new Date(s.getTime()+this.baseDuration*l),t=this.dateToPosition(s),this.chart.cursor&&this.chart.cursor.snapToSeries||this.series.each(function(d){var u=d.dataItemsByAxis.getKey(i.uid).getKey(o+d.currentDataSetId),p=d.showTooltipAtDataItem(u);p?i.chart._seriesPoints.push({series:d,point:p}):(d.tooltipText||d.tooltipHTML)&&d.hideTooltip()})}}h.prototype.showTooltipAtPosition.call(this,t,!0)},Object.defineProperty(r.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(t){var e=this;this.setPropertyValue("groupData",t)&&(this.series.each(function(i){i.setDataSet(""),t&&!i.dataGrouped&&i.inited&&(i._baseInterval[e.uid]=e.mainBaseInterval,e.groupSeriesData(i))}),this._currentDataSetId="",this._groupInterval=void 0,this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"groupInterval",{get:function(){return this.getPropertyValue("groupInterval")},set:function(t){this.setPropertyValue("groupInterval",t)&&(this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(t){this.setPropertyValue("groupCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(t){this.setPropertyValue("timezoneOffset",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"timezone",{get:function(){return this.getPropertyValue("timezone")},set:function(t){this.setPropertyValue("timezone",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:!0,configurable:!0}),r.prototype.makeGap=function(t,e){var i=t.component;if(t&&e&&!i.connect&&x(i.autoGapCount)&&i.baseAxis==this){var a=t.dates["date"+this.axisLetter],n=e.dates["date"+this.axisLetter];if(a&&n){var s=a.getTime(),o=n.getTime();if(s-o>i.autoGapCount*this.baseDuration)return!0}}return!1},Object.defineProperty(r.prototype,"baseValue",{get:function(){return this.min},enumerable:!0,configurable:!0}),r.prototype._saveMinMax=function(t,e){var i=this.groupInterval;i||(i=this.mainBaseInterval);var a=i.timeUnit+i.count;this._intervalMin[a]=t,this._intervalMax[a]=e},r}(M);T.registeredClasses.DateAxis=B;T.registeredClasses.DateAxisDataItem=Vi;var ki=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="CategoryAxisBreak",t.properties.startLocation=.5,t.properties.endLocation=.5,t.applyTheme(),t}return Object.defineProperty(r.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(t){this.setPropertyValue("startCategory",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(t){this.setPropertyValue("endCategory",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"startValue",{get:function(){var t=this.getPropertyValue("startCategory");return t?this.axis.categoryToIndex(t):this.getPropertyValue("startValue")},set:function(t){this.setPropertyValue("startValue",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endValue",{get:function(){var t=this.getPropertyValue("endCategory");return t?this.axis.categoryToIndex(t):this.getPropertyValue("endValue")},set:function(t){this.setPropertyValue("endValue",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),r}(Cr);T.registeredClasses.CategoryAxisBreak=ki;var Oi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.seriesDataItems={},t.className="CategoryAxisDataItem",t.text="{category}",t.locations.category=0,t.locations.endCategory=1,t.deltaPosition=0,t.applyTheme(),t}return Object.defineProperty(r.prototype,"category",{get:function(){return this._adapterO&&this._adapterO.isEnabled("category")?this._adapterO.apply("category",this.properties.category):this.properties.category},set:function(t){var e=this.properties.category;this.setProperty("category",t),A(e)&&e!=t&&this.component&&this.component.validateDataElement(this)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(t){this.setProperty("endCategory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(t){t!=this.properties.deltaCoordinate&&(this.setProperty("deltaCoordinate",t),this.component&&(this.component.invalidateDataItems(),this.component.invalidateSeries()))},enumerable:!0,configurable:!0}),r}(Ar),E=function(h){S(r,h);function r(){var t=h.call(this)||this;t.dataItemsByCategory=new Et,t.className="CategoryAxis",t.axisFieldName="category",t._lastDataItem=t.createDataItem(),t._lastDataItem.component=t,t._disposers.push(t._lastDataItem),t.applyTheme();var e=t.dataItemsByCategory;return t.addDisposer(t.mainDataSet.events.on("removed",function(i){e.removeKey(i.oldValue.category)})),t}return r.prototype.createDataItem=function(){return new Oi},r.prototype.createAxisBreak=function(){return new ki},r.prototype.processSeriesDataItem=function(t,e){h.prototype.processSeriesDataItem.call(this,t,e);var i=t["category"+this.axisLetter];if(A(i)){var a=this.dataItemsByCategory.getKey(i);if(a){var n=t.component.uid,s=a.seriesDataItems[n];s||(s=[],a.seriesDataItems[n]=s),s.push(t)}}else t.component.dataItems.remove(t)},r.prototype.validateDataRange=function(){var t=this;h.prototype.validateDataRange.call(this),O(this._series.iterator(),function(e){if(e.xAxis instanceof r&&e.yAxis instanceof r)e.invalidateDataRange();else{var i=t.positionToIndex(t.start),a=t.positionToIndex(t.end);a>=t.dataItems.length&&a--;for(var n=e.uid,s=void 0,o=void 0,l=i;l<=a;l++){var d=t.dataItems.getIndex(l);if(d){var u=d.seriesDataItems[n];if(u)for(var p=0;p<u.length;p++){var f=u[p];if(f){var c=f.index;(!x(s)||c<s)&&(s=c),(!x(o)||c>o)&&(o=c)}}}}x(s)?e.startIndex=s:e.start=t.start,x(o)?e.endIndex=o+1:e.end=t.end,t._axisBreaks&&t._axisBreaks.length>0&&e.invalidateDataRange()}})},r.prototype.validate=function(){var t=this;h.prototype.validate.call(this);var e=this.dataItems.length,i=N(Math.floor(this.start*e-1),0,e),a=N(Math.ceil(this.end*e),0,e);this.renderer.invalid&&this.renderer.validate();var n=this.renderer.axisLength/Math.max(this.renderer.minGridDistance,1/Number.MAX_SAFE_INTEGER),s=Math.min(this.dataItems.length,Math.ceil((a-i)/n));if(this._startIndex=Math.floor(i/s)*s,this._endIndex=Math.ceil(this.end*e),this.fixAxisBreaks(),this._startIndex==this._endIndex&&this._endIndex++,this._frequency=s,!(this.axisLength<=0)){this.maxZoomFactor=this.dataItems.length,this.dataItems.length<=0&&(this.maxZoomFactor=1),this.resetIterators(),i=ht(0,this._startIndex-this._frequency),a=tt(this.dataItems.length,this._endIndex+this._frequency);for(var o=0,l=0;l<i;l++){var d=this.dataItems.getIndex(l);d.__disabled=!0}for(var l=a,u=this.dataItems.length;l<u;l++){var d=this.dataItems.getIndex(l);d.__disabled=!0}for(var l=i;l<a;l++)if(l<this.dataItems.length){var d=this.dataItems.getIndex(l);if(l/this._frequency==Math.round(l/this._frequency)){var p=this.isInBreak(l);p||(this.appendDataItem(d),this.validateDataElement(d,o)),o++}else d.__disabled=!0}if(this.appendDataItem(this._lastDataItem),this.validateDataElement(this._lastDataItem,o+1,this.dataItems.length),this._axisBreaks){var f=this._axisBreaks;f.each(function(c){var y=c.adjustedStartValue,v=c.adjustedEndValue;if(si({start:y,end:v},{start:t._startIndex,end:t._endIndex})){for(var g=y;g<=v;g++){var m=t.dataItems.getIndex(g);m.__disabled=!0}var b=N(Math.ceil(t._frequency/c.breakSize),1,v-y),D=0;if(c.breakSize>0)for(var g=y;g<=v;g=g+b){var m=t.dataItems.getIndex(g);m.__disabled=!1,t.appendDataItem(m),t.validateDataElement(m,D),D++}}})}this.validateBreaks(),this.validateAxisRanges(),this.ghostLabel.invalidate(),this.renderer.invalidateLayout()}},r.prototype.validateDataElement=function(t,e,i){h.prototype.validateDataElement.call(this,t),t.itemIndex=this._axisItemCount,this._axisItemCount++;var a=this.renderer;x(i)||(i=this.categoryToIndex(t.category));var n=this.categoryToIndex(t.endCategory);x(n)||(n=i);var s=this.indexToPosition(i,t.locations.category),o=this.indexToPosition(n,t.locations.endCategory);t.position=s;var l,d,u;t.isRange&&(l=n,d=this.indexToPosition(i,t.locations.category),u=this.indexToPosition(l,t.locations.endCategory)),t.point=a.positionToPoint(s);var p=t.tick;p&&!p.disabled&&a.updateTickElement(p,s,o);var f=t.grid;f&&!f.disabled&&a.updateGridElement(f,s,o);var c=t.label;c&&!c.disabled&&((!t.isRange||c.text==null)&&(t.text=t.text),a.updateLabelElement(c,s,o),(a instanceof $t&&t.label.measuredWidth>this.ghostLabel.measuredWidth||a instanceof fe&&t.label.measuredHeight>this.ghostLabel.measuredHeight)&&(t.label.html?this.ghostLabel.html=t.label.currentText:this.ghostLabel.text=t.label.currentText));var y=t.axisFill;y&&!y.disabled&&(t.isRange||(l=i+this._frequency,d=this.indexToPosition(i,y.location),u=this.indexToPosition(l,y.location)),a.updateFillElement(y,d,u),t.isRange||this.fillRule(t,e)),t.bullet&&a.updateBullet(t.bullet,s,o);var v=t.mask;v&&a.updateFillElement(v,d,u)},r.prototype.disposeData=function(){this.dataItemsByCategory.clear(),h.prototype.disposeData.call(this)},r.prototype.processDataItem=function(t,e){t&&(h.prototype.processDataItem.call(this,t,e),A(t.category)&&this.dataItemsByCategory.setKey(t.category,t))},r.prototype.getDataItem=function(t){var e=t[this.dataFields.category];if(A(e)){var i=this.dataItemsByCategory.getKey(e);return i||this.dataItems.create()}},r.prototype.indexToPosition=function(t,e){x(e)||(e=.5);var i=this.startIndex,a=this.endIndex,n=this.adjustDifference(i,a),s=this.startLocation,o=this.endLocation;if(n-=s,n-=1-o,this._axisBreaks){var l=this._axisBreaks;Ht(l.iterator(),function(p){var f=p.adjustedStartValue,c=p.adjustedEndValue;if(t<i||!x(f)||!x(c))return!1;if(si({start:f,end:c},{start:i,end:a})){f=Math.max(i,f),c=Math.min(a,c);var y=p.breakSize;t>c?i+=(c-f)*(1-y):t<f||(t=f+(t-f)*y)}return!0})}var d=0,u=this.dataItems.getIndex(t);return u&&(d=u.deltaPosition),j(d+(t+e-s-i)/n,5)},r.prototype.categoryToPosition=function(t,e){var i=this.categoryToIndex(t);return this.indexToPosition(i,e)},r.prototype.categoryToPoint=function(t,e){var i=this.categoryToPosition(t,e),a=this.renderer.positionToPoint(i),n=this.renderer.positionToAngle(i);return{x:a.x,y:a.y,angle:n}},r.prototype.anyToPoint=function(t,e){return this.categoryToPoint(t,e)},r.prototype.anyToPosition=function(t,e){return this.categoryToPosition(t,e)},r.prototype.categoryToIndex=function(t){if(A(t)){var e=this.dataItemsByCategory.getKey(t);if(e)return e.index}},r.prototype.zoomToCategories=function(t,e){this.zoomToIndexes(this.categoryToIndex(t),this.categoryToIndex(e)+1)},r.prototype.getAnyRangePath=function(t,e,i,a){var n=this.categoryToPosition(t,i),s=this.categoryToPosition(e,a);return this.getPositionRangePath(n,s)},r.prototype.roundPosition=function(t,e){var i=this.positionToIndex(t);return this.indexToPosition(i,e)},r.prototype.getFirstSeriesDataItem=function(t,e){for(var i=0;i<t.dataItems.length;i++){var a=t.dataItems.getIndex(i);if(t.xAxis==this&&a.categoryX==e||t.yAxis==this&&a.categoryY==e)return a}},r.prototype.getLastSeriesDataItem=function(t,e){for(var i=t.dataItems.length-1;i>=0;i--){var a=t.dataItems.getIndex(i);if(t.xAxis==this&&a.categoryX==e||t.yAxis==this&&a.categoryY==e)return a}},r.prototype.getSeriesDataItemByCategory=function(t,e){var i=this,a;return e.dataItems.each(function(n){e.xAxis==i?n.categoryX==t&&(a=n):e.yAxis==i&&n.categoryY==t&&(a=n)}),a},r.prototype.getSeriesDataItem=function(t,e,i){var a=this;if(x(e)){var n=this.positionToIndex(e);n>=this.dataItems.length&&n--;var s=this.dataItems.getIndex(n);if(s){var o=s.category,l,d=t.dataItems.getIndex(n);return d&&(t.xAxis==this&&d.categoryX==o||t.yAxis==this&&d.categoryY==o)?d:(t.dataItems.each(function(u){t.xAxis==a&&u.categoryX==o&&(l||(l=u),Math.abs(n-l.index)>Math.abs(n-u.index)&&(l=u)),t.yAxis==a&&u.categoryY==o&&(l||(l=u),Math.abs(n-l.index)>Math.abs(n-u.index)&&(l=u))}),l)}}},r.prototype.getX=function(t,e,i,a,n){var s=this.getPositionX(t,e,i,a,n);return st(s)?this.basePoint.x:this.renderer.positionToPoint(s).x},r.prototype.getPositionX=function(t,e,i,a,n){var s;return A(e)&&(s=this.categoryToPosition(t.categories[e],i)),n&&(s=N(s,n.start,n.end)),s},r.prototype.getY=function(t,e,i,a,n){var s=this.getPositionY(t,e,i,a,n);return st(s)?this.basePoint.y:this.renderer.positionToPoint(s).y},r.prototype.getPositionY=function(t,e,i,a,n){var s;return A(e)&&(s=this.categoryToPosition(t.categories[e],i)),n&&(s=N(s,n.start,n.end)),s},r.prototype.getAngle=function(t,e,i,a,n){var s=this.categoryToPosition(t.categories[e],i);return n&&(s=N(s,n.start,n.end)),this.positionToAngle(s)},r.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},r.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},r.prototype.getTooltipText=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return this.tooltipDataItem=e,this.tooltip.dataItem=e,this.tooltipText?this.tooltipText:this._adapterO?this._adapterO.apply("getTooltipText",e.category):e.category},r.prototype.positionToIndex=function(t){t=j(t,10),t<0&&(t=0),t>1&&(t=1);var e=this.startIndex,i=this.endIndex,a=i-e-this.startLocation-(1-this.endLocation);t+=1/a*this.startLocation;var n=null;if(this._axisBreaks){var s=this._axisBreaks;Ht(s.iterator(),function(o){var l=o.startPosition,d=o.endPosition,u=o.adjustedStartValue,p=o.adjustedEndValue;u=ht(u,e),p=tt(p,i);var f=o.breakSize;if(a-=(p-u)*(1-f),t>d)e+=(p-u)*(1-f);else if(!(t<l)){var c=(t-l)/(d-l);return n=u+Math.round(c*(p-u)),!1}return!0})}return x(n)||(n=Math.floor(t*a+e)),n>=this.dataItems.length&&(n=this.dataItems.length-1),n},r.prototype.positionToCategory=function(t){return this.getPositionLabel(t)},r.prototype.getPositionLabel=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return e.category},Object.defineProperty(r.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:!0,configurable:!0}),r.prototype.initRenderer=function(){h.prototype.initRenderer.call(this);var t=this.renderer;t.baseGrid.disabled=!0},Object.defineProperty(r.prototype,"frequency",{get:function(){return this._frequency},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(t){this.setPropertyValue("sortBySeries",t,!0)},enumerable:!0,configurable:!0}),r.prototype.processConfig=function(t){t&&A(t.sortBySeries)&&at(t.sortBySeries)&&(this.map.hasKey(t.sortBySeries)?t.sortBySeries=this.map.getKey(t.sortBySeries):(this.addDelayedMap("sortBySeries",t.sortBySeries),delete t.sortBySeries)),h.prototype.processConfig.call(this,t)},r}(Pr);T.registeredClasses.CategoryAxis=E;T.registeredClasses.CategoryAxisDataItem=Oi;var xe=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="XYSeriesDataItem",t.values.customValue={},t.values.valueX={stack:0},t.values.valueY={stack:0},t.values.openValueX={},t.values.openValueY={},t.values.dateX={},t.values.dateY={},t.values.openDateX={},t.values.openDateY={},t.setLocation("dateX",.5,0),t.setLocation("dateY",.5,0),t.setLocation("categoryX",.5,0),t.setLocation("categoryY",.5,0),t.applyTheme(),t}return Object.defineProperty(r.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(t){this.setValue("customValue",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(t){this.setDate("dateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(t){this.setDate("dateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(t){this.setCategory("categoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(t){this.setCategory("categoryY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(t){this.setValue("openValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(t){this.setValue("openValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(t){this.setDate("openDateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(t){this.setDate("openDateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(t){this.setCategory("openCategoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(t){this.setCategory("openCategoryY",t)},enumerable:!0,configurable:!0}),r.prototype.getMin=function(t,e,i){var a=this,n;return x(i)||(i=0),Z(t,function(s){var o;e?o=a.getWorkingValue(s):o=a.getValue(s),o+=i,(o<n||!x(n))&&(n=o)}),n},r.prototype.getMax=function(t,e,i){var a=this,n;return x(i)||(i=0),Z(t,function(s){var o;e?o=a.getWorkingValue(s):o=a.getValue(s),o+=i,(o>n||!x(n))&&(n=o)}),n},r}(xi),Mt=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.groupFields={},t._xAxis=new ot,t._yAxis=new ot,t._xValueFields=[],t._yValueFields=[],t._baseInterval={},t.dataGrouped=!1,t.usesShowFields=!1,t._dataSetChanged=!1,t._maxxX=1e5,t._maxxY=1e5,t._propertiesChanged=!1,t.outOfRange=!1,t.className="XYSeries",t.isMeasured=!1,t.groupFields.valueX="close",t.groupFields.valueY="close",t.groupFields.customValue="close",t.groupFields.openValueX="open",t.groupFields.openValueY="open",t.cursorTooltipEnabled=!0,t.cursorHoverEnabled=!0,t.excludeFromTotal=!1,t.mainContainer.mask=new lt,t.mainContainer.mask.setElement(t.paper.add("path")),t.stacked=!1,t.snapTooltip=!1,t._showBullets=!1,t.tooltip.pointerOrientation="horizontal",t.properties.stackToNegative=!0,t.hideTooltipWhileZooming=!0,t.setPropertyValue("maskBullets",!0),t.tooltip.events.on("hidden",function(){t.returnBulletDefaultState()},void 0,!1),t._disposers.push(t._xAxis),t._disposers.push(t._yAxis),t.observe(G,function(){t.inited&&(t._propertiesChanged=!0,t.legendDataItem&&(t.legendDataItem.childrenCreated=!1),t.chart&&t.chart.legend&&t.chart.legend.invalidateDataItems(),t.invalidate())},void 0,!1),t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y Series"))},r.prototype.createDataItem=function(){return new xe},r.prototype.resetExtremes=function(){this._tmin.clear(),this._tmax.clear(),this._smin.clear(),this._smax.clear()},r.prototype.dataChangeUpdate=function(){this.dataGrouped=!1,this._baseInterval={},this._currentDataSetId="",this.resetExtremes(),this.xAxis&&this.xAxis.seriesDataChangeUpdate(this),this.yAxis&&this.yAxis.seriesDataChangeUpdate(this)},r.prototype.validateData=function(){this._baseInterval={};var t=this.dataFields;if(t.valueYShow||t.openValueXShow||t.openValueXShow||t.openValueYShow?this.usesShowFields=!0:this.usesShowFields=!1,this.defineFields(),this.data.length>0&&this.dataChangeUpdate(),h.prototype.validateData.call(this),this.updateItemReaderText(),this.chart&&(!A(this.dataFields[this._xField])||!A(this.dataFields[this._yField])))throw Error('Data fields for series "'+(this.name?this.name:this.uid)+'" are not properly defined.');this.inited&&this.isHidden&&this.hide(0),this.dataGrouped=!1},r.prototype.processDataItem=function(t,e){try{h.prototype.processDataItem.call(this,t,e),this.xAxis.processSeriesDataItem(t,"X"),this.yAxis.processSeriesDataItem(t,"Y"),this.setInitialWorkingValues(t)}catch(i){this._chart&&this._chart.raiseCriticalError(i)}},r.prototype.updateDataItem=function(t){h.prototype.updateDataItem.call(this,t),this.xAxis.processSeriesDataItem(t,"X"),this.yAxis.processSeriesDataItem(t,"Y")},r.prototype.setInitialWorkingValues=function(t){},r.prototype.disposeData=function(){h.prototype.disposeData.call(this);var t=this.xAxis,e=this.yAxis;if(t){var i=this.dataItemsByAxis.getKey(t.uid);i&&i.clear(),t instanceof E&&this.clearCatAxis(t)}if(e){var a=this.dataItemsByAxis.getKey(e.uid);a&&a.clear(),e instanceof E&&this.clearCatAxis(e)}},r.prototype.clearCatAxis=function(t){var e=this.uid;t.dataItems.each(function(i){i.seriesDataItems[e]&&(i.seriesDataItems[e]=[])})},r.prototype.defineFields=function(){var t=this.xAxis,e=this.yAxis;if(t&&e){var i=t.axisFieldName,a=i+"X",n="open"+ce(i)+"X",s=e.axisFieldName,o=s+"Y",l="open"+ce(s)+"Y";this._xField=a,this._yField=o,this.dataFields[n]&&(this._xOpenField=n),this.dataFields[l]&&(this._yOpenField=l),!this.dataFields[l]&&this.baseAxis==e&&(this._yOpenField=o),!this.dataFields[n]&&this.baseAxis==t&&(this._xOpenField=a),this.stacked&&this.baseAxis==t&&(this._xOpenField=a),this.stacked&&this.baseAxis==e&&(this._yOpenField=o),t instanceof E&&e instanceof E&&(this._yOpenField||(this._yOpenField=o)),this._xValueFields=[],this._yValueFields=[],this.addValueField(t,this._xValueFields,this._xField),this.addValueField(t,this._xValueFields,this._xOpenField),this.addValueField(e,this._yValueFields,this._yField),this.addValueField(e,this._yValueFields,this._yOpenField)}},r.prototype.addValueField=function(t,e,i){t instanceof M&&A(this.dataFields[i])&&e.indexOf(i)==-1&&e.push(i)},r.prototype.setCategoryAxisField=function(t,e){A(this.dataFields[t])||(this.dataFields[t]=e.dataFields.category)},r.prototype.setDateAxisField=function(t,e){A(this.dataFields[t])||(this.dataFields[t]=e.dataFields.date)},r.prototype.afterDraw=function(){h.prototype.afterDraw.call(this),this.createMask()},r.prototype.createMask=function(){if(this.mainContainer.mask){var t=this.getMaskPath();O(this.axisRanges.iterator(),function(e){e.axisFill.fillPath&&(e.axisFill.validate(),t+=e.axisFill.fillPath)}),this.mainContainer.mask.path=t}},r.prototype.getMaskPath=function(){return this.xAxis&&this.yAxis?zt({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength}):""},r.prototype.getAxisField=function(t){if(t==this.xAxis)return this.xField;if(t==this.yAxis)return this.yField},r.prototype.validateDataItems=function(){var t=this.chart;t&&(this._maxxX=ht(1e5,t.plotContainer.maxWidth*2),this._maxxY=ht(1e5,t.plotContainer.maxHeight*2));var e=this.xAxis,i=this.yAxis;e&&i&&(e.updateAxisBySeries(),i.updateAxisBySeries()),h.prototype.validateDataItems.call(this),e&&i&&(e.postProcessSeriesDataItems(this),i.postProcessSeriesDataItems(this))},r.prototype.validateDataRange=function(){var t=this.xAxis,e=this.yAxis;t&&e&&(t.dataRangeInvalid&&t.validateDataRange(),e.dataRangeInvalid&&e.validateDataRange()),h.prototype.validateDataRange.call(this)},r.prototype.validate=function(){var t=this.xAxis,e=this.yAxis;if(t&&e){t.invalid&&t.validate(),e.invalid&&e.validate(),this.y=e.pixelY,this.x=t.pixelX,this._showBullets=!0;var i=this.minBulletDistance;x(i)&&this.baseAxis.axisLength/(this.endIndex-this.startIndex)<i&&(this._showBullets=!1)}if(this.updateTooltip(),!(t instanceof B&&t.groupData&&!this.dataGrouped||e instanceof B&&e.groupData&&!this.dataGrouped)){h.prototype.validate.call(this);var a=this.chart,n=this.maskBullets;a&&n&&a.className=="XYChart"&&((a.leftAxesContainer.layout=="vertical"||a.rightAxesContainer.layout=="vertical")&&(this.yAxis?this.bulletsContainer.mask=this.yAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0),(a.topAxesContainer.layout=="horizontal"||a.bottomAxesContainer.layout=="horizontal")&&(this.xAxis?this.bulletsContainer.mask=this.xAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0))}},Object.defineProperty(r.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var t=this.chart.xAxes.getIndex(0);if(!t)throw Error("There are no X axes on chart.");this.xAxis=t}return this._xAxis.get()}},set:function(t){this.setXAxis(t)},enumerable:!0,configurable:!0}),r.prototype.setXAxis=function(t){var e=this._xAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._xAxis.dispose(),e.series.removeValue(this)),this._xAxis.set(t,t.registerSeries(this)),this.dataItemsByAxis.setKey(t.uid,new Et),this.invalidateData())},Object.defineProperty(r.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var t=this.chart.yAxes.getIndex(0);if(!t)throw Error("There are no Y axes on chart.");this.yAxis=t}return this._yAxis.get()}},set:function(t){this.setYAxis(t)},enumerable:!0,configurable:!0}),r.prototype.setYAxis=function(t){var e=this._yAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._yAxis.dispose(),e.series.removeValue(this)),this._yAxis.set(t,t.registerSeries(this)),t.chart instanceof _t&&t.chart.handleYAxisSet(this),this.dataItemsByAxis.setKey(t.uid,new Et),this.invalidateData())},Object.defineProperty(r.prototype,"baseAxis",{get:function(){var t=this.xAxis,e=this.yAxis;return!this._baseAxis&&t&&e&&(e instanceof B&&(this._baseAxis=e),t instanceof B&&(this._baseAxis=t),e instanceof E&&(this._baseAxis=e),t instanceof E&&(this._baseAxis=t),this._baseAxis||(this._baseAxis=t)),this._baseAxis},set:function(t){this._baseAxis!=t&&(this._baseAxis=t,this.invalidate())},enumerable:!0,configurable:!0}),r.prototype.addData=function(t,e,i){h.prototype.addData.call(this,t,e,i);var a=this.scrollbarSeries;a&&(this.scrollbarSeries.addData(t,e,!0),this.scrollbarSeries._parseDataFrom=this._parseDataFrom)},r.prototype.setData=function(t){h.prototype.setData.call(this,t),this.scrollbarSeries&&this.scrollbarSeries.setData(t)},r.prototype.setDataSet=function(t){var e=h.prototype.setDataSet.call(this,t);if(e){this._dataSetChanged=!0;var i=this.dataItems;if(this.resetExtremes(),i&&i.length>0){var a=this.xAxis,n=this.yAxis;this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.appeared||this.processValues(!1),a instanceof B&&a==this.baseAxis&&(this._tmin.setKey(a.uid,i.getIndex(0).dateX.getTime()),this._tmax.setKey(a.uid,i.getIndex(i.length-1).dateX.getTime()),this.dispatch("extremeschanged")),n instanceof B&&n==this.baseAxis&&(this._tmin.setKey(n.uid,i.getIndex(0).dateY.getTime()),this._tmax.setKey(n.uid,i.getIndex(i.length-1).dateY.getTime()),this.dispatch("extremeschanged"))}}return e},r.prototype.processValues=function(t){h.prototype.processValues.call(this,t);var e=this.xAxis,i=this.yAxis;if(!(!e||!i)){var a=this.dataItems,n=1/0,s=-1/0,o=1/0,l=-1/0,d=this.startIndex,u=this.endIndex,p=d,f=u;t||(d=0,u=this.dataItems.length);for(var c=d;c<u;c++){var y=a.getIndex(c);this.getStackValue(y,t);var v=y.getValue("valueX","stack"),g=y.getValue("valueY","stack");t||(v=y.getValue("valueX","stackTrue"),g=y.getValue("valueY","stackTrue")),n=tt(y.getMin(this._xValueFields,t,v),n),o=tt(y.getMin(this._yValueFields,t,g),o),s=ht(y.getMax(this._xValueFields,t,v),s),l=ht(y.getMax(this._yValueFields,t,g),l),this.stacked&&(this.baseAxis==e&&(g<o&&(o=g),g>l&&(l=g)),this.baseAxis==i&&(v<n&&(n=v),v>s&&(s=v)))}e.processSeriesDataItems(),i.processSeriesDataItems();var m=e.uid,b=i.uid;if(this.xAxis instanceof M&&(n==1/0||s==-1/0)){this._smin.setKey(m,void 0),this._smax.setKey(m,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(this.yAxis instanceof M&&(o==1/0||l==-1/0)){this._smin.setKey(b,void 0),this._smax.setKey(b,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(!t&&(this._tmin.getKey(m)!=n||this._tmax.getKey(m)!=s||this._tmin.getKey(b)!=o||this._tmax.getKey(b)!=l)){this._tmin.setKey(m,n),this._tmax.setKey(m,s),this._tmin.setKey(b,o),this._tmax.setKey(b,l);var D=this.stackedSeries;D&&(D.isDisposed()?this.stackedSeries=void 0:D.processValues(!1)),this.dispatchImmediately("extremeschanged")}if(d!=p||u!=f){n=1/0,s=-1/0,o=1/0,l=-1/0;for(var c=p;c<f;c++){var y=a.getIndex(c);this.getStackValue(y,t);var v=y.getValue("valueX","stack"),g=y.getValue("valueY","stack");t||(v=y.getValue("valueX","stackTrue"),g=y.getValue("valueY","stackTrue")),n=tt(y.getMin(this._xValueFields,t,v),n),o=tt(y.getMin(this._yValueFields,t,g),o),s=ht(y.getMax(this._xValueFields,t,v),s),l=ht(y.getMax(this._yValueFields,t,g),l),this.stacked&&(this.baseAxis==e&&(g<o&&(o=g),g>l&&(l=g)),this.baseAxis==i&&(v<n&&(n=v),v>s&&(s=v)))}}if(this.xAxis instanceof M&&(n==1/0||s==-1/0)){this._smin.setKey(m,void 0),this._smax.setKey(m,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(this.yAxis instanceof M&&(o==1/0||l==-1/0)){this._smin.setKey(b,void 0),this._smax.setKey(b,void 0),this.dispatchImmediately("selectionextremeschanged");return}if((this._smin.getKey(m)!=n||this._smax.getKey(m)!=s||this._smin.getKey(b)!=o||this._smax.getKey(b)!=l)&&(this._smin.setKey(m,n),this._smax.setKey(m,s),this._smin.setKey(b,o),this._smax.setKey(b,l),this.appeared||this.start!=0||this.end!=1||this.dataItems!=this.mainDataSet)){var C=!1;if(i instanceof M&&!(i instanceof B)){var _=this._tmin.getKey(b);(!x(_)||(this.usesShowFields||this._dataSetChanged||e instanceof B&&e.groupData&&this.isShowing)&&o<_||this.stackedSeries&&!this.isHidden&&!t)&&(this._tmin.setKey(b,o),C=!0);var P=this._tmax.getKey(b);(!x(P)||(this.usesShowFields||this._dataSetChanged||e instanceof B&&e.groupData&&this.isShowing)&&l>P||this.stackedSeries&&!this.isHidden&&!t)&&(this._tmax.setKey(b,l),C=!0)}if(e instanceof M&&!(e instanceof B)){var _=this._tmin.getKey(m);(!x(_)||(this.usesShowFields||this._dataSetChanged||i instanceof B&&i.groupData&&this.isShowing)&&n<_||this.stackedSeries&&!this.isHidden&&!t)&&(this._tmin.setKey(m,n),C=!0);var P=this._tmax.getKey(m);(!x(P)||(this.usesShowFields||this._dataSetChanged||i instanceof B&&i.groupData&&this.isShowing)&&s>P||this.stackedSeries&&!this.isHidden&&!t)&&(this._tmax.setKey(m,s),C=!0)}C&&this.dispatchImmediately("extremeschanged"),this.start==0&&this.end==1&&(this._dataSetChanged=!1),this.dispatchImmediately("selectionextremeschanged")}!t&&this.stacked&&this.processValues(!0)}},r.prototype.hideTooltip=function(t){h.prototype.hideTooltip.call(this,t),this.returnBulletDefaultState(),this._prevTooltipDataItem=void 0},r.prototype.showTooltipAtPosition=function(t,e){var i;if(this.visible&&!this.isHiding&&!this.isShowing){var a=this._xAxis.get(),n=this._yAxis.get();a==this.baseAxis&&(i=a.getSeriesDataItem(this,a.toAxisPosition(t),this.snapTooltip)),n==this.baseAxis&&(i=n.getSeriesDataItem(this,n.toAxisPosition(e),this.snapTooltip));var s=this.showTooltipAtDataItem(i);if(s)return s;if(!this.tooltipText&&!this.tooltipHTML)return}this.hideTooltip()},r.prototype.getAdjustedXLocation=function(t,e,i){return t.locations[e]},r.prototype.getAdjustedYLocation=function(t,e,i){return t.locations[e]},r.prototype.showTooltipAtDataItem=function(t){var e,i,a=this.chart.cursor;if(a&&a.hideSeriesTooltipsOnSelection&&a.selection.visible&&a.downPoint){this.hideTooltip();return}if(this.returnBulletDefaultState(t),t&&t.visible){if(this.updateLegendValue(t),this.cursorTooltipEnabled){this.tooltipDataItem=t;var n=this.tooltipXField,s=this.tooltipYField;if(A(t[n])&&A(t[s])){var o=this.getPoint(t,n,s,this.getAdjustedXLocation(t,n),this.getAdjustedYLocation(t,s));if(o&&!(this.chart.className=="XYChart"&&(o.y<-1||o.y>this.yAxis.pixelHeight+1||o.x<-1||o.x>this.xAxis.pixelWidth+1))){if(this.tooltipX=o.x,this.tooltipY=o.y,this._prevTooltipDataItem!=t&&(this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem:t}),this._prevTooltipDataItem=t),this.cursorHoverEnabled)try{for(var l=ke(t.sprites),d=l.next();!d.done;d=l.next()){var u=d.value;!u.parent.visible||u.isHidden||u.__disabled||u.disabled||u.isHiding||(u.interactions.isRealHover||(u.dispatchImmediately("over"),u.interactions.isRealHover=!0),u.isHover=!0)}}catch(p){e={error:p}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}return this.showTooltip()?Bt({x:o.x,y:o.y},this):void 0}}}}else this.updateLegendValue(t,!0)},r.prototype.returnBulletDefaultState=function(t){var e,i;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=t)try{for(var a=ke(this._prevTooltipDataItem.sprites),n=a.next();!n.done;n=a.next()){var s=n.value;if(s.isDisposed())this._prevTooltipDataItem=void 0;else{var o=s.interactions.isRealHover;s.isHover=!1,o&&s.dispatchImmediately("out")}}}catch(l){e={error:l}}finally{try{n&&!n.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}},r.prototype.shouldCreateBullet=function(t,e){var i=e.xField;A(i)||(i=this.xField);var a=e.yField;if(A(a)||(a=this.yField),this.xAxis instanceof M&&!t.hasValue([i])||this.yAxis instanceof M&&!t.hasValue([a]))return!1;if(e.disabled){var n=e.propertyFields.disabled,s=t.dataContext;return!!(s&&s[n]===!1)}return!0},r.prototype.updateTooltip=function(){!this.hideTooltipWhileZooming&&this.tooltip&&!this.tooltip.isHidden&&!this.isHiding&&!this.isHidden&&this.tooltipDataItem&&this.showTooltipAtDataItem(this.tooltipDataItem)},r.prototype.positionBullet=function(t){h.prototype.positionBullet.call(this,t);var e=t.dataItem,i=t.xField;A(i)||(i=this.xField);var a=t.yField;A(a)||(a=this.yField);var n=this.xAxis,s=this.yAxis;if(n instanceof M&&!e.hasValue([i])||s instanceof M&&!e.hasValue([a]))t.visible=!1;else{var o=this.getBulletLocationX(t,i),l=this.getBulletLocationY(t,a),d=this.getPoint(e,i,a,o,l);if(d){var u=this.xOpenField,p=this.yOpenField,f=void 0,c=void 0;if(n instanceof B){x(o)||(o=0);var y=void 0,v=e.getWorkingValue(i);u?y=e.getWorkingValue(u):n==this.baseAxis&&(y=n.baseValue),x(y)||(y=v);var g=e.getValue("valueX","stack");if(y+=g,v+=g,y==v){var m=n.baseInterval,b=n.dateFormatter;y=J(new Date(y),m.timeUnit,m.count,b.firstDayOfWeek,b.utc,void 0,b.timezoneMinutes,b.timezone).getTime(),v=it(new Date(y),m.timeUnit,m.count,b.utc).getTime()}var D=void 0;n==this.baseAxis?D=y+(v-y)*o:D=y+(v-y)*(1-o),f=n.valueToPosition(D)}else if(n instanceof M){x(o)||(o=0);var y=void 0,v=e.getWorkingValue(i);u?y=e.getWorkingValue(u):y=n.baseValue;var g=e.getValue("valueX","stack");y+=g,v+=g;var D=y+(v-y)*(1-o);f=n.valueToPosition(D)}else if(n instanceof E){var C=this.getAdjustedXLocation(e,i,t.locationX),_=this.getAdjustedXLocation(e,u,t.locationX);f=n.categoryToPosition(e[i],C);var P=void 0;u&&(P=n.categoryToPosition(e[u],_)),x(P)||(P=1),f=P+(f-P)*o}if(s instanceof B){x(l)||(l=0);var y=void 0,v=e.getWorkingValue(a);p?y=e.getWorkingValue(p):s==this.baseAxis&&(y=s.baseValue),x(y)||(y=v);var g=e.getValue("valueY","stack");if(y+=g,v+=g,y==v){var m=s.baseInterval,b=s.dateFormatter;y=J(new Date(y),m.timeUnit,m.count,b.firstDayOfWeek,b.utc,void 0,b.timezoneMinutes,b.timezone).getTime(),v=it(new Date(y),m.timeUnit,m.count,b.utc).getTime()}var D=void 0;s==this.baseAxis?D=y+(v-y)*l:D=y+(v-y)*(1-l),c=s.valueToPosition(D)}else if(s instanceof M){x(l)||(l=0);var y=void 0,v=e.getWorkingValue(a);p?y=e.getWorkingValue(p):y=s.baseValue;var g=e.getValue("valueY","stack");y+=g,v+=g;var D=y+(v-y)*(1-l);c=s.valueToPosition(D)}else if(s instanceof E){c=s.categoryToPosition(e[a],l);var I=this.getAdjustedYLocation(e,a,t.locationY),F=this.getAdjustedYLocation(e,p,t.locationY);c=s.categoryToPosition(e[a],I);var z=void 0;p&&(z=s.categoryToPosition(e[p],F)),x(z)||(z=1),c=z+(c-z)*l}t.visible=!0,this.positionBulletReal(t,f,c)}else t.visible=!1}},r.prototype.positionBulletReal=function(t,e,i){t.x=this.xAxis.renderer.positionToPoint(e,i).x,t.y=this.yAxis.renderer.positionToPoint(i,e).y},r.prototype.getBulletLocationX=function(t,e){var i=t.locationX,a=t.dataItem;return x(i)||(i=a.workingLocations[e]),i},r.prototype.getBulletLocationY=function(t,e){var i=t.locationY,a=t.dataItem;return x(i)||(i=a.workingLocations[e]),i},r.prototype.updateStacking=function(){var t=this;this.invalidateDataItems(),this.chart&&this.chart.series.each(function(e){e.baseAxis==t.baseAxis&&(e.stackedSeries=void 0,e.invalidateDataItems(),e.invalidateProcessedData())})},Object.defineProperty(r.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(t){if(this.setPropertyValue("stacked",t,!0)){this.updateStacking();var e=this.xAxis,i=this.yAxis;if(!t){var a;e!=this.baseAxis&&e instanceof M&&(a=this.xField),i!=this.baseAxis&&i instanceof M&&(a=this.yField),a&&this.dataItems.each(function(n){n.setCalculatedValue(a,0,"stack"),n.setCalculatedValue(a,0,"stackTrue")})}}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),r.prototype.show=function(t){var e=this;this.isHidden&&(this.appeared&&this.xAxis instanceof B&&this.xAxis.groupData&&(this._tmin.setKey(this.yAxis.uid,void 0),this._tmax.setKey(this.yAxis.uid,void 0)),this.appeared&&this.yAxis instanceof B&&this.yAxis.groupData&&(this._tmin.setKey(this.xAxis.uid,void 0),this._tmax.setKey(this.xAxis.uid,void 0)));var i;this.xAxis instanceof M&&this.xAxis!=this.baseAxis&&(i=this._xValueFields),this.yAxis instanceof M&&this.yAxis!=this.baseAxis&&(i=this._yValueFields);var a=this.startIndex,n=this.endIndex,s=0,o=this.defaultState.transitionDuration;x(t)&&(o=t);var l;O(Jt(this.dataItems.iterator()),function(u){var p=u[0],f=u[1],c=o;(p<e.startIndex-10||p>e.endIndex+10)&&(c=0,s=0),e.sequencedInterpolation&&c>0&&(s=e.sequencedInterpolationDelay*p+o*(p-a)/(n-a)),l=f.show(c,s,i)}),this.dataSets.each(function(u,p){p!=e.dataItems&&p.each(function(f){f.events.disable(),f.show(0,0,i),f.events.enable()})}),this.mainDataSet!=this.dataItems&&this.mainDataSet.each(function(u){u.events.disable(),u.show(0,0,i),u.events.enable()});var d=h.prototype.show.call(this,t);return l&&!l.isFinished()&&(d=l),this.hidden&&(this.dispatchImmediately("selectionextremeschanged"),this.hidden=!1),d},r.prototype.hide=function(t){var e=this,i,a,n=this.xAxis;n instanceof M&&n!=this.baseAxis&&(i=this._xValueFields,this.stacked||n.minZoomed<n.baseValue&&n.maxZoomed>n.baseValue||this.stackedSeries?a=n.baseValue:a=n.min);var s=this.yAxis;s instanceof M&&s!=this.baseAxis&&(i=this._yValueFields,this.stacked||s.minZoomed<s.baseValue&&s.maxZoomed>s.baseValue||this.stackedSeries?a=s.baseValue:a=s.min);var o=this.startIndex,l=this.endIndex,d=this.hiddenState.transitionDuration;x(t)&&(d=t);var u=0,p;O(Jt(this.dataItems.iterator()),function(c){var y=c[0],v=c[1],g=d;(y<e.startIndex-10||y>e.endIndex+10)&&(g=0),g==0?v.hide(0,0,a,i):(e.sequencedInterpolation&&g>0&&(u=e.sequencedInterpolationDelay*y+d*(y-o)/(l-o)),p=v.hide(g,u,a,i))}),this.dataSets.each(function(c,y){y!=e.dataItems&&y.each(function(v){v.events.disable(),v.hide(0,0,a,i),v.events.enable()})}),this.mainDataSet!=this.dataItems&&this.mainDataSet.each(function(c){c.events.disable(),c.hide(0,0,a,i),c.events.enable()});var f=h.prototype.hide.call(this,d);return f&&!f.isFinished()&&f.delay(u),p&&!p.isFinished()&&(f=p),this.appeared&&this.dispatch("selectionextremeschanged"),this.validateDataElements(),f},r.prototype.handleDataItemWorkingValueChange=function(t,e){h.prototype.handleDataItemWorkingValueChange.call(this,t,e);var i=this.baseAxis.series;O(i.iterator(),function(a){(a.stacked||a.stackedSeries)&&a.invalidateProcessedData()})},r.prototype.getStackValue=function(t,e){var i=this,a=this.xAxis,n=this.yAxis;if(!(!this.stacked||!a||!n)){var s=this.chart,o=s.series.indexOf(this),l;if(a!=this.baseAxis&&a instanceof M&&(l=this.xField),n!=this.baseAxis&&n instanceof M&&(l=this.yField),!l)return;t.setCalculatedValue(l,0,"stack"),t.setCalculatedValue(l,0,"stackTrue"),Ht(s.series.range(0,o).backwards().iterator(),function(d){if(d.xAxis==a&&d.yAxis==n&&d.className==i.className){d.stackedSeries=i;var u=d.dataItems.getIndex(t.index);if(u&&u.hasValue(i._xValueFields)&&u.hasValue(i._yValueFields)){var p=t.getValue(l),f=void 0,c=u.getValue(l,"stackTrue");c==null&&(c=0);var y=u.getValue(l)+c;if(f=u.getWorkingValue(l)+u.getValue(l,"stack"),i.stackToNegative){if(p>=0&&y>=0||p<0&&y<0)return t.setCalculatedValue(l,f,"stack"),t.setCalculatedValue(l,y,"stackTrue"),!1;if(!d.stacked)return!1}else return t.setCalculatedValue(l,f,"stack"),t.setCalculatedValue(l,y,"stackTrue"),!1}else if(!d.stacked)return!1}return!0})}},Object.defineProperty(r.prototype,"stackToNegative",{get:function(){return this.getPropertyValue("stackToNegative")},set:function(t){this.setPropertyValue("stackToNegative",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xField",{get:function(){return this._xField},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"yField",{get:function(){return this._yField},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tooltipXField",{get:function(){return this._tooltipXField?this._tooltipXField:this._xField},set:function(t){this._tooltipXField=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tooltipYField",{get:function(){return this._tooltipYField?this._tooltipYField:this._yField},set:function(t){this._tooltipYField=t},enumerable:!0,configurable:!0}),r.prototype.min=function(t){return this._tmin.getKey(t.uid)},r.prototype.max=function(t){return this._tmax.getKey(t.uid)},r.prototype.selectionMin=function(t){var e=this._smin.getKey(t.uid);return e},r.prototype.selectionMax=function(t){var e=this._smax.getKey(t.uid);return e},r.prototype.processConfig=function(t){if(t){if(A(t.baseAxis)&&at(t.baseAxis)&&(this.map.hasKey(t.baseAxis)?t.baseAxis=this.map.getKey(t.baseAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+t.baseAxis+'" found for `baseAxis`.'),delete t.baseAxis)),A(t.xAxis)&&at(t.xAxis)&&(this.map.hasKey(t.xAxis)?t.xAxis=this.map.getKey(t.xAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+t.xAxis+'" found for `xAxis`.'),delete t.xAxis)),A(t.yAxis)&&at(t.yAxis)&&(this.map.hasKey(t.yAxis)?t.yAxis=this.map.getKey(t.yAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+t.yAxis+'" found for `yAxis`.'),delete t.yAxis)),A(t.axisRanges)&&At(t.axisRanges))for(var e=0,i=t.axisRanges.length;e<i;e++){var a=t.axisRanges[e];A(a.type)||(a.type="AxisDataItem"),A(a.axis)&&at(a.axis)&&this.map.hasKey(a.axis)?a.component=this.map.getKey(a.axis):A(a.component)&&at(a.component)&&this.map.hasKey(a.component)&&(a.component=this.map.getKey(a.component))}(!A(t.dataFields)||!gi(t.dataFields))&&this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}h.prototype.processConfig.call(this,t)},r.prototype.getPoint=function(t,e,i,a,n,s,o){if(this.xAxis&&this.yAxis){var l=this.xAxis.getX(t,e,a),d=this.yAxis.getY(t,i,n);return l=N(l,-this._maxxX,this._maxxX),d=N(d,-this._maxxY,this._maxxY),{x:l,y:d}}},r.prototype.updateItemReaderText=function(){if(!this._itemReaderTextChanged){var t="";Ft(this.dataFields,function(e,i){t+="{"+e+"} "}),this.itemReaderText=t,this._itemReaderTextChanged=!1}},Object.defineProperty(r.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(t){this.setPropertyValue("cursorHoverEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(t){this.setPropertyValue("excludeFromTotal",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t);var e=this.chart;e&&(t?this.bulletsContainer.parent=e.bulletsContainer:this.bulletsContainer.parent=e.axisBulletsContainer)},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){this.groupFields=Oe(t.groupFields,{}),h.prototype.copyFrom.call(this,t)},r.prototype.dispose=function(){this.scrollbarSeries&&this.scrollbarSeries.dispose(),h.prototype.dispose.call(this)},r}(mi);T.registeredClasses.XYSeries=Mt;T.registeredClasses.XYSeriesDataItem=xe;var Ot=function(h){S(r,h);function r(){var t=h.call(this)||this;t._chart=new ot,t.className="XYChartScrollbar";var e=new pt;t.padding(0,0,0,0);var i=t.createChild(_t);if(i.shouldClone=!1,i.margin(0,0,0,0),i.padding(0,0,0,0),i.interactionsEnabled=!1,t._scrollbarChart=i,!ye()){var a=new Dr;a.filterUnits="userSpaceOnUse",i.plotContainer.filters.push(a)}t._disposers.push(t._scrollbarChart),t.minHeight=60,t.minWidth=60;var n=t.createChild(lt);n.shouldClone=!1,n.setElement(t.paper.add("path")),n.fill=e.getFor("background"),n.fillOpacity=.8,n.interactionsEnabled=!1,n.isMeasured=!1,n.toBack(),t._unselectedOverlay=n,t._disposers.push(t._unselectedOverlay),i.toBack(),t.background.cornerRadius(0,0,0,0);var s=t.thumb.background;s.cornerRadius(0,0,0,0),s.fillOpacity=0,s.fill=e.getFor("background");var o=s.states.getKey("hover");o&&(o.properties.fillOpacity=.2);var l=s.states.getKey("down");return l&&(l.properties.fillOpacity=.4),t._disposers.push(t._chart),t.applyTheme(),t}return Object.defineProperty(r.prototype,"series",{get:function(){return this._series||(this._series=new Rt,this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,!1)),this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,!1))),this._series},enumerable:!0,configurable:!0}),r.prototype.handleSeriesAdded=function(t){var e=this,i=t.newValue;if(!(!i.xAxis||!i.yAxis)){var a=this.scrollbarChart;a.zoomOutButton.disabled=!0,this.chart=i.chart,a.dateFormatter.inputDateFormat=this.chart.dateFormatter.inputDateFormat,a.language.locale=this.chart.language.locale;var n=!0,s=!0;O(this.series.iterator(),function(b){b!=i&&(b.xAxis==i.xAxis&&e.scrollbarChart.xAxes.length>0&&(n=!1),b.yAxis==i.yAxis&&e.scrollbarChart.yAxes.length>0&&(s=!1))}),i.events.on("beforedisposed",function(){e.series.removeValue(i)});var o=new pt,l=i.clone();if(ye()&&(l.stroke=Ut("#aaaaaa"),l.fill=l.stroke,l.propertyFields.fill=void 0,l.propertyFields.stroke=void 0),i.scrollbarSeries=l,n){var d=i.xAxis.clone();a.xAxes.moveValue(d),d.title.disabled=!0,d.rangeChangeDuration=0;var u=d.renderer;u.ticks.template.disabled=!0,u.inside=!0,u.labels.template.inside=!0,u.line.strokeOpacity=0,u.minLabelPosition=.02,u.maxLabelPosition=.98,u.line.disabled=!0,u.axisFills.template.disabled=!0,u.baseGrid.disabled=!0,u.grid.template.strokeOpacity=.05,u.minWidth=void 0,u.minHeight=void 0,u.padding(0,0,0,0),u.chart=a,u.margin(0,0,0,0),d.width=R(100);var p=u.labels.template;if(p.fillOpacity=.5,d.maxZoomCount=void 0,d.minZoomCount=void 0,d instanceof B){var f=d,c=i.xAxis;f.groupCount=c.groupCount*5,f.min=void 0,f.max=void 0,this._disposers.push(f.clonedFrom.events.on("extremeschanged",function(){x(f.clonedFrom.minDefined)&&(f.min=f.clonedFrom.minDefined),x(f.clonedFrom.maxDefined)&&(f.max=f.clonedFrom.maxDefined)},void 0,!1))}else if(d instanceof M){var y=d;y.min=void 0,y.max=void 0,x(y.clonedFrom.minDefined)||(y.min=void 0),x(y.clonedFrom.maxDefined)||(y.max=void 0),this._disposers.push(y.clonedFrom.events.on("extremeschanged",function(){x(y.clonedFrom.minDefined)&&(y.min=y.clonedFrom.min),x(y.clonedFrom.maxDefined)&&(y.max=y.clonedFrom.max)},void 0,!1))}l.xAxis=d}else this.scrollbarChart.xAxes.each(function(b){b.clonedFrom==i.xAxis&&(l.xAxis=b)});if(s){var v=i.yAxis.clone();a.yAxes.moveValue(v),v.title.disabled=!0,v.rangeChangeDuration=0;var u=v.renderer;u.ticks.template.disabled=!0,u.inside=!0,u.labels.template.inside=!0,u.line.strokeOpacity=0,u.minLabelPosition=.02,u.maxLabelPosition=.98,u.line.disabled=!0,u.axisFills.template.disabled=!0,u.grid.template.stroke=o.getFor("background"),u.baseGrid.disabled=!0,u.grid.template.strokeOpacity=.05,u.minWidth=void 0,u.minHeight=void 0,u.chart=a,u.padding(0,0,0,0),u.margin(0,0,0,0),v.height=R(100);var p=u.labels.template;if(p.fillOpacity=.5,l.yAxis=v,v.maxZoomCount=void 0,v.minZoomCount=void 0,v instanceof B){var g=v;g.min=void 0,g.max=void 0;var c=i.yAxis;v.groupCount=c.groupCount*5,this._disposers.push(g.clonedFrom.events.on("extremeschanged",function(){x(g.clonedFrom.minDefined)&&(g.min=g.clonedFrom.minDefined),x(g.clonedFrom.maxDefined)&&(g.max=g.clonedFrom.maxDefined)}))}else if(v instanceof M){var m=v;m.min=void 0,m.max=void 0,x(m.clonedFrom.minDefined)||(m.min=void 0),x(m.clonedFrom.maxDefined)||(m.max=void 0),this._disposers.push(m.clonedFrom.events.on("extremeschanged",function(){x(m.clonedFrom.minDefined)&&(m.min=m.clonedFrom.minDefined),x(m.clonedFrom.maxDefined)&&(m.max=m.clonedFrom.maxDefined)}))}}else this.scrollbarChart.yAxes.each(function(b){b.clonedFrom==i.yAxis&&(l.yAxis=b)});l.rangeChangeDuration=0,l.interpolationDuration=0,l.defaultState.transitionDuration=0,l.showOnInit=!1,this._disposers.push(l.events.on("validated",this.zoomOutAxes,this,!1)),this._disposers.push(i.events.on("datavalidated",function(){l.data!=i.data&&(l.data=i.data)},void 0,!1)),l.defaultState.properties.visible=!0,a.series.push(l),this.updateByOrientation()}},r.prototype.updateByOrientation=function(){var t=this;this._scrollbarChart&&(O(this._scrollbarChart.xAxes.iterator(),function(e){var i=e.renderer;t.orientation=="vertical"?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=e.clonedFrom.renderer.minGridDistance)}),O(this._scrollbarChart.yAxes.iterator(),function(e){var i=e.renderer;t.orientation=="horizontal"?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=e.clonedFrom.renderer.minGridDistance)}))},r.prototype.handleSeriesRemoved=function(t){var e=t.oldValue,i=this.scrollbarChart;i.series.each(function(a){a&&a.clonedFrom==e&&i.series.removeValue(a)}),i.series.length==0&&(i.xAxes.clear(),i.yAxes.clear());try{e.events.off("validated",this.zoomOutAxes,this)}catch{}},Object.defineProperty(r.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.get()!==t&&(this._chart.set(t,t.events.on("datavalidated",this.handleDataChanged,this,!1)),this.handleDataChanged(),this._scrollbarChart.dataProvider=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:!0,configurable:!0}),r.prototype.handleDataChanged=function(){this.chart.data!=this.scrollbarChart.data?this.scrollbarChart.data=this.chart.data:this.scrollbarChart.invalidateRawData()},r.prototype.zoomOutAxes=function(){var t=this.scrollbarChart;O(t.xAxes.iterator(),function(e){e.zoom({start:0,end:1},!0,!0)}),O(t.yAxes.iterator(),function(e){e.zoom({start:0,end:1},!0,!0)})},r.prototype.updateThumb=function(t){if(t===void 0&&(t=!0),h.prototype.updateThumb.call(this,t),this._unselectedOverlay){var e=this.thumb,i=e.pixelX||0,a=e.pixelY||0,n=e.pixelWidth||0,s=e.pixelHeight||0,o="";this.orientation=="horizontal"?(o=zt({x:-1,y:0,width:i,height:s}),o+=zt({x:i+n,y:0,width:(this.pixelWidth||0)-i-n,height:s})):(o=zt({x:0,y:0,width:n,height:a}),o+=zt({x:0,y:a+s,width:n,height:(this.pixelHeight||0)-a-s})),this._unselectedOverlay.path=o}},r.prototype.processConfig=function(t){if(t&&A(t.series)&&At(t.series))for(var e=0,i=t.series.length;e<i;e++){var a=t.series[e];if(A(a)&&at(a))if(this.map.hasKey(a))t.series[e]=this.map.getKey(a);else throw Error("XYChartScrollbar error: Series with id `"+a+"` does not exist.")}h.prototype.processConfig.call(this,t)},r}(Sr);T.registeredClasses.XYChartScrollbar=Ot;var Ke=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="XYChartDataItem",t.applyTheme(),t}return r}(Ci),_t=function(h){S(r,h);function r(){var t=h.call(this)||this;t._axisRendererX=fe,t._axisRendererY=$t,t._seriesPoints=[],t.className="XYChart",t.maskBullets=!0,t.arrangeTooltips=!0;var e=t.chartContainer;e.layout="vertical",t.padding(15,15,15,15);var i=e.createChild(H);i.shouldClone=!1,i.layout="vertical",i.width=R(100),i.zIndex=1,t.topAxesContainer=i;var a=e.createChild(H);a.shouldClone=!1,a.layout="horizontal",a.width=R(100),a.height=R(100),a.zIndex=0,t.yAxesAndPlotContainer=a;var n=e.createChild(H);n.shouldClone=!1,n.width=R(100),n.layout="vertical",n.zIndex=1,t.bottomAxesContainer=n;var s=a.createChild(H);s.shouldClone=!1,s.layout="horizontal",s.height=R(100),s.contentAlign="right",s.events.on("transformed",t.updateXAxesMargins,t,!1),s.zIndex=1,t.leftAxesContainer=s;var o=a.createChild(H);o.shouldClone=!1,o.height=R(100),o.width=R(100),o.background.fillOpacity=0,t.plotContainer=o,t.mouseWheelBehavior="none",t._cursorContainer=o;var l=a.createChild(H);l.shouldClone=!1,l.layout="horizontal",l.height=R(100),l.zIndex=1,l.events.on("transformed",t.updateXAxesMargins,t,!1),t.rightAxesContainer=l,t.seriesContainer.parent=o,t.bulletsContainer.parent=o;var d=o.createChild(Or);d.shouldClone=!1,d.align="right",d.valign="top",d.zIndex=Number.MAX_SAFE_INTEGER,d.marginTop=5,d.marginRight=5,d.hide(0),t.zoomOutButton=d;var u=t.plotContainer.createChild(H);return u.shouldClone=!1,u.width=R(100),u.height=R(100),u.isMeasured=!1,u.zIndex=4,u.layout="none",t.axisBulletsContainer=u,t._bulletMask=t.plotContainer,t.events.on("beforedatavalidated",function(){t.series.each(function(p){p.dataGrouped=!1,p._baseInterval={}})},t,!1),t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),this.zoomOutButton.exportable=!1,A(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y chart"))},r.prototype.draw=function(){h.prototype.draw.call(this),this.seriesContainer.toFront(),this.bulletsContainer.toFront(),this.maskBullets&&(this.bulletsContainer.mask=this._bulletMask),this.updateSeriesLegend()},r.prototype.updatePlotElements=function(){O(this.series.iterator(),function(t){t.invalidate()})},r.prototype.validateData=function(){this._parseDataFrom==0&&(O(this.xAxes.iterator(),function(t){t.dataChangeUpdate()}),O(this.yAxes.iterator(),function(t){t.dataChangeUpdate()}),O(this.series.iterator(),function(t){t.dataChangeUpdate()})),h.prototype.validateData.call(this)},r.prototype.updateXAxesMargins=function(){var t=this.leftAxesContainer.measuredWidth,e=this.rightAxesContainer.measuredWidth,i=this.bottomAxesContainer;(i.paddingLeft!=t||i.paddingRight!=e)&&(i.paddingLeft=t,i.paddingRight=e);var a=this.topAxesContainer;(a.paddingLeft!=t||a.paddingRight!=e)&&(a.paddingLeft=t,a.paddingRight=e)},r.prototype.reinit=function(){h.prototype.reinit.call(this),this.series.each(function(t){t.appeared=!1})},r.prototype.handleXAxisChange=function(t){this.updateXAxis(t.target)},r.prototype.handleYAxisChange=function(t){this.updateYAxis(t.target)},r.prototype.processXAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererX,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,!1)),e.axisLetter="X",e.events.on("startendchanged",this.handleXAxisRangeChange,this,!1),e.dataProvider=this,this.updateXAxis(e.renderer),this.processAxis(e)},r.prototype.processYAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererY,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,!1)),e.axisLetter="Y",e.events.on("startendchanged",this.handleYAxisRangeChange,this,!1),e.dataProvider=this,this.updateYAxis(e.renderer),this.processAxis(e)},r.prototype.handleXAxisRangeChange=function(){var t=this.getCommonAxisRange(this.xAxes);this.scrollbarX&&this.zoomAxes(this.xAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarX,t)},r.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var t=!1;Ht(this.xAxes.iterator(),function(e){if(e.toggleZoomOutButton){if(e.maxZoomCount>0){var i=e.maxZoomFactor/e.maxZoomCount;if(j(e.end-e.start,3)<1/i)return t=!0,!1}else if(j(e.start,3)>0||j(e.end,3)<1)return t=!0,!1}return!0}),Ht(this.yAxes.iterator(),function(e){if(e.toggleZoomOutButton){if(e.maxZoomCount>0){var i=e.maxZoomFactor/e.maxZoomCount;if(j(e.end-e.start,3)<1/i)return t=!0,!1}else if(j(e.start,3)>0||j(e.end,3)<1)return t=!0,!1;return!0}}),this.seriesAppeared||(t=!1),t?this.zoomOutButton.show():this.zoomOutButton.hide()}},r.prototype.seriesAppeared=function(){var t=!1;return O(this.series.iterator(),function(e){if(!e.appeared)return t=!1,!1}),t},r.prototype.handleYAxisRangeChange=function(){var t=this.getCommonAxisRange(this.yAxes);this.scrollbarY&&this.zoomAxes(this.yAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarY,t)},r.prototype.updateScrollbar=function(t,e){t&&(t.skipRangeEvents(),t.start=e.start,t.end=e.end)},r.prototype.getCommonAxisRange=function(t){var e,i;return t.each(function(a){if(!(!a.zoomable||a instanceof M&&a.syncWithAxis)){var n=a.start,s=a.end;a.renderer.inversed&&(n=1-a.end,s=1-a.start),(!x(e)||n<e)&&(e=n),(!x(i)||s>i)&&(i=s)}}),{start:e,end:i}},r.prototype.updateXAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.topAxesContainer,e.toFront()):(e.parent=this.bottomAxesContainer,e.toBack()),e.renderer&&e.renderer.processRenderer()},r.prototype.updateYAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.rightAxesContainer,e.toBack()):(e.parent=this.leftAxesContainer,e.toFront()),e.renderer&&e.renderer.processRenderer()},r.prototype.processAxis=function(t){var e=this;t instanceof E&&this._dataUsers.moveValue(t);var i=t.renderer;i.gridContainer.parent=this.plotContainer,i.gridContainer.toBack(),i.breakContainer.parent=this.plotContainer,i.breakContainer.toFront(),i.breakContainer.zIndex=10,t.addDisposer(new wt(function(){e.dataUsers.removeValue(t)})),i.bulletsContainer.parent=this.axisBulletsContainer,this._disposers.push(t.events.on("positionchanged",function(){var a=Zt({x:0,y:0},t,e.axisBulletsContainer);t.renderer instanceof $t&&(i.bulletsContainer.y=a.y),t.renderer instanceof fe&&(i.bulletsContainer.x=a.x)},void 0,!1)),this.plotContainer.events.on("maxsizechanged",function(){e.inited&&(t.invalidateDataItems(),e.updateSeriesMasks())},t,!1)},r.prototype.updateSeriesMasks=function(){ye()&&this.series.each(function(t){var e=t.mainContainer.mask;t.mainContainer.mask=void 0,t.mainContainer.mask=e})},r.prototype.handleSeriesRemoved=function(t){var e=t.oldValue;e&&(e.xAxis&&(e.xAxis.series.removeValue(e),e.xAxis.invalidateProcessedData()),e.yAxis&&(e.yAxis.series.removeValue(e),e.yAxis.invalidateProcessedData()),this.series.each(function(i){i.resetExtremes()})),h.prototype.handleSeriesRemoved.call(this,t)},Object.defineProperty(r.prototype,"xAxes",{get:function(){return this._xAxes||(this._xAxes=new Rt,this._xAxes.events.on("inserted",this.processXAxis,this,!1),this._xAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new dt(this._xAxes,!1))),this._xAxes},enumerable:!0,configurable:!0}),r.prototype.handleAxisRemoval=function(t){var e=t.oldValue;this.dataUsers.removeValue(e),e.autoDispose&&e.dispose()},Object.defineProperty(r.prototype,"yAxes",{get:function(){return this._yAxes||(this._yAxes=new Rt,this._yAxes.events.on("inserted",this.processYAxis,this,!1),this._yAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new dt(this._yAxes,!1))),this._yAxes},enumerable:!0,configurable:!0}),r.prototype.handleSeriesAdded=function(t){try{h.prototype.handleSeriesAdded.call(this,t);var e=t.newValue;(this.xAxes.length==0||this.yAxes.length==0)&&(T.removeFromInvalidComponents(e),e.dataInvalid=!1),Qt(e.xAxis),Qt(e.yAxis),e.maskBullets=e.maskBullets,e.fill==null&&(this.patterns?(A(e.stroke)||(e.stroke=this.colors.next()),e.fill=this.patterns.next(),A(e.fillOpacity)&&(e.fill.backgroundOpacity=e.fillOpacity),e.stroke instanceof te&&(e.fill.stroke=e.stroke,e.fill.fill=e.stroke)):e.fill=this.colors.next()),A(e.stroke)||(e.stroke=e.fill)}catch(i){this.raiseCriticalError(i)}},Object.defineProperty(r.prototype,"cursor",{get:function(){return this._cursor},set:function(t){this._cursor!=t&&(this._cursor&&this.removeDispose(this._cursor),this._cursor=t,t&&(this._disposers.push(t),t.chart=this,t.shouldClone=!1,t.parent=this._cursorContainer,t.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,!1),t.events.on("zoomstarted",this.handleCursorZoomStart,this,!1),t.events.on("zoomended",this.handleCursorZoomEnd,this,!1),t.events.on("panstarted",this.handleCursorPanStart,this,!1),t.events.on("panning",this.handleCursorPanning,this,!1),t.events.on("panended",this.handleCursorPanEnd,this,!1),t.events.on("behaviorcanceled",this.handleCursorCanceled,this,!1),t.events.on("hidden",this.handleHideCursor,this,!1),t.zIndex=Number.MAX_SAFE_INTEGER-1,this.tapToActivate&&this.setTapToActivate(this.tapToActivate)))},enumerable:!0,configurable:!0}),r.prototype.handleCursorPositionChange=function(){var t=this.cursor;if(t.visible&&!t.isHiding){var e=this.cursor.xPosition,i=this.cursor.yPosition;this.showSeriesTooltip({x:e,y:i});var a=[],n=t.snapToSeries;if(n&&!t.downPoint){n instanceof Mt&&(n=[n]);var s=[];Z(n,function(l){if(!l.isHidden&&!l.isHiding){var d=l.xAxis,u=l.yAxis;d instanceof M&&!(d instanceof B)&&u instanceof M&&!(u instanceof B)?(l.dataItems.each(function(p){s.push(p)}),de(a,l.yAxis),de(a,l.xAxis)):(l.baseAxis==l.xAxis&&(de(a,l.yAxis),s.push(d.getSeriesDataItem(l,d.toAxisPosition(e),!0))),l.baseAxis==l.yAxis&&(de(a,l.xAxis),s.push(u.getSeriesDataItem(l,u.toAxisPosition(i),!0))))}});var o=this.getClosest(s,e,i);o&&(this.series.each(function(l){var d=o.component;l!=d&&(l.hideTooltip(),l.xAxis!=d.xAxis&&(l.xAxis.hideTooltip(),a.push(l.xAxis)),l.yAxis!=d.yAxis&&(l.yAxis.hideTooltip(),a.push(l.yAxis)))}),o.component.showTooltipAtDataItem(o),t.handleSnap(o.component))}this._seriesPoints=[],this._cursorXPosition!=e&&this.showAxisTooltip(this.xAxes,e,a),this._cursorYPosition!=i&&this.showAxisTooltip(this.yAxes,i,a),this.arrangeTooltips&&this.sortSeriesTooltips(this._seriesPoints),this.legend&&this.legend.afterDraw()}},r.prototype.getClosest=function(t,e,i){var a=1/0,n;return _r(t,function(s){if(s){var o=s.component.xAxis,l=s.component.yAxis,d=o.positionToCoordinate(o.toGlobalPosition(o.toAxisPosition(e))),u=l.positionToCoordinate(l.toGlobalPosition(l.toAxisPosition(i))),p=s.component.xField,f=s.component.yField;if(o instanceof M&&!x(s.getValue(p))||l instanceof M&&!x(s.getValue(f)))return!0;var c=o.positionToCoordinate(o.toGlobalPosition(o.getPositionX(s,p,s.locations[p],"valueX"))),y=l.positionToCoordinate(l.toGlobalPosition(l.getPositionY(s,f,s.locations[f],"valueY"))),v=Math.sqrt(Math.pow(d-c,2)+Math.pow(u-y,2));return v<a&&(a=v,n=s),!0}}),n},r.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes),this.hideObjectTooltip(this.yAxes),this.hideObjectTooltip(this.series),this._cursorXPosition=void 0,this._cursorYPosition=void 0,this.updateSeriesLegend()},r.prototype.updateSeriesLegend=function(){O(this.series.iterator(),function(t){t.updateLegendValue()})},r.prototype.hideObjectTooltip=function(t){O(t.iterator(),function(e){e.cursorTooltipEnabled&&e.hideTooltip(0)})},r.prototype.showSeriesTooltip=function(t){var e=this;if(!t){this.series.each(function(a){a.hideTooltip()});return}var i=[];this.series.each(function(a){if(!(a.xAxis instanceof B&&a.xAxis.snapTooltip||a.yAxis instanceof B&&a.yAxis.snapTooltip)){var n=a.showTooltipAtPosition(t.x,t.y);n&&(a.tooltip.setBounds(Tr({x:0,y:0,width:e.pixelWidth,height:e.pixelHeight},e)),i.push({series:a,point:n}))}}),this.arrangeTooltips&&this.sortSeriesTooltips(i)},r.prototype.sortSeriesTooltips=function(t){if(t.length>0){var e=this.cursor;if(e&&x(e.maxTooltipDistance)){var i=Bt({x:e.point.x,y:e.point.y},e),a,n,s=1/0;Z(t,function(X){var w=X.series,ft=X.point;if(ft){var Pt={x:ft.x,y:ft.y},gt=Math.abs(U(Pt,i));gt<s&&(n=Pt,s=gt,a=w)}});var o=[];a&&(Z(t,function(X){if(Math.abs(U(X.point,n))<=Math.abs(e.maxTooltipDistance))o.push({series:X.series,point:X.point});else{var w=X.series.tooltipDataItem;w&&Z(w.sprites,function(ft){ft.isHover=!1,ft.handleOutReal()}),X.series.hideTooltip(0)}}),e.maxTooltipDistance<0&&(o.length>0&&Z(o,function(X){a!=X.series&&X.series.hideTooltip(0)}),o=[{series:a,point:n}])),t=o}var l=Bt({x:-.5,y:-.5},this.plotContainer),d=Bt({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer),u=0,p=[];Z(t,function(X){var w=X.point;w&&Fr(w,{x:l.x,y:l.y,width:d.x-l.x,height:d.y-l.y})&&(p.push({point:w,series:X.series}),u+=w.y)}),t=p;var f=this.series.getIndex(0),c=!1;f&&f.yAxis&&f.yAxis.renderer.inversed&&(c=!0),c?t.sort(function(X,w){return ee(X.point.y,w.point.y)}):(t.sort(function(X,w){return ee(w.point.y,X.point.y)}),t.reverse());var y=u/t.length,v=Vr({x:0,y:0},this.svgContainer.SVGContainer).y;if(t.length>0){var g=l.y,m=d.y;kr({x:0,y:g},this);var b=!1;if(y>g+(m-g)/2)for(var D=m,C=t.length-1;C>=0;C--){var _=t[C].series,P=_.tooltip,I=t[C].point.y;if(P.setBounds({x:0,y:-v,width:this.pixelWidth,height:D+v}),P.invalid&&P.validate(),P.toBack(),D=Bt({x:0,y:P.label.pixelY-P.pixelY+I-P.pixelMarginTop},P).y,D<-v){b=!0;break}}if(y<=g+(m-g)/2||b)for(var F=g,C=0,z=t.length;C<z;C++){var _=t[C].series,I=t[C].point.y,P=_.tooltip;P.setBounds({x:0,y:F,width:this.pixelWidth,height:m}),P.invalid&&P.validate(),P.toBack(),F=Bt({x:0,y:P.label.pixelY+P.label.measuredHeight-P.pixelY+I+P.pixelMarginBottom},P).y}}}},r.prototype.showAxisTooltip=function(t,e,i){var a=this;O(t.iterator(),function(n){(!i||i.indexOf(n)==-1)&&(a.dataItems.length>0||n.dataItems.length>0)&&n.showTooltipAtPosition(e)})},r.prototype.getUpdatedRange=function(t,e){if(t){var i,a,n=t.renderer.inversed;n?(Gt(e),i=1-t.end,a=1-t.start):(i=t.start,a=t.end);var s=a-i;return{start:i+e.start*s,end:i+e.end*s}}},r.prototype.handleCursorZoomEnd=function(t){var e=this.cursor,i=e.behavior;if(i=="zoomX"||i=="zoomXY"){var a=e.xRange;a&&this.xAxes.length>0&&(a=this.getUpdatedRange(this.xAxes.getIndex(0),a),a.priority="start",this.zoomAxes(this.xAxes,a))}if(i=="zoomY"||i=="zoomXY"){var n=e.yRange;n&&this.yAxes.length>0&&(n=this.getUpdatedRange(this.yAxes.getIndex(0),n),n.priority="start",this.zoomAxes(this.yAxes,n))}this.handleHideCursor()},r.prototype.handleCursorPanStart=function(t){var e=this.xAxes.getIndex(0);e&&(this._panStartXRange={start:e.start,end:e.end},e.renderer.inversed&&(this._panStartXRange=Gt(this._panStartXRange)));var i=this.yAxes.getIndex(0);i&&(this._panStartYRange={start:i.start,end:i.end},i.renderer.inversed&&(this._panStartYRange=Gt(this._panStartYRange)))},r.prototype.handleCursorPanEnd=function(t){var e=this.cursor,i=e.behavior;if(this._panEndXRange&&(i=="panX"||i=="panXY")){var a=this._panEndXRange,n=this._panStartXRange,s=0;a.start<0&&(s=a.start),n.end>1?a.end>n.end&&(s=a.end-n.end):a.end>1&&(s=a.end-1),this.zoomAxes(this.xAxes,{start:a.start-s,end:a.end-s},!1,e.snapOnPan),this._panEndXRange=void 0,this._panStartXRange=void 0}if(this._panEndYRange&&(i=="panY"||i=="panXY")){var a=this._panEndYRange,s=0;a.start<0&&(s=a.start),a.end>1&&(s=a.end-1),this.zoomAxes(this.yAxes,{start:a.start-s,end:a.end-s},!1,e.snapOnPan),this._panEndYRange=void 0,this._panStartYRange=void 0}},r.prototype.handleCursorCanceled=function(){this._panEndXRange=void 0,this._panStartXRange=void 0},r.prototype.handleCursorPanning=function(t){var e=this.cursor,i=e.behavior,a=e.maxPanOut;if(this._panStartXRange&&(i=="panX"||i=="panXY")){var n=this._panStartXRange,s=e.xRange,o=this.getCommonAxisRange(this.xAxes),l=n.end-n.start,d=s.start*(o.end-o.start),u=Math.max(-a,d+n.start),p=Math.min(d+n.end,1+a);u<=0&&(p=u+l),p>=1&&(u=p-l);var f={start:u,end:p};this._panEndXRange=f,this.zoomAxes(this.xAxes,f,!1,!1,e.maxPanOut)}if(this._panStartYRange&&(i=="panY"||i=="panXY")){var n=this._panStartYRange,s=e.yRange,o=this.getCommonAxisRange(this.yAxes),l=n.end-n.start,d=s.start*(o.end-o.start),u=Math.max(-a,d+n.start),p=Math.min(d+n.end,1+a);u<=0&&(p=u+l),p>=1&&(u=p-l);var f={start:u,end:p};this._panEndYRange=f,this.zoomAxes(this.yAxes,f,!1,!1,e.maxPanOut)}this.handleHideCursor()},r.prototype.handleYAxisSet=function(t){},r.prototype.handleCursorZoomStart=function(t){},Object.defineProperty(r.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(t){var e=this;this._scrollbarX&&this.removeDispose(this._scrollbarX),this._scrollbarX=t,t&&(this._disposers.push(t),t.parent=this.topAxesContainer,t.shouldClone=!1,t.startGrip.exportable=!1,t.endGrip.exportable=!1,t.toBack(),t.orientation="horizontal",t.events.on("rangechanged",this.handleXScrollbarChange,this,!1),this.events.on("datavalidated",function(){return t.updateThumb(!1)},this,!1),t.adapter.add("positionValue",function(i){var a=e.xAxes.getIndex(0);return a&&(i.value=a.getPositionLabel(a.renderer.inversed?1-i.position:i.position)),i}),t.adapter.add("positionValueDirection",function(i){var a=e.xAxes.getIndex(0);return a&&(i.flipped=a.renderer.inversed),i}))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(t){var e=this;this._scrollbarY&&this.removeDispose(this._scrollbarY),this._scrollbarY=t,t&&(this._disposers.push(t),t.parent=this.rightAxesContainer,t.startGrip.exportable=!1,t.shouldClone=!1,t.endGrip.exportable=!1,t.toFront(),t.orientation="vertical",t.events.on("rangechanged",this.handleYScrollbarChange,this,!1),this.events.on("datavalidated",function(){return t.updateThumb(!1)},this,!1),t.adapter.add("positionValue",function(i){var a=e.yAxes.getIndex(0);return a&&(i.value=a.getPositionLabel(a.renderer.inversed?i.position:1-i.position)),i}),t.adapter.add("positionValueDirection",function(i){var a=e.yAxes.getIndex(0);return a&&(i.flipped=!a.renderer.inversed),i}))},enumerable:!0,configurable:!0}),r.prototype.handleXScrollbarChange=function(t){if(this.inited){var e=t.target,i=e.range;i.start==0&&(i.priority="start"),i.end==1&&(i.priority="end"),i=this.zoomAxes(this.xAxes,i),e.fixRange(i)}},r.prototype.handleYScrollbarChange=function(t){if(this.inited){var e=t.target,i=e.range;i.end==1&&(i.priority="end"),i.start==0&&(i.priority="start"),i=this.zoomAxes(this.yAxes,i),e.fixRange(i)}},r.prototype.zoomAxes=function(t,e,i,a,n,s){var o={start:0,end:1};this.showSeriesTooltip();var l=e;return this.dataInvalid||O(t.iterator(),function(d){var u=d.maxZoomFactor;if(x(d.minZoomCount)&&(u=u/d.minZoomCount),!(s&&1/(e.end-e.start)>=u)){if(d.zoomable){if(d.renderer.inversed?e=Gt(l):e=l,d.hideTooltip(0),a)if(d instanceof E){var p=d.getCellEndPosition(0)-d.getCellStartPosition(0);e.start=d.roundPosition(e.start+p/2-d.startLocation*p,d.startLocation),e.end=d.roundPosition(e.end-p/2+(1-d.endLocation)*p,d.endLocation)}else{var f=1e-4;e.start=d.roundPosition(e.start+f,0,d.startLocation),e.end=d.roundPosition(e.end+f,0,d.endLocation)}var c=d.zoom(e,i,i,n);d.renderer.inversed&&(c=Gt(c)),o=c}}}),o},Object.defineProperty(r.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)&&this.bulletsContainer&&(t?this.bulletsContainer.mask=this._bulletMask:this.bulletsContainer.mask=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(t){this.setPropertyValue("arrangeTooltips",t,!0)},enumerable:!0,configurable:!0}),r.prototype.handleWheel=function(t){var e=this.plotContainer,i=oi(t.point,this.htmlContainer,this.svgContainer.cssScale),a=St(i,e),n=t.shift.y;this.handleWheelReal(n,this.mouseWheelBehavior,a)},r.prototype.handleHorizontalWheel=function(t){var e=this.plotContainer,i=oi(t.point,this.htmlContainer,this.svgContainer.cssScale),a=St(i,e);this.handleWheelReal(t.shift.x,this.horizontalMouseWheelBehavior,a)},r.prototype.handleWheelReal=function(t,e,i){if(t!=0){var a=this.plotContainer,n=this.getCommonAxisRange(this.xAxes),s=this.getCommonAxisRange(this.yAxes),o=.1,l=0;if(e=="panX"||e=="panXY"){var d=this.xAxes.getIndex(0),u=!1,p=o;d instanceof E&&(p=.5/((n.end-n.start)*d.dataItems.length),u=!0),o=Math.max(.2,p);var f=n.end-n.start,c=Math.max(-l,n.start+o*t/100*(n.end-n.start)),y=Math.min(n.end+o*t/100*(n.end-n.start),1+l);c<=0&&(y=c+f),y>=1&&(c=y-f),this.zoomAxes(this.xAxes,{start:c,end:y},void 0,u)}if(e=="panY"||e=="panXY"){var v=this.yAxes.getIndex(0),p=o,u=!1;v instanceof E&&(p=.5/((n.end-n.start)*v.dataItems.length),u=!0),o=Math.max(.2,p),t*=-1;var g=s.end-s.start,m=Math.max(-l,s.start+o*t/100*(s.end-s.start)),b=Math.min(s.end+o*t/100*(s.end-s.start),1+l);m<=0&&(b=m+g),b>=1&&(m=b-g),this.zoomAxes(this.yAxes,{start:m,end:b},void 0,u)}if(e=="zoomX"||e=="zoomXY"){var D=i.x/a.maxWidth,C=this.xAxes.getIndex(0).toAxisPosition(D),c=Math.max(-l,n.start-o*(n.end-n.start)*t/100*D);c=Math.min(c,C);var y=Math.min(n.end+o*(n.end-n.start)*t/100*(1-D),1+l);y=Math.max(y,C),this.zoomAxes(this.xAxes,{start:c,end:y},void 0)}if(e=="zoomY"||e=="zoomXY"){var _=i.y/a.maxHeight,P=this.yAxes.getIndex(0).toAxisPosition(_),m=Math.max(-l,s.start-o*(s.end-s.start)*t/100*(1-_));m=Math.min(m,P);var b=Math.min(s.end+o*t/100*_*(s.end-s.start),1+l);b=Math.max(b,P),this.zoomAxes(this.yAxes,{start:m,end:b},void 0)}}},Object.defineProperty(r.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(t){this.setPropertyValue("mouseWheelBehavior",t)&&(t!="none"?(this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):this._mouseWheelDisposer&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(t){this.setPropertyValue("horizontalMouseWheelBehavior",t)&&(t!="none"?(this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,!1),this._disposers.push(this._mouseWheelDisposer2)):this._mouseWheelDisposer2&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer2.dispose()))},enumerable:!0,configurable:!0}),r.prototype.dataSourceDateFields=function(t){var e=this;return t=h.prototype.dataSourceDateFields.call(this,t),O(this.series.iterator(),function(i){t=e.populateDataSourceFields(t,i.dataFields,["dateX","dateY","openDateX","openDateY"])}),t},r.prototype.dataSourceNumberFields=function(t){var e=this;return t=h.prototype.dataSourceDateFields.call(this,t),O(this.series.iterator(),function(i){t=e.populateDataSourceFields(t,i.dataFields,["valueX","valueY","openValueX","openValueY"])}),t},r.prototype.processConfig=function(t){if(t){var e=[],i=[];if(A(t.xAxes)&&At(t.xAxes))for(var a=0,n=t.xAxes.length;a<n;a++)if(t.xAxes[a].type){if(A(t.xAxes[a].axisRanges)){for(var s=0,o=t.xAxes[a].axisRanges.length;s<o;s++){var l=t.xAxes[a].axisRanges[s];A(l.date)&&at(l.date)&&(l.date=this.dateFormatter.parse(l.date)),A(l.endDate)&&at(l.endDate)&&(l.endDate=this.dateFormatter.parse(l.endDate))}e.push({axisRanges:t.xAxes[a].axisRanges,index:a}),delete t.xAxes[a].axisRanges}}else throw Error("[XYChart error] No type set for xAxes["+a+"].");if(A(t.yAxes)&&At(t.yAxes))for(var a=0,n=t.yAxes.length;a<n;a++)if(t.yAxes[a].type){if(A(t.yAxes[a].axisRanges)){for(var s=0,d=t.yAxes[a].axisRanges.length;s<d;s++){var l=t.yAxes[a].axisRanges[s];A(l.date)&&at(l.date)&&(l.date=this.dateFormatter.parse(l.date)),A(l.endDate)&&at(l.endDate)&&(l.endDate=this.dateFormatter.parse(l.endDate))}i.push({axisRanges:t.yAxes[a].axisRanges,index:a}),delete t.yAxes[a].axisRanges}}else throw Error("[XYChart error] No type set for yAxes["+a+"].");if(A(t.series)&&At(t.series))for(var a=0,n=t.series.length;a<n;a++)t.series[a].type=t.series[a].type||"LineSeries";if(A(t.cursor)&&!A(t.cursor.type)&&(t.cursor.type="XYCursor"),A(t.scrollbarX)&&!A(t.scrollbarX.type)&&(t.scrollbarX.type="Scrollbar"),A(t.scrollbarY)&&!A(t.scrollbarY.type)&&(t.scrollbarY.type="Scrollbar"),h.prototype.processConfig.call(this,t),i.length)for(var a=0,n=i.length;a<n;a++)this.yAxes.getIndex(i[a].index).config={axisRanges:i[a].axisRanges};if(e.length)for(var a=0,n=e.length;a<n;a++)this.xAxes.getIndex(e[a].index).config={axisRanges:e[a].axisRanges}}},r.prototype.configOrder=function(t,e){return t==e?0:t=="scrollbarX"?1:e=="scrollbarX"?-1:t=="scrollbarY"?1:e=="scrollbarY"?-1:t=="cursor"?1:e=="cursor"?-1:t=="series"?1:e=="series"?-1:h.prototype.configOrder.call(this,t,e)},r.prototype.createSeries=function(){return new Mt},Object.defineProperty(r.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(t){var e=this;this._zoomOutButton=t,t&&t.events.on("hit",function(){e.zoomAxes(e.xAxes,{start:0,end:1}),e.zoomAxes(e.yAxes,{start:0,end:1})},void 0,!1)},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){var e=this;t.xAxes.each(function(i){var a=e.xAxes.push(i.clone());a.chart=e,a.renderer.chart=e}),t.yAxes.each(function(i){var a=e.yAxes.push(i.clone());a.renderer.chart=e,a.chart=e}),h.prototype.copyFrom.call(this,t),t.cursor&&(this.cursor=t.cursor.clone()),t.scrollbarX&&(this.scrollbarX=t.scrollbarX.clone()),t.scrollbarY&&(this.scrollbarY=t.scrollbarY.clone())},r.prototype.disposeData=function(){h.prototype.disposeData.call(this);var t=this.scrollbarX;t&&t instanceof Ot&&t.scrollbarChart.disposeData();var e=this.scrollbarY;e&&e instanceof Ot&&e.scrollbarChart.disposeData(),this.xAxes.each(function(i){i instanceof E&&i.disposeData()}),this.yAxes.each(function(i){i instanceof E&&i.disposeData()})},r.prototype.addData=function(t,e){this.scrollbarX instanceof Ot&&this.addScrollbarData(this.scrollbarX,e),this.scrollbarY instanceof Ot&&this.addScrollbarData(this.scrollbarY,e),h.prototype.addData.call(this,t,e)},r.prototype.addScrollbarData=function(t,e){var i=t.scrollbarChart;i._parseDataFrom=i.data.length,i.invalidateData()},r.prototype.removeScrollbarData=function(t,e){var i=t.scrollbarChart;if(x(e)){for(;e>0;){var a=this.dataItems.getIndex(0);a&&i.dataItems.remove(a),i.dataUsers.each(function(n){var s=n.dataItems.getIndex(0);s&&n.dataItems.remove(s)}),i._parseDataFrom--,e--}i.invalidateData()}},r.prototype.removeData=function(t){this.scrollbarX instanceof Ot&&this.removeScrollbarData(this.scrollbarX,t),this.scrollbarY instanceof Ot&&this.removeScrollbarData(this.scrollbarY,t),h.prototype.removeData.call(this,t)},r.prototype.setTapToActivate=function(t){h.prototype.setTapToActivate.call(this,t),this.cursor&&(this.cursor.interactions.isTouchProtected=t,this.plotContainer.interactions.isTouchProtected=t)},r.prototype.handleTapToActivate=function(){h.prototype.handleTapToActivate.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!1,this.plotContainer.interactions.isTouchProtected=!1)},r.prototype.handleTapToActivateDeactivation=function(){h.prototype.handleTapToActivateDeactivation.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!0,this.plotContainer.interactions.isTouchProtected=!0)},r}(bi);T.registeredClasses.XYChart=_t;je.push({relevant:We.maybeXS,state:function(h,r){if(h instanceof _t&&h.scrollbarX){var t=h.states.create(r),e=h.scrollbarX.states.create(r);return e.properties.disabled=!0,t}return null}});je.push({relevant:We.maybeXS,state:function(h,r){if(h instanceof _t&&h.scrollbarY){var t=h.states.create(r),e=h.scrollbarY.states.create(r);return e.properties.disabled=!0,t}return null}});var Ge=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="LineSeriesSegment",t.isMeasured=!1,t.interactionsEnabled=!1,t.layout="none";var e=t.createChild(lt);t.fillSprite=e,e.shouldClone=!1,e.setElement(t.paper.add("path")),e.isMeasured=!1,t._disposers.push(e);var i=t.createChild(lt);return t.strokeSprite=i,i.shouldClone=!1,i.fill=Ut(),i.setElement(t.paper.add("path")),i.isMeasured=!1,t._disposers.push(i),t}return r.prototype.drawSegment=function(t,e,i,a){if(!this.disabled)if(t.length>0&&e.length>0&&x(t[0].x)&&x(t[0].y)){var n=W({x:t[0].x-.2,y:t[0].y-.2})+W(t[0]),s=this.series;s.smoothing=="bezier"?n+=new ie(i,a).smooth(t):s.smoothing=="monotoneX"?n+=new li({closed:!1}).smooth(t):s.smoothing=="monotoneY"&&(n+=new hi({closed:!1}).smooth(t)),this.strokeOpacity==0||this.strokeSprite.strokeOpacity==0||(this.strokeSprite.path=n),(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&x(e[0].x)&&x(e[0].y)&&(n+=L(e[0]),s.smoothing=="bezier"?n+=new ie(i,a).smooth(e):s.smoothing=="monotoneX"?n+=new li({closed:!1}).smooth(e):s.smoothing=="monotoneY"&&(n+=new hi({closed:!1}).smooth(e)),n+=L(t[0]),n+=Lt(),this.fillSprite.path=n)}else this.fillSprite.path="",this.strokeSprite.path=""},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t);var e=this.strokeSprite;$(t,e.properties,G),e.events.copyFrom(t.strokeSprite.events),e.fillOpacity=0;var i=this.fillSprite;$(t,i.properties,G),i.events.copyFrom(t.fillSprite.events),i.strokeOpacity=0},r}(H);T.registeredClasses.LineSeriesSegment=Ge;var sa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="DurationAxisDataItem",t.applyTheme(),t}return r}(vi),we=function(h){S(r,h);function r(){var t=h.call(this)||this;return t._baseUnit="second",t.className="DurationAxis",t.setPropertyValue("maxZoomFactor",1e6),t.applyTheme(),t}return r.prototype.formatLabel=function(t,e){return this.durationFormatter.format(t,e||this.axisDurationFormat)},r.prototype.adjustMinMax=function(t,e,i,a,n){var s,o,l,d=this.baseUnit;if(this.setPropertyValue("maxPrecision",0),d=="millisecond"||d=="second"||d=="minute"||d=="hour"){a<=1&&(a=1),a=Math.round(a);var u=t,p=e;i===0&&(i=Math.abs(e));var f=i/a,c=[60,30,20,15,10,2,1],y=1;d=="hour"&&(c=[24,12,6,4,2,1]);try{for(var v=ke(c),g=v.next();!g.done;g=v.next()){var m=g.value;if(i/m>a){y=m;break}}}catch(I){s={error:I}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}var b=Math.ceil((e-t)/y/a),D=Math.log(Math.abs(b))*Math.LOG10E,C=Math.pow(10,Math.floor(D))/10,_=b/C,P=Ir(c,_);b=P*C,f=y*b,this.durationFormatter.getValueUnit(f,this.baseUnit),t=Math.floor(t/f)*f,e=Math.ceil(e/f)*f,n&&(t-=f,t<0&&u>=0&&(t=0),e+=f,e>0&&p<=0&&(e=0)),l={min:t,max:e,step:f}}else l=h.prototype.adjustMinMax.call(this,t,e,i,a,n);return this.axisDurationFormat=this.durationFormatter.getFormat(l.step,l.max,this.baseUnit),l},Object.defineProperty(r.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(t){this._tooltipDurationFormat=t},enumerable:!0,configurable:!0}),r.prototype.getTooltipText=function(t){var e=j(this.positionToValue(t),this._stepDecimalPlaces),i=this.formatLabel(e,this.tooltipDurationFormat);return this._adapterO?this._adapterO.apply("getTooltipText",i):i},Object.defineProperty(r.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit!=t&&(this._baseUnit=t,this.durationFormatter.baseUnit=t,this.invalidate())},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.baseUnit=t.baseUnit},r}(M);T.registeredClasses.DurationAxis=we;T.registeredClasses.DurationAxisDataItem=sa;var be=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="LineSeriesDataItem",t}return r}(xe),Ze=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.minDistance=.5,t.segments=new vt(t.createSegment()),t.segments.template.applyOnClones=!0,t._disposers.push(new dt(t.segments)),t._disposers.push(t.segments.template),t._segmentsIterator=new Pi(t.segments,function(){return t.segments.create()}),t._segmentsIterator.createNewItems=!0,t.className="LineSeries",t.strokeOpacity=1,t.fillOpacity=0,t.connect=!0,t.tensionX=1,t.tensionY=1,t.autoGapCount=1.1,t.smoothing="bezier",t.segmentsContainer=t.mainContainer.createChild(H),t.segmentsContainer.isMeasured=!1,t.bulletsContainer.toFront(),t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Line Series"))},r.prototype.createSegment=function(){return new Ge},r.prototype.createDataItem=function(){return new be},r.prototype.setInitialWorkingValues=function(t){var e=this._yAxis.get(),i=this._xAxis.get();if(this.appeared&&this.visible){var a=this.dataItems.getIndex(t.index-1);if(t.component=this,this.baseAxis==i&&e instanceof M){var n=e.minZoomed;if(a&&(n=a.values.valueY.workingValue),t.setWorkingValue("valueY",n,0),t.setWorkingValue("valueY",t.values.valueY.value),i instanceof B)t.setWorkingLocation("dateX",t.locations.dateX-1,0),t.setWorkingLocation("dateX",t.locations.dateX);else if(i instanceof we&&a){var s=t.valueX;t.setWorkingValue("valueX",a.valueX,0),t.setWorkingValue("valueX",s)}}if(this.baseAxis==e&&i instanceof M){var o=i.minZoomed;if(a&&(o=a.values.valueX.workingValue),t.setWorkingValue("valueX",o,0),t.setWorkingValue("valueX",t.values.valueX.value),e instanceof B)t.setWorkingLocation("dateY",t.locations.dateX-1,0),t.setWorkingLocation("dateY",t.locations.dateY);else if(e instanceof we&&a){var s=t.valueY;t.setWorkingValue("valueY",a.valueY,0),t.setWorkingValue("valueY",s)}}}else this.baseAxis==i&&e instanceof M&&(i instanceof B&&t.setWorkingLocation("dateX",t.locations.dateX),i instanceof E&&t.setWorkingLocation("categoryX",t.locations.categoryX)),this.baseAxis==e&&i instanceof M&&(e instanceof B&&t.setWorkingLocation("dateY",t.locations.dateY),e instanceof E&&t.setWorkingLocation("categoryY",t.locations.categoryY))},r.prototype.updateLegendValue=function(t,e){h.prototype.updateLegendValue.call(this,t,e),t&&t.segment&&(this.tooltipColorSource=t.segment)},r.prototype.validate=function(){var t=this;h.prototype.validate.call(this),this.xAxis&&this.yAxis&&(this._segmentsIterator.reset(),this.openSegmentWrapper(this._adjustedStartIndex),O(this.axisRanges.iterator(),function(e){t.openSegmentWrapper(t._adjustedStartIndex,e)}),O(this._segmentsIterator.iterator(),function(e){e.__disabled=!0}))},r.prototype.sliceData=function(){for(var t=this.startIndex,e=this.endIndex,i=this.startIndex-1;i>=0;i--){var a=this.dataItems.getIndex(i);if(a&&a.hasValue(this._xValueFields)&&a.hasValue(this._yValueFields)){t=i;break}}this._adjustedStartIndex=this.findAdjustedIndex(t,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]);for(var i=this.endIndex,n=this.dataItems.length;i<n;i++){var a=this.dataItems.getIndex(i);if(a&&a.hasValue(this._xValueFields)&&a.hasValue(this._yValueFields)){e=i+1;break}}this._workingStartIndex=t,this._workingEndIndex=e},r.prototype.findAdjustedIndex=function(t,e){var i=this,a=this.propertyFields,n=t;return Z(e,function(s){if(A(a[s]))for(var o=n;o>=0;o--){var l=i.dataItems.getIndex(o);if(l&&A(l.properties[s])){t>o&&(t=o);break}}}),t},r.prototype.openSegmentWrapper=function(t,e){var i={index:t,axisRange:e};do i=this.openSegment(i.index,i.axisRange);while(i)},r.prototype.getSegment=function(){var t=this._segmentsIterator.getFirst();return t.series=this,t.isDisposed()?(this.segments.removeValue(t),this.getSegment()):t},r.prototype.openSegment=function(t,e){var i=!1,a=[];t=Math.min(t,this.dataItems.length);var n=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var s,o=!1,l=this.getSegment();l.strokeDasharray=void 0,l.__disabled=!1,e?(l.parent=e.contents,$(e.contents,l,G)):($(this,l,G),l.filters.clear(),l.parent=this.segmentsContainer),this.group.node.removeAttribute("fill");for(var d=this.connect,u=!1,p=t;p<n;p++){var f=this.dataItems.getIndex(p);if(f.segment=l,f.hasProperties&&(p==t?this.updateSegmentProperties(f.properties,l):o=this.updateSegmentProperties(f.properties,l,!0)),f.hasValue(this._xValueFields)&&f.hasValue(this._yValueFields))this.addPoints(a,f,this.xField,this.yField),u=!0;else{if(p==t)continue;if(!d&&u){s=p;break}}if(s=p,this.baseAxis instanceof B){var c=this.dataItems.getIndex(p+1);if(c&&this.baseAxis.makeGap(c,f)){i=!0;break}}if(o)break}return this.closeSegment(l,a,t,s,e,i)},r.prototype.addPoints=function(t,e,i,a,n){var s=this.getPoint(e,i,a,e.workingLocations[i],e.workingLocations[a]);n||(e.point=s),t.push(s)},r.prototype.closeSegment=function(t,e,i,a,n,s){var o=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)for(var l=a;l>=i;l--){var d=this.dataItems.getIndex(l);d.hasValue(this._xValueFields)&&d.hasValue(this._yValueFields)&&this.addPoints(o,d,this.xOpenField,this.yOpenField,!0)}else{var u=this.baseAxis,p=e.length,f=this.xAxis,c=this.yAxis;p>0&&(u==f?(o.push({x:e[p-1].x,y:c.basePoint.y}),o.push({x:e[0].x,y:c.basePoint.y})):(o.push({x:f.basePoint.x,y:e[p-1].y}),o.push({x:f.basePoint.x,y:e[0].y})))}return this.drawSegment(t,e,o),s&&a++,a<this._workingEndIndex-1?{index:a,axisRange:n}:null},r.prototype.drawSegment=function(t,e,i){t.drawSegment(e,i,this.tensionX,this.tensionY)},r.prototype.updateSegmentProperties=function(t,e,i){var a=!1;return Ft(t,function(n,s){if(A(s)){var o=e[n],l=void 0;o&&(o.toString?l=o.toString():l=o);var d=void 0;s&&(s.toString?d=s.toString():d=s),o==s||l!=null&&d!=null&&l==d||(i||(e[n]=s),a=!0)}}),a},Object.defineProperty(r.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(t){this.setPropertyValue("connect",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(t){this.setPropertyValue("tensionX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(t){this.setPropertyValue("tensionY",t,!0)},enumerable:!0,configurable:!0}),r.prototype.createLegendMarker=function(t){var e=this,i=t.pixelWidth,a=t.pixelHeight;t.disposeChildren();var n=t.createChild(Ct);if(n.shouldClone=!1,$(this,n,G),n.x2=i,n.y=a/2,n.y2=1e-5,n.visible=!0,this.fillOpacity>0){var s=t.createChild(wr);$(this,s,G),s.width=i,s.height=a,s.y=0,s.strokeOpacity=0,s.visible=!0,n.y=0}var o=t.dataItem;o.color=this.stroke,o.colorOrig=this.fill,Ht(this.bullets.iterator(),function(l){if(l instanceof Kt&&!l.copyToLegendMarker)return!1;var d=!1;if(l instanceof H&&O(l.children.iterator(),function(p){if(p instanceof Ne)return d=!0,!0}),!d){var u=l.clone();return u.parent=t,u.isMeasured=!0,u.tooltipText=void 0,u.x=i/2,e.fillOpacity>0?u.y=0:u.y=a/2,u.visible=!0,A(u.fill)||(u.fill=e.fill),A(u.stroke)||(u.stroke=e.stroke),!1}})},r.prototype.disposeData=function(){h.prototype.disposeData.call(this),this.segments.clear()},Object.defineProperty(r.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(t){this.setPropertyValue("autoGapCount",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"smoothing",{get:function(){return this.getPropertyValue("smoothing")},set:function(t){this.setPropertyValue("smoothing",t,!0)},enumerable:!0,configurable:!0}),r}(Mt);T.registeredClasses.LineSeries=Ze;T.registeredClasses.LineSeriesDataItem=be;var Fi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="RadarSeriesDataItem",t.setLocation("dateX",0,0),t.setLocation("dateY",0,0),t.setLocation("categoryX",0,0),t.setLocation("categoryY",0,0),t.applyTheme(),t}return r}(be),Ii=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="RadarSeries",t.connectEnds=!0,t.applyTheme(),t}return r.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),h.prototype.validate.call(this)},r.prototype.createDataItem=function(){return new Fi},r.prototype.getPoint=function(t,e,i,a,n,s,o){s||(s="valueX"),o||(o="valueY");var l=this.yAxis.getX(t,i,n,o),d=this.yAxis.getY(t,i,n,o),u=U({x:l,y:d});u==0&&(u=1e-5);var p=this.xAxis.getAngle(t,e,a,s),f=this.chart.startAngle,c=this.chart.endAngle;if(!(p<f||p>c))return{x:u*k(p),y:u*V(p)}},r.prototype.addPoints=function(t,e,i,a,n){var s=this.getPoint(e,i,a,e.locations[i],e.locations[a]);s&&t.push(s)},r.prototype.getMaskPath=function(){var t=this.yAxis.renderer;return ae(t.startAngle,t.endAngle-t.startAngle,t.pixelRadius,t.pixelInnerRadius)},r.prototype.drawSegment=function(t,e,i){var a=this.yAxis,n=a.renderer;this.connectEnds&&Math.abs(n.endAngle-n.startAngle)==360&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(e.push(e[0]),i.length>0&&i.unshift(i[i.length-1])),h.prototype.drawSegment.call(this,t,e,i)},Object.defineProperty(r.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(t){this.setPropertyValue("connectEnds",t,!0)},enumerable:!0,configurable:!0}),r.prototype.positionBulletReal=function(t,e,i){var a=this.xAxis,n=this.yAxis;(e<a.start||e>a.end||i<n.start||i>n.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,i))},r.prototype.setXAxis=function(t){h.prototype.setXAxis.call(this,t),this.updateRendererRefs()},r.prototype.setYAxis=function(t){h.prototype.setYAxis.call(this,t),this.updateRendererRefs()},r.prototype.updateRendererRefs=function(){var t=this.xAxis.renderer,e=this.yAxis.renderer;t.axisRendererY=e},r}(Ze);T.registeredClasses.RadarSeries=Ii;T.registeredClasses.RadarSeriesDataItem=Fi;var wi=function(h){S(r,h);function r(t){var e=h.call(this,t)||this;return e.className="AxisFillCircular",e.element=e.paper.add("path"),e.radius=R(100),e.applyTheme(),e}return r.prototype.draw=function(){if(h.prototype.draw.call(this),!(this.__disabled||this.disabled)&&this.axis){var t=this.axis.renderer;this.fillPath=t.getPositionRangePath(this.startPosition,this.endPosition,this.radius,A(this.innerRadius)?this.innerRadius:t.innerRadius,this.cornerRadius),this.path=this.fillPath}},Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),r}(Rr);T.registeredClasses.AxisFillCircular=wi;var Ri=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="GridCircular",t.pixelPerfect=!1,t.applyTheme(),t}return Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),r}(Lr);T.registeredClasses.GridCircular=Ri;var Ce=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.fdx=0,t.fdy=0,t.className="AxisLabelCircular",t.padding(0,0,0,0),t.location=.5,t.locationOnPath=.5,t.radius=0,t.isMeasured=!1,t.applyTheme(),t}return Object.defineProperty(r.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(t){if(this.setPropertyValue("relativeRotation",t,!0),!A(t)){this.rotation=void 0;var e=this.dataItem;e&&e.component&&e.component.invalidateDataItems()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(t){this.setPropertyValue("bent",t,!0),this.setPropertyValue("wrap",!1),this.setPropertyValue("horizontalCenter","none"),this.setPropertyValue("verticalCenter","none"),t?(this.setPropertyValue("dx",0),this.setPropertyValue("dy",0),this.setPropertyValue("x",0),this.setPropertyValue("y",0),this.setPropertyValue("rotation",0),this.fdx=0,this.fdy=0,this.textAlign="middle"):this.textPathElement&&(this.textPathElement.dispose(),this.textPathElement=void 0)},enumerable:!0,configurable:!0}),r.prototype.pixelRadius=function(t){var e=1;return this.inside&&(e=-1),Q(this.radius,t)*e},r.prototype.pixelRadiusY=function(t,e){var i=1;this.inside&&(i=-1);var a=this.radius;return x(a)?(a*=e/t,Q(a,t)*i):Q(a,e)*i},r.prototype.fixPosition=function(t,e,i,a,n){x(i)||(i=e),x(a)||(a=0),x(n)||(n=0);var s={x:e*k(t),y:i*V(t)};this.invalid&&this.validate();var o=!1,l=this.radius;(l instanceof yt&&l.value<0||l<0)&&(o=!0);var d=this.relativeRotation,u=this.pixelRadius(e);if(this.bent){var p={x:(e+u)*k(t+180),y:(i+u*i/e)*V(t+180)};this.path=W(p)+rt(t+180,360,e+u,i+u*i/e),this.textPathElement&&this.textPathElement.attr({startOffset:this.locationOnPath*100+"%"});return}if(x(d)){this.horizontalCenter="none",this.verticalCenter="none",t=xt(t,-180,180);var f=this.bbox.width,c=this.bbox.height,y=this.pixelPaddingBottom,v=this.pixelPaddingTop,g=this.pixelPaddingLeft,m=this.pixelPaddingRight;t>90||t<-90?d==-90&&(d=90,f=0):(d==-90&&(c=-c),d==90&&(d=-90,f=-g-m,c=-c-v-y)),this.rotation=d+t+90;var b=V(d)/2,D=k(d)/2,C=this.rotation;this.dx=c*b*V(C)-f*D*k(C),this.dy=-c*b*k(C)-f*D*V(C),this.inside?t>90||t<-90?u-=(y+v)*k(d)+(g+m)*V(d):u+=(y+this.bbox.height+v)*k(d)+(g+m+this.bbox.width)*V(d):u+=(c+y+v)*k(d)+(f+g+m)*V(d),s.x+=k(t)*u,s.y+=V(t)*u*i/e}else this.horizontalCenter="middle",this.verticalCenter="middle",o?(this.dx=0,this.dy=0,s.x=(e+u)*k(t),s.y=(i+u*i/e)*V(t)):(this.dy=this._measuredHeight/2*V(t),this.dx=this._measuredWidth/2*k(t),s.x+=k(t)*u,s.y+=V(t)*u*i/e);s.x+=a,s.y+=n,this.fdx=this.dx,this.fdy=this.dy,this.moveTo(s)},r}(Mr);T.registeredClasses.AxisLabelCircular=Ce;var Li=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.pixelRadiusReal=0,t.layout="none",t.className="AxisRendererCircular",t.isMeasured=!1,t.startAngle=-90,t.endAngle=270,t.useChartAngles=!0,t.radius=R(100),t.isMeasured=!1,t.grid.template.location=0,t.labels.template.location=0,t.labels.template.radius=15,t.ticks.template.location=0,t.ticks.template.pixelPerfect=!1,t.tooltipLocation=0,t.line.strokeOpacity=0,t.applyTheme(),t}return r.prototype.setAxis=function(t){var e=this;h.prototype.setAxis.call(this,t),t.isMeasured=!1;var i=t.tooltip;i.adapter.add("dx",function(a,n){var s=St({x:n.pixelX,y:n.pixelY},e);return e.pixelRadius*Math.cos(Math.atan2(s.y,s.x))-s.x}),i.adapter.add("dy",function(a,n){var s=St({x:n.pixelX,y:n.pixelY},e);return e.pixelRadius*Math.sin(Math.atan2(s.y,s.x))-s.y})},r.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),h.prototype.validate.call(this)},Object.defineProperty(r.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelRadius",{get:function(){return q(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(t){if(!A(e))e=t.innerRadius,e instanceof yt&&t&&(e=R(e.value*t.innerRadiusModifyer*100));else if(e instanceof yt&&t){var i=t.mr,a=e.value;a=Math.max(i*a,i-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/i,e=R(a*100)}return e}},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(t){this.setPropertyValue("useChartAngles",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelInnerRadius",{get:function(){return q(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),r.prototype.positionToPoint=function(t,e){x(e)||(e=1);var i=this.positionToCoordinate(t),a=this.startAngle+(this.endAngle-this.startAngle)*i/this.axisLength,n=this.pixelRadius,s=this.pixelInnerRadius;if(this.axisRendererY){var o=N(this.axisRendererY.positionToCoordinate(e),0,1/0);o==0&&(o=1e-6);var l={x:o*k(a),y:o*V(a)};return l}return{x:k(a)*s+(n-s)*k(a)*e,y:V(a)*s+(n-s)*V(a)*e}},r.prototype.positionToAngle=function(t){var e=this.axis,i=(this.endAngle-this.startAngle)/(e.end-e.start),a;return e.renderer.inversed?a=this.startAngle+(e.end-t)*i:a=this.startAngle+(t-e.start)*i,j(a,3)},r.prototype.angleToPosition=function(t){var e=this.axis,i=(this.endAngle-this.startAngle)/(e.end-e.start),a;return e.renderer.inversed?a=e.end-(t-this.startAngle)/i:a=(t-this.startAngle)/i+e.start,j(a,5)},r.prototype.updateAxisLine=function(){var t=this.pixelRadius,e=this.startAngle,i=this.endAngle,a=tt(360,i-e);this.line.path=W({x:t*k(e),y:t*V(e)})+rt(e,a,t,t)},r.prototype.updateGridElement=function(t,e,i){e=e+(i-e)*t.location;var a=this.positionToPoint(e);if(x(a.x)&&x(a.y)&&t.element){var n=Se*Math.atan2(a.y,a.x),s=q(A(t.radius)?t.radius:R(100),this.pixelRadius),o=q(t.innerRadius,this.pixelRadius);t.zIndex=0;var l=q(x(o)?o:this.innerRadius,this.pixelRadiusReal,!0);x(l)||(l=0),t.path=W({x:l*k(n),y:l*V(n)})+L({x:s*k(n),y:s*V(n)})}this.toggleVisibility(t,e,0,1)},r.prototype.updateTickElement=function(t,e,i){e=e+(i-e)*t.location;var a=this.positionToPoint(e);if(t.element){var n=this.pixelRadius,s=Se*Math.atan2(a.y,a.x),o=t.length;t.inside&&(o=-o),t.zIndex=1,t.path=W({x:n*k(s),y:n*V(s)})+L({x:(n+o)*k(s),y:(n+o)*V(s)})}this.toggleVisibility(t,e,0,1)},r.prototype.updateBullet=function(t,e,i){var a=.5;t instanceof Ai&&(a=t.location),e=e+(i-e)*a;var n=this.positionToPoint(e),s=this.pixelRadius,o=Se*Math.atan2(n.y,n.x);n={x:s*k(o),y:s*V(o)},this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},r.prototype.updateLabelElement=function(t,e,i,a){A(a)||(a=t.location),e=e+(i-e)*a,t.fixPosition(this.positionToAngle(e),this.pixelRadius),t.zIndex=2,this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},r.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(r.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),r.prototype.getPositionRangePath=function(t,e,i,a,n){var s="";if(x(t)&&x(e)){A(i)||(i=this.radius),t=ht(t,this.axis.start),e=tt(e,this.axis.end),e<t&&(e=t);var o=q(i,this.pixelRadius),l=q(a,this.pixelRadius,!0),d=this.positionToAngle(t),u=this.positionToAngle(e),p=u-d;s=ae(d,p,o,l,o,n)}return s},r.prototype.createGrid=function(){return new Ri},r.prototype.createFill=function(t){return new wi(t)},r.prototype.createLabel=function(){return new Ce},r.prototype.pointToPosition=function(t){var e=xt(ct(t),this.startAngle,this.endAngle);return this.coordinateToPosition((e-this.startAngle)/360*this.axisLength)},r}(Xr);T.registeredClasses.AxisRendererCircular=Li;var Mi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t._chart=new ot,t.pixelRadiusReal=0,t.className="AxisRendererRadial",t.isMeasured=!1,t.startAngle=-90,t.endAngle=270,t.minGridDistance=30,t.gridType="circles",t.axisAngle=-90,t.isMeasured=!1,t.layout="none",t.radius=R(100),t.line.strokeOpacity=0,t.labels.template.horizontalCenter="middle",t._disposers.push(t._chart),t.applyTheme(),t}return r.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),h.prototype.validate.call(this)},Object.defineProperty(r.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelRadius",{get:function(){return q(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(t){if(!A(e))e=t.innerRadius,e instanceof yt&&t&&(e=R(e.value*t.innerRadiusModifyer*100));else if(e instanceof yt&&t){var i=t.mr,a=e.value;a=Math.max(i*a,i-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/i,e=R(a*100)}}return e},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelInnerRadius",{get:function(){return q(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),r.prototype.positionToPoint=function(t,e){var i=N(this.positionToCoordinate(t),0,1/0);return{x:i*k(this.axisAngle),y:i*V(this.axisAngle)}},r.prototype.updateAxisLine=function(){this.line.path=W({x:this.pixelInnerRadius*k(this.axisAngle),y:this.pixelInnerRadius*V(this.axisAngle)})+L({x:this.pixelRadius*k(this.axisAngle),y:this.pixelRadius*V(this.axisAngle)});var t=this.axis.title;t.valign="none",t.horizontalCenter="middle",t.verticalCenter="bottom",t.y=-this.axisLength/2;var e=90;this.opposite?this.inside||(e=-90):this.inside&&(e=-90),t.rotation=e},r.prototype.updateGridElement=function(t,e,i){e=e+(i-e)*t.location;var a=this.positionToPoint(e),n,s=U(a),o=this.startAngle,l=this.endAngle,d=this.chart;if(x(s)&&t.element&&d){var u=d.xAxes.getIndex(0),p=0,f=d.series.getIndex(0);if(f&&(p=f.dataItems.length),this.gridType=="polygons"&&p>0&&f&&u&&u instanceof E){var c=u.renderer.grid.template.location,y=u.getAngle(f.dataItems.getIndex(0),"categoryX",c);n=W({x:s*k(y),y:s*V(y)});for(var v=1;v<p;v++)y=u.getAngle(f.dataItems.getIndex(v),"categoryX",c),n+=L({x:s*k(y),y:s*V(y)});y=u.getAngle(f.dataItems.getIndex(p-1),"categoryX",u.renderer.cellEndLocation),n+=L({x:s*k(y),y:s*V(y)})}else n=W({x:s*k(o),y:s*V(o)})+rt(o,l-o,s,s);t.path=n}this.toggleVisibility(t,e,0,1)},r.prototype.updateLabelElement=function(t,e,i,a){A(a)||(a=t.location),e=e+(i-e)*a;var n=this.positionToPoint(e);this.positionItem(t,n),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},r.prototype.updateBaseGridElement=function(){},r.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(r.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(t){this.setPropertyValue("axisAngle",Fe(t)),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gridType",{get:function(){var t=this.chart.xAxes.getIndex(0);return t instanceof E?this.getPropertyValue("gridType"):"circles"},set:function(t){this.setPropertyValue("gridType",t,!0)},enumerable:!0,configurable:!0}),r.prototype.getPositionRangePath=function(t,e){var i=this.pixelInnerRadius,a=this.axisLength+i,n=N(this.positionToCoordinate(t),i,a),s=N(this.positionToCoordinate(e),i,a),o=this.startAngle,l=this.endAngle,d=l-o,u,p=this.chart,f=p.xAxes.getIndex(0),c=p.series.getIndex(0),y=0;if(c&&(y=c.dataItems.length),this.gridType=="polygons"&&y>0&&c&&f&&f instanceof E){var v=f.renderer.grid.template.location,g=f.getAngle(c.dataItems.getIndex(0),"categoryX",v);u=W({x:s*k(g),y:s*V(g)});for(var m=1;m<y;m++)g=f.getAngle(c.dataItems.getIndex(m),"categoryX",v),u+=L({x:s*k(g),y:s*V(g)});g=f.getAngle(c.dataItems.getIndex(y-1),"categoryX",f.renderer.cellEndLocation),u+=L({x:s*k(g),y:s*V(g)}),u+=W({x:n*k(g),y:n*V(g)});for(var m=y-1;m>=0;m--)g=f.getAngle(c.dataItems.getIndex(m),"categoryX",v),u+=L({x:n*k(g),y:n*V(g)})}else u=ae(o,d,s,n);return u},r.prototype.updateBreakElement=function(t){var e=t.startLine,i=t.endLine,a=t.fillShape,n=t.startPoint,s=t.endPoint;e.radius=Math.abs(n.y),i.radius=Math.abs(s.y),a.radius=Math.abs(s.y),a.innerRadius=Math.abs(n.y)},r.prototype.createBreakSprites=function(t){t.startLine=new _e,t.endLine=new _e,t.fillShape=new _e},r.prototype.updateTooltip=function(){var t=this.axis;if(t){var e=4e3,i=-4e3,a=-4e3,n=e*2,s=e*2,o=this.axisAngle;o<0&&(o+=360);var l="vertical";(o>45&&o<135||o>225&&o<315)&&(l="horizontal"),this.axis.updateTooltip(l,{x:i,y:a,width:n,height:s})}},r.prototype.updateTickElement=function(t,e,i){e=e+(i-e)*t.location;var a=this.positionToPoint(e);if(t.element){var n=Fe(this.axisAngle+90);n/90!=Math.round(n/90)?t.pixelPerfect=!1:t.pixelPerfect=!0;var s=-t.length;t.inside&&(s*=-1),t.path=W({x:0,y:0})+L({x:s*k(n),y:s*V(n)})}this.positionItem(t,a),this.toggleVisibility(t,e,0,1)},r.prototype.updateBullet=function(t,e,i){var a=.5;t instanceof Ai&&(a=t.location),e=e+(i-e)*a;var n=this.positionToPoint(e);this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},r.prototype.positionToCoordinate=function(t){var e,i=this.axis,a=i.axisFullLength,n=this.pixelInnerRadius;return i.renderer.inversed?e=(i.end-t)*a+n:e=(t-i.start)*a+n,j(e,1)},r.prototype.pointToPosition=function(t){var e=U(t)-this.pixelInnerRadius;return this.coordinateToPosition(e)},Object.defineProperty(r.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),r}($t);T.registeredClasses.AxisRendererRadial=Mi;var oa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="RadarChartDataItem",t.applyTheme(),t}return r}(Ke),Xi=function(h){S(r,h);function r(){var t=h.call(this)||this;t._axisRendererX=Li,t._axisRendererY=Mi,t.innerRadiusModifyer=1,t.mr=1,t.className="RadarChart",t.startAngle=-90,t.endAngle=270,t.radius=R(80),t.innerRadius=0;var e=t.plotContainer.createChild(H);return e.shouldClone=!1,e.layout="absolute",e.align="center",e.valign="middle",t.seriesContainer.parent=e,t.radarContainer=e,t.bulletsContainer.parent=e,t.axisBulletsContainer=e,t._cursorContainer=e,t.chartContainer.events.on("maxsizechanged",t.invalidate,t,!1),t._bulletMask=e.createChild(Be),t._bulletMask.shouldClone=!1,t._bulletMask.element=t.paper.add("path"),t._bulletMask.opacity=0,t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Radar chart"))},r.prototype.processAxis=function(t){h.prototype.processAxis.call(this,t);var e=t.renderer;e.gridContainer.parent=e,e.breakContainer.parent=e,t.parent=this.radarContainer,e.toBack()},r.prototype.handleXAxisRangeChange=function(){h.prototype.handleXAxisRangeChange.call(this),O(this.yAxes.iterator(),function(t){t.invalidate()})},r.prototype.handleYAxisRangeChange=function(){h.prototype.handleYAxisRangeChange.call(this),O(this.xAxes.iterator(),function(t){t.invalidate()})},r.prototype.processConfig=function(t){if(t&&(A(t.cursor)&&!A(t.cursor.type)&&(t.cursor.type="RadarCursor"),A(t.series)&&At(t.series)))for(var e=0,i=t.series.length;e<i;e++)t.series[e].type=t.series[e].type||"RadarSeries";h.prototype.processConfig.call(this,t)},r.prototype.beforeDraw=function(){h.prototype.beforeDraw.call(this);var t=this.plotContainer,e=Dt(this.startAngle,this.endAngle,1),i={x:0,y:0,width:0,height:0},a=t.innerWidth/e.width,n=t.innerHeight/e.height,s=this.innerRadius;if(s instanceof yt){var o=s.value,l=Math.min(a,n);this.mr=l,o=Math.max(l*o,l-Math.min(t.innerHeight,t.innerWidth))/l,i=Dt(this.startAngle,this.endAngle,o),this.innerRadiusModifyer=o/s.value,s=R(o*100)}e=ze([e,i]);var d=Math.min(t.innerWidth/e.width,t.innerHeight/e.height),u=q(this.radius,d)*2||0,p=u/2,f=this.startAngle,c=this.endAngle;this._pixelInnerRadius=q(s,p),this._bulletMask.path=ae(f,c-f,p,this._pixelInnerRadius),O(this.xAxes.iterator(),function(v){v.renderer.useChartAngles&&(v.renderer.startAngle=f,v.renderer.endAngle=c),v.width=u,v.height=u,v.renderer.pixelRadiusReal=p}),O(this.yAxes.iterator(),function(v){v.renderer.startAngle=f,v.renderer.endAngle=c,v.width=u,v.height=u,v.renderer.pixelRadiusReal=p});var y=this.cursor;y&&(y.width=u,y.height=u,y.startAngle=f,y.endAngle=c),this.radarContainer.definedBBox={x:p*e.x,y:p*e.y,width:p*e.width,height:p*e.height},this.radarContainer.validatePosition()},r.prototype.createSeries=function(){return new Ii},Object.defineProperty(r.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),r.prototype.updateXAxis=function(t){t&&t.processRenderer()},r.prototype.updateYAxis=function(t){t&&t.processRenderer()},r}(_t);T.registeredClasses.RadarChart=Xi;var Yi=function(h){S(r,h);function r(){var t=h.call(this)||this;t._axis=new ot,t.className="ClockHand";var e=new pt;t.fill=e.getFor("alternativeBackground"),t.stroke=t.fill;var i=new Be;i.radius=5,t.pin=i,t.isMeasured=!1,t.startWidth=5,t.endWidth=1,t.width=R(100),t.height=R(100),t.radius=R(100),t.innerRadius=R(0);var a=new Yr;return t.hand=a,t._disposers.push(t._axis),t.applyTheme(),t}return r.prototype.validate=function(){h.prototype.validate.call(this);var t=this.hand;t.width=this.pixelWidth;var e=Math.max(this.startWidth,this.endWidth);if(t.height=e,t.leftSide=R(this.startWidth/e*100),t.rightSide=R(this.endWidth/e*100),this.axis){var i=this.axis.renderer,a=q(this.innerRadius,i.pixelRadius),n=q(this.radius,i.pixelRadius);t.x=a,t.y=-e/2,t.width=n-a}},Object.defineProperty(r.prototype,"pin",{get:function(){return this._pin},set:function(t){this._pin&&this.removeDispose(this._pin),t&&(this._pin=t,t.parent=this,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hand",{get:function(){return this._hand},set:function(t){this._hand&&this.removeDispose(this._hand),t&&(this._hand=t,t.parent=this,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(t){this.setPropertyValue("startWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(t){this.setPropertyValue("endWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(t){this.setPropertyValue("rotationDirection",t)},enumerable:!0,configurable:!0}),r.prototype.showValue=function(t,e,i){if(this._value=t,t!=null&&(x(e)||(e=0),this.axis)){var a=this.axis.renderer,n=a.positionToAngle(this.axis.anyToPosition(t)),s=this.rotation;this.rotationDirection=="clockWise"&&n<s&&(this.rotation=s-360),this.rotationDirection=="counterClockWise"&&n>s&&(this.rotation=s+360),this.animate({property:"rotation",to:n},e,i)}},Object.defineProperty(r.prototype,"currentPosition",{get:function(){if(this.axis){var t=this.axis.renderer;return t.angleToPosition(this.rotation)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this._value},set:function(t){this.showValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"axis",{get:function(){return this._axis.get()},set:function(t){if(this.axis!=t&&this._axis.set(t,new re([t.events.on("datavalidated",this.updateValue,this,!1),t.events.on("datarangechanged",this.updateValue,this,!1),t.events.on("dataitemsvalidated",this.updateValue,this,!1),t.events.on("propertychanged",this.invalidate,this,!1)])),t){var e=t.chart;e&&(this.rotation=e.startAngle)}this.parent=t.renderer,this.zIndex=5},enumerable:!0,configurable:!0}),r.prototype.updateValue=function(){this.value=this.value},r.prototype.processConfig=function(t){t&&A(t.axis)&&at(t.axis)&&this.map.hasKey(t.axis)&&(t.axis=this.map.getKey(t.axis)),h.prototype.processConfig.call(this,t)},r}(H);T.registeredClasses.ClockHand=Yi;(function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="GaugeChartDataItem",t.applyTheme(),t}return r})(oa);var la=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="GaugeChart",t.startAngle=180,t.endAngle=360,t.hands=new vt(new Yi),t.hands.events.on("inserted",t.processHand,t,!1),t._disposers.push(new dt(t.hands)),t._disposers.push(t.hands.template),t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Gauge chart"))},r.prototype.processHand=function(t){var e=t.newValue;e.axis||(e.axis=this.xAxes.getIndex(0))},r.prototype.configOrder=function(t,e){return t==e?0:t=="hands"?1:e=="hands"?-1:h.prototype.configOrder.call(this,t,e)},r}(Xi);T.registeredClasses.GaugeChart=la;var Pe=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PercentSeriesDataItem",t.applyTheme(),t}return r.prototype.uidAttr=function(){return this.slice.uidAttr()},r.prototype.hide=function(t,e,i,a){return a||(a=["value"]),h.prototype.hide.call(this,t,e,0,a)},r.prototype.setVisibility=function(t,e){e||(t?this.setWorkingValue("value",this.values.value.value,0,0):this.setWorkingValue("value",0,0,0)),h.prototype.setVisibility.call(this,t,e)},r.prototype.show=function(t,e,i){return i||(i=["value"]),h.prototype.show.call(this,t,e,i)},Object.defineProperty(r.prototype,"category",{get:function(){return this.properties.category},set:function(t){this.setProperty("category",t)},enumerable:!0,configurable:!0}),r.prototype.createLegendMarker=function(t){this.component.createLegendMarker(t,this)},Object.defineProperty(r.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,t.label&&(t.label.dataItem=this),t.valueLabel&&(t.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tick",{get:function(){var t=this;if(!this._tick){var e=this.component.ticks.create();this._tick=e,this.addSprite(e),this._disposers.push(e),e.parent=this.component.ticksContainer,this._disposers.push(new wt(function(){t.component&&t.component.ticks.removeValue(e)})),e.visible=this.visible}return this._tick},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"label",{get:function(){var t=this;if(!this._label){var e=this.component.labels.create();this.addSprite(e),this._label=e,this._disposers.push(e),e.parent=this.component.labelsContainer,this._disposers.push(new wt(function(){t.component&&t.component.labels.removeValue(e)})),e.visible=this.visible}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"slice",{get:function(){var t=this;if(!this._slice){var e=this.component,i=e.slices.create();this.addSprite(i),this._slice=i,this._disposers.push(i),i.parent=e.slicesContainer,this._disposers.push(new wt(function(){e.slices.removeValue(i)})),i.visible=this.visible,e.itemsFocusable()?(A(this.component.role)||(this.component.role="menu"),A(i.role)||(i.role="menuitem"),i.focusable=!0):(A(this.component.role)||(this.component.role="list"),A(i.role)||(i.role="listitem"),i.focusable=!1),i.focusable&&(i.events.on("focus",function(a){i.readerTitle=e.populateString(e.itemReaderText,t)},void 0,!1),i.events.on("blur",function(a){i.readerTitle=""},void 0,!1)),i.hoverable&&(i.events.on("over",function(a){i.readerTitle=e.populateString(e.itemReaderText,t)},void 0,!1),i.events.on("out",function(a){i.readerTitle=""},void 0,!1))}return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(t){this.setProperty("hiddenInLegend",t)},enumerable:!0,configurable:!0}),r}(xi),ne=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="PercentSeries",t._addAllDataItems=!1,t.colors=new Ee,t.colors.step=1,t.isMeasured=!0,t.calculatePercent=!0;var e=t.createChild(H);e.shouldClone=!1,e.isMeasured=!1,t.slicesContainer=e;var i=t.createChild(H);i.shouldClone=!1,i.isMeasured=!1,i.layout="none",t.ticksContainer=i;var a=t.createChild(H);a.shouldClone=!1,a.isMeasured=!1,a.layout="none",t.labelsContainer=a,t.alignLabels=!1,t.bulletsContainer.toFront(),t.skipFocusThreshold=50;var n=t.defaultState;return n.transitionEasing=jr,t.itemReaderText="{category}: {value.percent.formatNumber('#.#p')}",t.applyTheme(),t}return r.prototype.createSlice=function(){return new lt},r.prototype.createTick=function(){return new He},r.prototype.createLabel=function(){return new Ne},Object.defineProperty(r.prototype,"slices",{get:function(){if(!this._slices){var t=this.createSlice();t.applyOnClones=!0,this._disposers.push(t),this.initSlice(t),this._slices=new vt(t),this._disposers.push(new dt(this._slices))}return this._slices},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ticks",{get:function(){if(!this._ticks){var t=this.createTick();t.applyOnClones=!0,this._disposers.push(t),this.initTick(t),this._ticks=new vt(t),this._disposers.push(new dt(this._ticks))}return this._ticks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"labels",{get:function(){if(!this._labels){var t=this.createLabel();t.applyOnClones=!0,this._disposers.push(t),this.initLabel(t),this._labels=new vt(t),this._disposers.push(new dt(this._labels))}return this._labels},enumerable:!0,configurable:!0}),r.prototype.createDataItem=function(){return new Pe},r.prototype.initSlice=function(t){},r.prototype.initLabel=function(t){t.text="{category}: {value.percent.formatNumber('#.0p')}",t.isMeasured=!1,t.padding(5,5,5,5)},r.prototype.initTick=function(t){},r.prototype.validateDataItems=function(){this.colors.reset(),this.patterns&&this.patterns.reset(),h.prototype.validateDataItems.call(this)},r.prototype.validateDataElement=function(t){var e=t.slice;e&&(e.fill==null?this.patterns?(A(e.stroke)||(e.stroke=this.colors.next()),e.fill=this.patterns.next(),A(e.fillOpacity)&&(e.fill.backgroundOpacity=e.fillOpacity),e.stroke instanceof te&&(e.fill.stroke=e.stroke,e.fill.fill=e.stroke)):e.fill=this.colors.next():this.colors.currentStep+=this.colors.step,e.stroke==null&&(e.stroke=e.fill)),h.prototype.validateDataElement.call(this,t),e&&t.bullets.each(function(i,a){a.fill==null&&(a.fill=e.fill),a.stroke==null&&(a.stroke=e.stroke)}),this.updateLegendValue(t)},r.prototype.validateData=function(){h.prototype.validateData.call(this),this.chart&&this.chart.feedLegend()},r.prototype.arrangeLabels=function(t){for(var e=0,i=t.length;e<i;e++){var a=t[e],n=a.label;if(n){n.invalid&&n.validate();var s=n.measuredHeight;n.visible||(s=0),n.pixelY-s/2<-this.maxHeight/2&&(n.y=-this.maxHeight/2+s/2);var o=this.getNextLabel(e+1,t),l=n.pixelY+s/2;if(o){o.invalid&&o.validate();var d=o.measuredHeight;o.visible||(d=0);var u=o.pixelY;u==null&&(u=0),u-d/2<l&&(o.y=l+d/2)}}}},r.prototype.arrangeLabels2=function(t){for(var e=this.maxHeight/2,i=t.length-1;i>=0;i--){var a=t[i],n=a.label;if(n){n.invalid&&n.validate();var s=n.measuredHeight;n.visible||(s=0),n.pixelY+s/2>e&&(n.y=e-s/2,e=n.y-s/2)}}},r.prototype.getNextLabel=function(t,e){if(e.length>=t){var i=e[t];if(i)return i.label?i.visible?i.label:this.getNextLabel(t+1,e):this.getNextLabel(t+1,e)}},Object.defineProperty(r.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(t){this.setPropertyValue("colors",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(t){this.setPropertyValue("patterns",t,!0)},enumerable:!0,configurable:!0}),r.prototype.createLegendMarker=function(t,e){O(t.children.iterator(),function(i){var a=e.slice;i.defaultState.properties.fill=a.fill,i.defaultState.properties.stroke=a.stroke,i.defaultState.properties.fillOpacity=a.fillOpacity,i.defaultState.properties.strokeOpacity=a.strokeOpacity,i.fill=a.fill,i.stroke=a.stroke,i.fillOpacity=a.fillOpacity,i.strokeOpacity=a.strokeOpacity,i.fill==null&&(i.__disabled=!0);var n=t.dataItem;n.color=a.fill,n.colorOrig=a.fill,i.addDisposer(a.events.on("propertychanged",function(s){s.property=="fill"&&(i.__disabled=!1,i.isActive||(i.fill=a.fill),i.defaultState.properties.fill=a.fill,n.color=a.fill,n.colorOrig=a.fill),s.property=="stroke"&&(i.isActive||(i.stroke=a.stroke),i.defaultState.properties.stroke=a.stroke),s.property=="strokeOpacity"&&(i.isActive||(i.strokeOpacity=a.strokeOpacity),i.defaultState.properties.strokeOpacity=a.strokeOpacity)},void 0,!1))})},r.prototype.handleSliceScale=function(t){var e=this,i=t.target,a=i.dataItem;a&&a.bullets&&O(a.bullets.iterator(),function(n){var s=n[1];e.positionBullet(s)})},r.prototype.handleSliceMove=function(t){},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.slices.template.copyFrom(t.slices.template),this.labels.template.copyFrom(t.labels.template),this.ticks.template.copyFrom(t.ticks.template),this.colors=t.colors.clone()},Object.defineProperty(r.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(t){this.setAlignLabels(t)},enumerable:!0,configurable:!0}),r.prototype.setAlignLabels=function(t){this.setPropertyValue("alignLabels",t,!0)},Object.defineProperty(r.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(t){this.setPropertyValue("ignoreZeroValues",t,!0)},enumerable:!0,configurable:!0}),r.prototype.updateLegendValue=function(t){if(t){var e=t.legendDataItem,i=t.legendSettings;e&&i&&i&&(i.labelText&&(e.label.text=i.labelText),i.itemLabelText&&(e.label.text=i.itemLabelText),i.valueText&&(e.valueLabel.text=i.valueText),i.itemValueText&&(e.valueLabel.text=i.itemValueText))}},r}(mi);T.registeredClasses.PercentSeries=ne;T.registeredClasses.PercentSeriesDataItem=Pe;je.push({relevant:We.maybeXS,state:function(h,r){if(h instanceof ne){var t=h.states.create(r),e=h.labels.template.states.create(r);e.properties.disabled=!0;var i=h.ticks.template.states.create(r);return i.properties.disabled=!0,t}return null}});var qe=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PercentChartDataItem",t.applyTheme(),t}return r}(Ci),$e=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PercentChart",t.align="none",t.valign="none",t.chartContainer.minHeight=50,t.chartContainer.minWidth=50,t.applyTheme(),t}return r.prototype.validateData=function(){h.prototype.validateData.call(this),this.feedLegend()},r.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];O(this.series.iterator(),function(i){i.hiddenInLegend||O(i.dataItems.iterator(),function(a){a.hiddenInLegend||(e.push(a),a.legendSettings||(a.legendSettings=i.legendSettings))})}),t.data=e,t.dataFields.name="category"}},r.prototype.createSeries=function(){return new ne},r.prototype.setLegend=function(t){h.prototype.setLegend.call(this,t),t&&(t.labels.template.text="{category}",t.valueLabels.template.text="{value.percent.formatNumber('#.0p')}",t.itemContainers.template.events.on("over",function(e){var i=e.target.dataItem.dataContext;if(i.visible&&!i.isHiding){var a=i.slice;a.dispatchImmediately("over"),a.isHover=!0,a.interactions.isRealHover=!0}}),t.itemContainers.template.events.on("out",function(e){var i=e.target.dataItem.dataContext,a=i.slice;a.dispatchImmediately("out"),a.isHover=!1}))},r}(bi);T.registeredClasses.PercentChart=$e;T.registeredClasses.PercentChartDataItem=qe;var ji=function(h){S(r,h);function r(){var t=h.call(this)||this;return t._label=new ot,t._slice=new ot,t.className="PieTick",t.element=t.paper.add("polyline"),t._disposers.push(t._label),t._disposers.push(t._slice),t.applyTheme(),t}return r.prototype.draw=function(){h.prototype.draw.call(this);var t=this.slice,e=this.label,i=t.dataItem.component;if(t&&t.radius>0&&e&&e.text){var a=t.dx+t.slice.dx+t.pixelX+t.ix*t.radius*t.scale,n=t.dy+t.slice.dy+t.pixelY+t.iy*t.radiusY*t.scale,s=void 0,o=void 0,l=void 0,d=void 0;if(i.alignLabels)s=e.pixelX-this.length,o=e.pixelY,l=e.pixelX,d=o,e.horizontalCenter=="right"&&(s+=2*this.length,l=s-this.length);else{var u=e.pixelRadius(t.radius);s=a+u*t.ix,o=n+u*t.iy,l=s,d=o}this.element.attr({points:[a,n,s,o,l,d]})}},Object.defineProperty(r.prototype,"slice",{get:function(){return this._slice.get()},set:function(t){this._slice.set(t,new re([t.events.on("transformed",this.invalidate,this),t.events.on("validated",this.invalidate,this)]))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"label",{get:function(){return this._label.get()},set:function(t){this._label.set(t,t.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),r}(He);T.registeredClasses.PieTick=ji;var Je=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PieSeriesDataItem",t.values.radiusValue={},t.applyTheme(),t}return Object.defineProperty(r.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(t){this.setValue("radiusValue",t)},enumerable:!0,configurable:!0}),r.prototype.hide=function(t,e,i,a){return h.prototype.hide.call(this,t,e,0,["value","radiusValue"])},r.prototype.show=function(t,e,i){return h.prototype.show.call(this,t,e,["value","radiusValue"])},r}(Pe),Qe=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PieSeries",t.alignLabels=!0,t.layout="none",t.labels.template.radius=R(5),t.addDisposer(t.labels.template.events.on("enabled",t.invalidate,t,!1)),t.applyTheme(),t}return r.prototype.createSlice=function(){return new Ue},r.prototype.createTick=function(){return new ji},r.prototype.createLabel=function(){return new Ce},r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Pie Slice Series"))},r.prototype.createDataItem=function(){return new Je},r.prototype.initSlice=function(t){t.isMeasured=!1,t.defaultState.properties.scale=1,t.observe("scale",this.handleSliceScale,this),t.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this),t.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})";var e=t.states.create("hover");e.properties.scale=1.05;var i=t.defaultState;i.properties.shiftRadius=0,t.togglable=!0,t.events.on("toggled",function(n){n.target.hideTooltip(),n.target.interactions.lastHitPointer&&n.target.interactions.lastHitPointer.touch&&!n.target.isActive&&(n.target.isHover=!1)});var a=t.states.create("active");a.properties.shiftRadius=.1},r.prototype.validate=function(){this._leftItems=[],this._rightItems=[],this._currentStartAngle=this.startAngle,this._arcRect=Dt(this.startAngle,this.endAngle),this._maxRadiusPercent=0;for(var t=this.startIndex;t<this.endIndex;t++){var e=this.dataItems.getIndex(t),i=e.values.radiusValue.percent;i>this._maxRadiusPercent&&(this._maxRadiusPercent=i)}h.prototype.validate.call(this),this.alignLabels&&(this.startAngle>this.endAngle?this._rightItems.reverse():this._leftItems.reverse(),this._rightItems.sort(function(a,n){var s=(a.slice.middleAngle+360)%360,o=(n.slice.middleAngle+360)%360;return s>270&&(s-=360),o>270&&(o-=360),s<o?-1:s>o?1:0}),this._leftItems.sort(function(a,n){var s=(a.slice.middleAngle+360)%360,o=(n.slice.middleAngle+360)%360;return s<o?1:s>o?-1:0}),this.arrangeLabels(this._rightItems),this.arrangeLabels2(this._rightItems),this.arrangeLabels(this._leftItems),this.arrangeLabels2(this._leftItems))},r.prototype.validateDataElement=function(t){if(this.pixelRadius>0){this.ignoreZeroValues&&(t.value==0||t.value==null)?t.__disabled=!0:t.__disabled=!1;var e=t.slice;if(e.radius=this.pixelRadius,x(t.radiusValue)&&(e.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*t.values.radiusValue.percent/this._maxRadiusPercent),e.innerRadius instanceof yt||(e.innerRadius=this.pixelInnerRadius),e.startAngle=this._currentStartAngle,e.arc=Math.abs(t.values.value.percent)*(this.endAngle-this.startAngle)/100,!this.labels.template.disabled){var i=t.label,a=t.tick;a.slice=e,a.label=i;var n=(e.middleAngle+360)%360,s=void 0;if(this.alignLabels){var o=i.pixelRadius(e.radius),l=a.length+o;i.dx=0,i.dy=0,i.verticalCenter="middle";var d=this._arcRect;n>270||n<=90?(l+=(d.width+d.x)*this.pixelRadius,i.horizontalCenter="left",this._rightItems.push(t)):(l-=d.x*this.pixelRadius,i.horizontalCenter="right",this._leftItems.push(t),l*=-1);var u=e.radius+a.length+o;s={x:l,y:e.iy*u},i.moveTo(s)}else{var p=e.depth;x(p)||(p=0),i.fixPosition(e.middleAngle,e.radius,e.radiusY,0,-p)}}this._currentStartAngle+=e.arc,h.prototype.validateDataElement.call(this,t)}},Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(t){this._pixelRadius!=t&&(this._pixelRadius=t,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(t){this._pixelInnerRadius!=t&&(this._pixelInnerRadius=t,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"startAngle",{get:function(){var t=this.getPropertyValue("startAngle");return x(t)?t:this._startAngleInternal},set:function(t){this.setPropertyValue("startAngle",Fe(t),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){var t=this.getPropertyValue("endAngle");return x(t)?t:this._endAngleInternal},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),r.prototype.positionBullet=function(t){h.prototype.positionBullet.call(this,t);var e=t.dataItem,i=e.slice,a=t.locationX;x(a)||(a=.5);var n=t.locationY;x(n)||(n=1);var s=i.startAngle+i.arc*a;t.x=n*i.radius*k(s),t.y=n*i.radiusY*V(s)},r.prototype.handleSliceMove=function(t){if(!this.alignLabels){var e=t.target,i=e.dataItem;if(i){var a=i.label;a&&(a.dx=a.fdx+e.dx+e.pixelX,a.dy=a.fdy+e.dy+e.pixelY)}}},Object.defineProperty(r.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;var t=this.chart;return t?Dt(t.startAngle,t.endAngle,this.pixelRadius):Dt(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:!0,configurable:!0}),r}(ne);T.registeredClasses.PieSeries=Qe;T.registeredClasses.PieSeriesDataItem=Je;var Wi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PieChartDataItem",t.applyTheme(),t}return r}(qe),Ni=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="PieChart",t.innerRadius=0,t.radius=R(80),t.align="none",t.valign="none",t.startAngle=-90,t.endAngle=270;var e=t.seriesContainer;return e.isMeasured=!0,e.valign="middle",e.align="center",e.layout="absolute",e.width=void 0,e.height=void 0,t.chartContainer.minHeight=50,t.chartContainer.minWidth=50,t.chartContainer.events.on("maxsizechanged",t.updateRadius,t,!1),t._disposers.push(t.seriesContainer.events.on("positionchanged",function(){t.bulletsContainer.x=t.seriesContainer.x,t.bulletsContainer.y=t.seriesContainer.y})),t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Pie chart"))},r.prototype.validateLayout=function(){h.prototype.validateLayout.call(this),this.updateRadius()},r.prototype.handleSeriesAdded=function(t){h.prototype.handleSeriesAdded.call(this,t),this._chartPixelRadius=void 0,this.updateSeriesAngles()},r.prototype.updateSeriesAngles=function(){var t=this;this.series.each(function(e){e._startAngleInternal=t.startAngle,e._endAngleInternal=t.endAngle})},r.prototype.updateRadius=function(){var t=this.chartContainer,e=Dt(this.startAngle,this.endAngle,1),i={x:0,y:0,width:0,height:0},a=this.innerRadius;a instanceof yt&&(i=Dt(this.startAngle,this.endAngle,a.value)),e=ze([e,i]);var n=Math.min(t.innerWidth/e.width,t.innerHeight/e.height);x(n)||(n=0);var s=q(this.radius,n),o=q(this.innerRadius,n),l=(s-o)/this.series.length;(s!=this._chartPixelRadius||o!=this._chartPixelInnerRadius)&&(this._chartPixelRadius=s,this._chartPixelInnerRadius=o,O(Jt(this.series.iterator()),function(d){var u=d[0],p=d[1],f=o+q(p.radius,s-o),c=o+q(p.innerRadius,s-o);x(f)||(f=o+l*(u+1)),x(c)||(c=o+l*u),p.pixelRadius=f,p.pixelInnerRadius=c}),this.seriesContainer.definedBBox={x:s*e.x,y:s*e.y,width:s*e.width,height:s*e.height},this.seriesContainer.invalidateLayout())},Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),r.prototype.createSeries=function(){return new Qe},Object.defineProperty(r.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),r}($e);T.registeredClasses.PieChart=Ni;T.registeredClasses.PieChartDataItem=Wi;var Bi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PieSeries3DDataItem",t.values.depthValue={},t.applyTheme(),t}return Object.defineProperty(r.prototype,"depthValue",{get:function(){return this.values.depthValue.value},set:function(t){this.setValue("depthValue",t)},enumerable:!0,configurable:!0}),r}(Je),zi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PieSeries3D",t.applyTheme(),t}return r.prototype.createDataItem=function(){return new Bi},r.prototype.createSlice=function(){return new Wr},r.prototype.validateDataElement=function(t){var e=t.slice,i=this.depth;x(i)||(i=this.chart.depth);var a=t.values.depthValue.percent;x(a)||(a=100),e.depth=a*i/100;var n=this.angle;x(n)||(n=this.chart.angle),e.angle=n,h.prototype.validateDataElement.call(this,t)},r.prototype.validate=function(){h.prototype.validate.call(this);for(var t=this._workingStartIndex;t<this._workingEndIndex;t++){var e=this.dataItems.getIndex(t),i=e.slice,a=i.startAngle;a>=-90&&a<90?i.toFront():a>=90&&i.toBack()}},Object.defineProperty(r.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t)},enumerable:!0,configurable:!0}),r.prototype.positionBullet=function(t){h.prototype.positionBullet.call(this,t);var e=t.dataItem,i=e.slice;t.y=t.pixelY-i.depth},r}(Qe);T.registeredClasses.PieSeries3D=zi;T.registeredClasses.PieSeries3DDataItem=Bi;(function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PieChart3DDataItem",t.applyTheme(),t}return r})(Wi);var ha=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PieChart3D",t.depth=20,t.angle=10,t.applyTheme(),t}return Object.defineProperty(r.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){t=N(t,0,90),this.setPropertyValue("angle",t)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),r.prototype.createSeries=function(){return new zi},r}(Ni);T.registeredClasses.PieChart3D=ha;var ua=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="SlicedChartDataItem",t.applyTheme(),t}return r}(qe),da=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="SlicedChart",t.seriesContainer.layout="horizontal",t.padding(15,15,15,15),t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Sliced chart"))},r.prototype.validate=function(){h.prototype.validate.call(this)},r}($e);T.registeredClasses.SlicedChart=da;T.registeredClasses.SlicedChartDataItem=ua;var Ae=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.legendSettings=new Nr,t.className="FlowDiagramNode",t.isMeasured=!1,new pt,t.draggable=!0,t.inert=!0,t.setStateOnChildren=!0,t.events.on("positionchanged",t.invalidateLinks,t,!1),t.events.on("sizechanged",t.invalidateLinks,t,!1),t}return r.prototype.handleHit=function(t){this.isHidden||this.isHiding?this.show():this.hide()},r.prototype.show=function(t){var e=h.prototype.show.call(this,t);return this.outgoingDataItems.each(function(i){(!i.toNode||i.toNode&&!i.toNode.isHidden)&&(i.setWorkingValue("value",i.getValue("value"),t),i.link.show())}),this.incomingDataItems.each(function(i){(!i.fromNode||i.fromNode&&!i.fromNode.isHidden)&&(i.setWorkingValue("value",i.getValue("value"),t),i.link.show())}),e},r.prototype.hide=function(t){var e=h.prototype.hide.call(this,t);return this.outgoingDataItems.each(function(i){i.setWorkingValue("value",0,t),i.link.hide()}),this.incomingDataItems.each(function(i){i.setWorkingValue("value",0,t),i.link.hide()}),e},r.prototype.validate=function(){this.isDisposed()||(h.prototype.validate.call(this),this.invalidateLinks())},r.prototype.invalidateLinks=function(){var t=this;this.outgoingDataItems.each(function(e){var i=e.link;if(i.colorMode=="fromNode"&&(i.fill=i.dataItem.fromNode.color),i.colorMode=="gradient"){i.fill=i.gradient,i.stroke=i.gradient;var a=i.gradient.stops.getIndex(0);a&&(a.color=t.color,i.gradient.validate())}}),this.incomingDataItems.each(function(e){var i=e.link;if(i.colorMode=="toNode"&&(i.fill=i.dataItem.toNode.color),i.colorMode=="gradient"){i.fill=i.gradient,i.stroke=i.gradient;var a=i.gradient.stops.getIndex(1);a&&(a.color=t.color,i.gradient.validate())}})},Object.defineProperty(r.prototype,"incomingDataItems",{get:function(){var t=this;if(!this._incomingDataItems){var e=new Rt;e.events.on("inserted",function(){t.chart.sortBy=="name"?t._incomingSorted=qt(t._incomingDataItems.iterator(),function(i,a){return ui(i.fromName,a.fromName)}):t.chart.sortBy=="value"?t._incomingSorted=qt(t._incomingDataItems.iterator(),function(i,a){return Ie(ee(i.value,a.value))}):t._incomingSorted=t._incomingDataItems.iterator()},void 0,!1),this._incomingDataItems=e}return this._incomingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"outgoingDataItems",{get:function(){var t=this;if(!this._outgoingDataItems){var e=new Rt;e.events.on("inserted",function(){t.chart.sortBy=="name"?t._outgoingSorted=qt(t._outgoingDataItems.iterator(),function(i,a){return ui(i.fromName,a.fromName)}):t.chart.sortBy=="value"?t._outgoingSorted=qt(t._outgoingDataItems.iterator(),function(i,a){return Ie(ee(i.value,a.value))}):t._outgoingSorted=t._outgoingDataItems.iterator()},void 0,!1),this._outgoingDataItems=e}return this._outgoingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(t){this.setPropertyValue("name",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(t){this.setPropertyValue("total",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(t){this.setPropertyValue("totalIncoming",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(t){this.setPropertyValue("totalOutgoing",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(t){this.setColorProperty("color",t),this._background&&(this._background.fill=t),this.fill=t},enumerable:!0,configurable:!0}),r.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var a=t.createChild(me);a.shouldClone=!1,$(this,a,G),a.stroke=this.fill,a.copyFrom(this),a.padding(0,0,0,0),a.width=e,a.height=i;var n=t.dataItem;n.color=a.fill,n.colorOrig=a.fill},Object.defineProperty(r.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),r}(H);T.registeredClasses.FlowDiagramNode=Ae;var De=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="FlowDiagramLink";var e=new pt;return t.maskBullets=!1,t.colorMode="fromNode",t.layout="none",t.isMeasured=!1,t.startAngle=0,t.endAngle=0,t.strokeOpacity=0,t.verticalCenter="none",t.horizontalCenter="none",t.tooltipText="{fromName}→{toName}:{value.value}",t.tooltipLocation=.5,t.link=t.createChild(lt),t.link.shouldClone=!1,t.link.setElement(t.paper.add("path")),t.link.isMeasured=!1,t.fillOpacity=.2,t.fill=e.getFor("alternativeBackground"),t.applyTheme(),t}return r.prototype.positionBullets=function(){var t=this;O(this.bullets.iterator(),function(e){e.parent=t.bulletsContainer,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,t.positionBullet(e)})},Object.defineProperty(r.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var t=this.createChild(H);t.shouldClone=!1,t.layout="none",this._bulletsContainer=t}return this._bulletsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var t=this.createChild(lt);t.shouldClone=!1,t.setElement(this.paper.add("path")),t.isMeasured=!1,this._bulletsMask=t}return this._bulletsMask},enumerable:!0,configurable:!0}),r.prototype.positionBullet=function(t){var e=t.locationX;x(e)||(e=t.locationY),x(e)||(e=.5);var i=this.middleLine.positionToPoint(e);t.moveTo(i);var a=t.propertyFields.rotation,n;if(t.dataItem){var s=t.dataItem.dataContext;n=s[a]}x(n)||(n=i.angle),t.rotation=n},Object.defineProperty(r.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(t){if(t=="gradient"){var e=this.fill;this.gradient.stops.clear(),e instanceof te&&(this.gradient.addColor(e),this.gradient.addColor(e)),this.fill=this.gradient,this.stroke=this.gradient}this.setPropertyValue("colorMode",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(t){this.setPropertyValue("tooltipLocation",t,!0)},enumerable:!0,configurable:!0}),r.prototype.setFill=function(t){h.prototype.setFill.call(this,t);var e=this._gradient;e&&t instanceof te&&(e.stops.clear(),e.addColor(t),e.addColor(t))},r.prototype.measureElement=function(){},Object.defineProperty(r.prototype,"bullets",{get:function(){var t=this;return this._bullets||(this._bullets=new vt(new Kt),this._disposers.push(new dt(this._bullets)),this._disposers.push(this._bullets.template),this._bullets.events.on("inserted",function(e){e.newValue.events.on("propertychanged",function(i){(i.property=="locationX"||i.property=="locationY")&&t.positionBullet(i.target)},void 0,!1)},void 0,!1)),this._bullets},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.bullets.copyFrom(t.bullets);var e=this.middleLine;e&&(e instanceof Ct&&t.middleLine instanceof Ct&&e.copyFrom(t.middleLine),e instanceof di&&t.middleLine instanceof di&&e.copyFrom(t.middleLine)),this.link.copyFrom(t.link)},r.prototype.getTooltipX=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).x},r.prototype.getTooltipY=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).y},Object.defineProperty(r.prototype,"gradient",{get:function(){return this._gradient||(this._gradient=new Br),this._gradient},enumerable:!0,configurable:!0}),r}(H);T.registeredClasses.FlowDiagramLink=De;var ti=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="FlowDiagramDataItem",t.values.value={},t.applyTheme(),t}return Object.defineProperty(r.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(t){this.setProperty("fromName",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"toName",{get:function(){return this.properties.toName},set:function(t){this.setProperty("toName",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.setProperty("color",zr(t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"link",{get:function(){var t=this;if(!this._link){var e=this.component.links.create();this._link=e,this.addSprite(e),this._disposers.push(new wt(function(){t.component&&t.component.links.removeValue(e)}))}return this._link},enumerable:!0,configurable:!0}),r}(Er),ei=function(h){S(r,h);function r(){var t=h.call(this)||this;t.colors=new Ee,t.className="FlowDiagram",t.nodePadding=20,t.sortBy="none",t.sequencedInterpolation=!0,t.colors.step=2,t.minNodeSize=.02;var e=t.chartContainer.createChild(H);e.shouldClone=!1,e.layout="none",e.isMeasured=!1,t.linksContainer=e;var i=t.chartContainer.createChild(H);return i.shouldClone=!1,i.layout="none",i.isMeasured=!1,t.nodesContainer=i,t.dataItem=t.createDataItem(),t.dataItem.component=t,t.applyTheme(),t}return r.prototype.dispose=function(){h.prototype.dispose.call(this),this.dataItem.dispose()},r.prototype.validateData=function(){var t=this;this._parseDataFrom==0&&this.nodes.clear(),this.sortNodes(),this.colors.reset(),h.prototype.validateData.call(this);var e=0,i=0,a,n;O(this.dataItems.iterator(),function(o){var l=o.fromName;if(l){var d=t.nodes.getKey(l);d||(d=t.nodes.create(l),d.name=l,d.chart=t,d.dataItem=o),o.fromNode=d,o.fromNode.outgoingDataItems.push(o)}var u=o.toName;if(u){var d=t.nodes.getKey(u);d||(d=t.nodes.create(u),d.name=u,d.chart=t,d.dataItem=o),o.toNode=d,o.toNode.incomingDataItems.push(o)}if(!o.fromNode){var p=new pi;p.opacities=[0,1],o.link.strokeModifier=p}if(!o.toNode){var f=new pi;f.opacities=[1,0],o.link.strokeModifier=f}var c=o.value;x(c)&&(e+=c,i++,(a>c||!x(a))&&(a=c),(n<c||!x(n))&&(n=c))});var s="value";this.dataItem.setCalculatedValue(s,n,"high"),this.dataItem.setCalculatedValue(s,a,"low"),this.dataItem.setCalculatedValue(s,e,"sum"),this.dataItem.setCalculatedValue(s,e/i,"average"),this.dataItem.setCalculatedValue(s,i,"count"),O(this.nodes.iterator(),function(o){var l=o[1];l.fill instanceof te&&(l.color=l.fill),l.color==null&&(l.color=t.colors.next()),l.dataItem.color!=null&&(l.color=l.dataItem.color),l.dataItem.visible||l.hide(0),t.getNodeValue(l)}),this.sortNodes(),this.feedLegend()},r.prototype.handleDataItemWorkingValueChange=function(t,e){this.invalidate()},r.prototype.sortNodes=function(){this.sortBy=="name"?this._sorted=this.nodes.sortedIterator():this.sortBy=="value"?this._sorted=qt(this.nodes.iterator(),function(t,e){return Ie(ee(t[1].total,e[1].total))}):this._sorted=this.nodes.iterator()},r.prototype.getNodeValue=function(t){var e=0,i=0;O(t.incomingDataItems.iterator(),function(a){var n=a.getWorkingValue("value");x(n)&&(e+=n)}),O(t.outgoingDataItems.iterator(),function(a){var n=a.getWorkingValue("value");x(n)&&(i+=n)}),t.total=e+i,t.totalIncoming=e,t.totalOutgoing=i},r.prototype.changeSorting=function(){this.sortNodes()},r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Flow diagram"))},r.prototype.createDataItem=function(){return new ti},Object.defineProperty(r.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(t){this.setPropertyValue("nodePadding",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(t){this.setPropertyValue("sortBy",t),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(t){this.setPropertyValue("minNodeSize",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nodes",{get:function(){if(!this._nodes){var t=this.createNode();t.events.on("hit",function(e){e.target.handleHit(e)}),this._nodes=new Di(t),this._disposers.push(new Si(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),r.prototype.createNode=function(){var t=new Ae;return this._disposers.push(t),t},Object.defineProperty(r.prototype,"links",{get:function(){return this._links||(this._links=new vt(this.createLink()),this._disposers.push(new dt(this._links))),this._links},enumerable:!0,configurable:!0}),r.prototype.createLink=function(){var t=new De;return this._disposers.push(t),t},r.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];this.nodes.each(function(i,a){e.push(a)}),t.data=e,t.dataFields.name="name"}},r.prototype.disposeData=function(){h.prototype.disposeData.call(this),this.nodes.clear()},r}(Hr);T.registeredClasses.FlowDiagram=ei;var Re=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="LabelBullet";var e=t.createChild(Ne);return e.shouldClone=!1,e.verticalCenter="middle",e.horizontalCenter="middle",e.truncate=!0,e.hideOversized=!1,e.maxWidth=500,e.maxHeight=500,e.stroke=Ut(),e.strokeOpacity=0,e.fill=new pt().getFor("text"),t.events.on("maxsizechanged",t.handleMaxSize,t,!1),t.label=e,t.applyTheme(),t}return r.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth,this.label.maxHeight=this.maxHeight},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.label.copyFrom(t.label)},r}(Kt);T.registeredClasses.LabelBullet=Re;var Ei=function(h){S(r,h);function r(){var t=h.call(this)||this;t.nextInCoord=0,t.nextOutCoord=0,t.className="SankeyNode",t.width=10,t.height=10;var e=t.createChild(Re);e.shouldClone=!1,e.locationX=1,e.locationY=.5,e.label.text="{name}",e.width=150,e.height=150,e.label.horizontalCenter="left",e.label.padding(0,5,0,5),t.nameLabel=e;var i=t.createChild(Re);i.shouldClone=!1,i.label.hideOversized=!1,i.locationX=.5,i.locationY=.5,i.width=150,i.height=150,i.label.horizontalCenter="middle",t.valueLabel=i;var a=t.hiddenState;return a.properties.fill=new pt().getFor("disabledBackground"),a.properties.opacity=.5,a.properties.visible=!0,t.background.hiddenState.copyFrom(a),t}return r.prototype.invalidateLinks=function(){var t=this;h.prototype.invalidateLinks.call(this),this.nextInCoord=0,this.nextOutCoord=0;var e=this.chart;if(e){var i=e.orientation;this._incomingSorted&&O(this._incomingSorted,function(a){var n=a.link,s=a.getWorkingValue("value");if(x(s)){n.parent=t.chart.linksContainer;var o=void 0,l=void 0,d=void 0;if(i=="horizontal"?(o=t.pixelX+t.dx,l=t.nextInCoord+t.pixelY+t.dy,d=0):(l=t.pixelY+t.dy,o=t.nextInCoord+t.pixelX+t.dx,d=90),n.endX=o,n.endY=l,n.startAngle=d,n.endAngle=d,n.gradient.rotation=d,n.linkWidth=s*e.valueHeight,!a.fromNode){i=="horizontal"?(n.maxWidth=200,n.startX=t.pixelX+t.dx-n.maxWidth,n.startY=n.endY):(n.maxHeight=200,n.startX=n.endX,n.startY=t.pixelY+t.dy-n.maxHeight),Qt(n.gradient),n.fill=a.toNode.color;var u=n.gradient.stops.getIndex(0);u&&(n.colorMode=="gradient"&&(u.color=t.color),u.opacity=0,n.fill=n.gradient,n.stroke=n.gradient,n.gradient.validate())}t.nextInCoord+=n.linkWidth}}),this._outgoingSorted&&O(this._outgoingSorted,function(a){var n=a.link;n.parent=t.chart.linksContainer;var s=a.getWorkingValue("value");if(x(s)){var o=void 0,l=void 0,d=void 0;if(i=="horizontal"?(d=0,o=t.pixelX+t.pixelWidth+t.dx-1,l=t.nextOutCoord+t.pixelY+t.dy):(d=90,o=t.nextOutCoord+t.pixelX+t.dx,l=t.pixelY+t.pixelHeight+t.dy-1),n.startX=o,n.startY=l,n.startAngle=d,n.endAngle=d,n.gradient.rotation=d,n.linkWidth=s*t.chart.valueHeight,!a.toNode){i=="horizontal"?(n.maxWidth=200,n.endX=t.pixelX+n.maxWidth+t.dx,n.endY=n.startY):(n.maxHeight=200,n.endX=n.startX,n.endY=t.pixelY+n.maxHeight+t.dy),n.opacity=t.opacity;var u=n.gradient.stops.getIndex(1);u&&(n.colorMode=="gradient"&&(u.color=t.color),u.opacity=0,n.fill=n.gradient,n.stroke=n.gradient,n.gradient.validate())}t.nextOutCoord+=n.linkWidth}})}this.positionBullet(this.nameLabel),this.positionBullet(this.valueLabel)},r.prototype.positionBullet=function(t){t&&(t.x=this.measuredWidth*t.locationX,t.y=this.measuredHeight*t.locationY)},Object.defineProperty(r.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(t){this.setPropertyValue("level",t,!0)},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.nameLabel.copyFrom(t.nameLabel),this.valueLabel.copyFrom(t.valueLabel)},r}(Ae);T.registeredClasses.SankeyNode=Ei;var Hi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="SankeyLink",new pt,t.tension=.8,t.controlPointDistance=.2,t.startAngle=0,t.endAngle=0,t.linkWidth=0,t.startX=0,t.endX=0,t.startY=0,t.endY=0,t.middleLine=t.createChild(Ur),t.middleLine.shouldClone=!1,t.middleLine.strokeOpacity=0,t.applyTheme(),t}return r.prototype.makeBackwards=function(){this.states.getKey("backwards")!=null&&this.setState("backwards")},r.prototype.validate=function(){var t,e,i,a;if(h.prototype.validate.call(this),!this.isTemplate){var n=this.startX,s=this.startY,o=this.endX,l=this.endY;if(this.states.getKey("backwards")&&this.setState("default"),this.dataItem){var d=this.dataItem.component;d&&(d.orientation=="horizontal"?o<n&&(t=ue([o,n],2),n=t[0],o=t[1],e=ue([l,s],2),s=e[0],l=e[1],this.makeBackwards()):l<s&&(i=ue([l,s],2),s=i[0],l=i[1],a=ue([o,n],2),n=a[0],o=a[1],this.makeBackwards()))}x(o)||(o=n),x(l)||(l=s);var u=this.startAngle,p=this.endAngle,f=this.linkWidth,c="",y=n,v=s,g=o,m=l,b=n+f*V(u),D=o+f*V(p),C=s+f*k(u),_=l+f*k(p),P=n+f/2*V(u),I=o+f/2*V(p),F=s+f/2*k(u),z=l+f/2*k(p);this.zIndex=this.zIndex||this.dataItem.index;var X=this.tension+(1-this.tension)*V(u),w=this.tension+(1-this.tension)*k(u);if(this.middleLine.tensionX=X,this.middleLine.tensionY=w,x(f)&&x(n)&&x(o)&&x(s)&&x(l)){j(y,3)==j(g,3)&&(g+=.01),j(v,3)==j(m,3)&&(m+=.01),j(b,3)==j(D,3)&&(D+=.01),j(C,3)==j(_,3)&&(_+=.01);var ft=Math.min(b,D,y,g),Pt=Math.min(C,_,v,m),gt=Math.max(b,D,y,g),se=Math.max(C,_,v,m);this._bbox={x:ft,y:Pt,width:gt-ft,height:se-Pt};var nt=this.controlPointDistance,Vt=y+(g-y)*nt*k(u),kt=v+(m-v)*nt*V(u),jt=g-(g-y)*nt*k(p),Wt=m-(m-v)*nt*V(p),Y=P+(I-P)*nt*k(u),ut=F+(z-F)*nt*V(u),et=I-(I-P)*nt*k(p),ur=z-(z-F)*nt*V(p),oe=ct({x:Vt,y:kt},{x:jt,y:Wt}),le=(f/k(oe)-f)/fi(oe)*k(u),he=(f/V(oe)-f)*fi(oe)*V(u),dr=-le/2+b+(D-b)*nt*k(u),pr=-he/2+C+(_-C)*nt*V(u),fr=-le/2+D-(D-b)*nt*k(p),cr=-he/2+_-(_-C)*nt*V(p);z==F&&(z+=.01),this.middleLine.segments=[[{x:P,y:F},{x:Y,y:ut},{x:et,y:ur},{x:I,y:z}]],Vt+=le/2,kt+=he/2,jt+=le/2,Wt+=he/2,c+=W({x:y,y:v}),c+=new ie(X,w).smooth([{x:y,y:v},{x:Vt,y:kt},{x:jt,y:Wt},{x:g,y:m}]),c+=L({x:D,y:_}),c+=new ie(X,w).smooth([{x:D,y:_},{x:fr,y:cr},{x:dr,y:pr},{x:b,y:C}]),c+=Lt()}this.link.path=c,this.maskBullets&&(this.bulletsMask.path=c,this.bulletsContainer.mask=this.bulletsMask),this.positionBullets()}},Object.defineProperty(r.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(t){this.setPropertyValue("startX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(t){this.setPropertyValue("endX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(t){this.setPropertyValue("startY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(t){this.setPropertyValue("endY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(t){this.setPropertyValue("linkWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),r}(De);T.registeredClasses.SankeyLink=Hi;var pa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="SankeyDiagramDataItem",t.applyTheme(),t}return r}(ti),fa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="SankeyDiagram",t.orientation="horizontal",t.nodeAlign="middle",t.nodesContainer.width=R(100),t.nodesContainer.height=R(100),t.linksContainer.width=R(100),t.linksContainer.height=R(100),t.applyTheme(),t}return r.prototype.validateData=function(){var t=this;this._valueHeight=void 0,h.prototype.validateData.call(this),this._levelCount=0,this.nodes.each(function(e,i){i.level=void 0}),this.nodes.each(function(e,i){i.level=t.getNodeLevel(i,0),t._levelCount=ht(t._levelCount,i.level)})},r.prototype.getNodeLevel=function(t,e){var i=this,a=[e];return O(t.incomingDataItems.iterator(),function(n){n.fromNode&&(x(n.fromNode.level)?a.push(n.fromNode.level+1):(i._counter=0,i.checkLoop(n.fromNode),i._counter<i.dataItems.length&&a.push(i.getNodeLevel(n.fromNode,e+1))))}),Math.max.apply(Math,yr(a))},r.prototype.checkLoop=function(t){var e=this;this._counter++,!(this._counter>this.dataItems.length)&&O(t.incomingDataItems.iterator(),function(i){e.checkLoop(i.fromNode)})},r.prototype.calculateValueHeight=function(){var t=this;this._levelSum={},this._levelNodesCount={},this.maxSum=0;var e=this.dataItem.values.value.sum;O(this._sorted,function(u){var p=u[1];t.getNodeValue(p)}),this.nodes.each(function(u,p){var f=p.level,c=Math.max(p.totalIncoming,p.totalOutgoing);c/e<t.minNodeSize&&(c=e*t.minNodeSize),x(t._levelSum[f])?t._levelSum[f]+=c:t._levelSum[f]=c,x(t._levelNodesCount[f])?t._levelNodesCount[f]++:t._levelNodesCount[f]=1});var i;this.orientation=="horizontal"?i=this.chartContainer.maxHeight-1:i=this.chartContainer.maxWidth-1;var a,n;Ft(this._levelSum,function(u,p){var f=p,c=t._levelNodesCount[u],y=(i-(c-1)*t.nodePadding)/f;y==1/0&&(y=0),(n>y||!x(n))&&(n=y,t.maxSum=f,a=Kr(u))}),this._maxSumLevel=a;var s=this._levelNodesCount[this._maxSumLevel],o=(i-(s-1)*this.nodePadding)/this.maxSum;if(o==1/0&&(o=0),!x(this.valueHeight))this.valueHeight=o;else{var l=void 0;try{l=this._heightAnimation.animationOptions[0].to}catch{}if(l!=o){var d=this.interpolationDuration;try{d=this.nodes.template.states.getKey("active").transitionDuration}catch{}this._heightAnimation=new Gr(this,{property:"valueHeight",from:this.valueHeight,to:o},d,this.interpolationEasing).start(),this._disposers.push(this._heightAnimation)}}},r.prototype.validate=function(){var t=this;h.prototype.validate.call(this),this.calculateValueHeight();var e=this.nodesContainer,i={},a=this._levelNodesCount[this._maxSumLevel],n=this.dataItem.values.value.sum,s;this.orientation=="horizontal"?s=this.chartContainer.maxHeight-1:s=this.chartContainer.maxWidth-1,O(this._sorted,function(o){var l=o[1],d=l.level,u=0,p=t._levelNodesCount[d];switch(t.nodeAlign){case"bottom":u=(t.maxSum-t._levelSum[d])*t.valueHeight-(p-a)*t.nodePadding;break;case"middle":u=(t.maxSum-t._levelSum[d])*t.valueHeight/2-(p-a)*t.nodePadding/2;break}if(t.maxSum==0)switch(t.nodeAlign){case"bottom":u=s-p*(t.minNodeSize*s+t.nodePadding);break;case"middle":u=s/2-p/2*(t.minNodeSize*s+t.nodePadding);break}l.parent=e;var f,c,y,v=Math.max(l.totalIncoming,l.totalOutgoing);if(v/n<t.minNodeSize&&(v=n*t.minNodeSize),t.orientation=="horizontal"){f=(t.innerWidth-l.pixelWidth)/t._levelCount,c=f*l.level,y=i[d]||u;var g=v*t.valueHeight;n==0&&g==0&&(g=t.minNodeSize*s),l.height=g,l.minX=c,l.maxX=c,i[d]=y+g+t.nodePadding}else{f=(t.innerHeight-l.pixelHeight)/t._levelCount,c=i[d]||u,y=f*l.level;var m=v*t.valueHeight;n==0&&m==0&&(m=t.minNodeSize*s),l.width=m,l.minY=y,l.maxY=y,i[d]=c+m+t.nodePadding}l.x=c,l.y=y})},r.prototype.showReal=function(t){var e=this;if(!this.preventShow){if(this.interpolationDuration>0){var i=this.nodesContainer,a=0;O(this.links.iterator(),function(n){n.hide(0)}),O(this._sorted,function(n){var s=n[1],o;e.orientation=="horizontal"?(s.dx=-(i.pixelWidth-s.pixelWidth)/Math.max(e._levelCount,1),o="dx"):(s.dy=-(i.pixelHeight-s.pixelHeight)/Math.max(e._levelCount,1),o="dy");var l=0,d=e.interpolationDuration;e.sequencedInterpolation&&(l=e.sequencedInterpolationDelay*a+d*a/Zr(e.nodes.iterator())),s.opacity=0,s.invalidateLinks(),s.animate([{property:"opacity",from:0,to:1},{property:o,to:0}],e.interpolationDuration,e.interpolationEasing).delay(l),O(s.outgoingDataItems.iterator(),function(u){var p=u.link.show(e.interpolationDuration);p&&!p.isFinished()&&p.delay(l)}),O(s.incomingDataItems.iterator(),function(u){if(!u.fromNode){var p=u.link.show(e.interpolationDuration);p&&!p.isFinished()&&p.delay(l)}}),a++})}return h.prototype.showReal.call(this)}},r.prototype.changeSorting=function(){var t=this;this.sortNodes();var e={};O(this._sorted,function(i){var a=i[1],n=a.level,s=(t.maxSum-t._levelSum[n])*t.valueHeight/2,o,l;t.orientation=="horizontal"?(o="y",l=a.pixelHeight):(o="x",l=a.pixelWidth),a.animate({property:o,to:e[n]||s},t.interpolationDuration,t.interpolationEasing),e[n]=(e[n]||s)+l+t.nodePadding,a.invalidateLinks()})},r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Sankey diagram"))},r.prototype.createDataItem=function(){return new pa},Object.defineProperty(r.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(t){this.setPropertyValue("nodeAlign",t),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0);var e=this.nodes.template.nameLabel;t=="vertical"?(this.nodes.template.width=void 0,e.label.horizontalCenter="middle",e.locationX=.5):(this.nodes.template.height=void 0,e.label.horizontalCenter="left",e.locationX=1)},enumerable:!0,configurable:!0}),r.prototype.createNode=function(){var t=new Ei;return this._disposers.push(t),t},r.prototype.createLink=function(){var t=new Hi;return this._disposers.push(t),t},Object.defineProperty(r.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(t){t!=this._valueHeight&&(this._valueHeight=t,this.invalidate())},enumerable:!0,configurable:!0}),r.prototype.disposeData=function(){h.prototype.disposeData.call(this),this._sorted=this.nodes.iterator()},r}(ei);T.registeredClasses.SankeyDiagram=fa;var Ui=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="ChordNode";var e=t.createChild(Ce);e.location=.5,e.radius=5,e.text="{name}",e.zIndex=1,e.shouldClone=!1,t.label=e,t.layout="none",t.events.on("positionchanged",t.updateRotation,t,!1),t.isMeasured=!1,t.slice=t.createChild(Ue),t.slice.isMeasured=!1;var i=t.hiddenState;return i.properties.fill=new pt().getFor("disabledBackground"),i.properties.opacity=.5,i.properties.visible=!0,t.setStateOnChildren=!1,t.slice.hiddenState.properties.visible=!0,t.adapter.add("tooltipX",function(a,n){return n.slice.ix*(n.slice.radius-(n.slice.radius-n.slice.pixelInnerRadius)/2)}),t.adapter.add("tooltipY",function(a,n){return n.slice.iy*(n.slice.radius-(n.slice.radius-n.slice.pixelInnerRadius)/2)}),t}return r.prototype.invalidateLinks=function(){var t=this;h.prototype.invalidateLinks.call(this);var e=this.label,i=this.slice,a=this.chart;if(a&&i){var n=this.total,s=i.arc,o=i.startAngle;this.children.each(function(u){if(u instanceof Kt){var p=u.locationX;x(p)||(p=.5);var f=u.locationY;x(f)||(f=1);var c=o+s*p,y=f*i.radius;u.x=y*k(c),u.y=y*V(c)}});var l=o+s*e.location,d=o+(1-n/this.adjustedTotal)*s*.5;st(d)&&(d=o),e.fixPosition(l,i.radius),this.nextAngle=d,this._outgoingSorted&&O(this._outgoingSorted,function(u){var p=u.link;p.parent=t.chart.linksContainer;var f=u.getWorkingValue("value");if(x(f)){if(a.nonRibbon){var c=p.percentWidth;x(c)||(c=5),c=c/100,p.startAngle=o+s/2-s/2*c,p.arc=s*c}else p.arc=f*a.valueAngle,p.startAngle=t.nextAngle,t.nextAngle+=p.arc;u.toNode||(p.endAngle=p.startAngle),p.radius=i.pixelInnerRadius}}),this._incomingSorted&&O(this._incomingSorted,function(u){var p=u.link;if(p.radius=i.pixelInnerRadius,a.nonRibbon){var f=p.percentWidth;x(f)||(f=5),f=f/100,p.endAngle=o+s/2-s/2*f,p.arc=s*f}else{p.endAngle=t.nextAngle;var c=u.getWorkingValue("value");x(c)&&(p.arc=c*a.valueAngle,t.nextAngle+=p.arc)}u.fromNode||(p.startAngle=p.endAngle)})}},r.prototype.updateRotation=function(){var t=this.slice,e=this.trueStartAngle+t.arc/2,i=t.radius,a=i*k(e),n=i*V(e),s=ct({x:a+this.pixelX,y:n+this.pixelY});t.startAngle=this.trueStartAngle+(s-e),this.dx=-this.pixelX,this.dy=-this.pixelY},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.label.copyFrom(t.label),this.slice.copyFrom(t.slice)},r}(Ae);T.registeredClasses.ChordNode=Ui;var ca=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="QuadraticCurve",t.element=t.paper.add("path"),t.pixelPerfect=!1,t.fill=Ut(),t.applyTheme(),t}return r.prototype.draw=function(){if(x(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var t={x:this.x1,y:this.y1},e={x:this.x2,y:this.y2},i={x:this.cpx,y:this.cpy},a=W(t)+It(e,i);this.path=a}},Object.defineProperty(r.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(t){this.setPropertyValue("cpx",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(t){this.setPropertyValue("cpy",t,!0)},enumerable:!0,configurable:!0}),r.prototype.positionToPoint=function(t){var e={x:this.x1,y:this.y1},i={x:this.cpx,y:this.cpy},a={x:this.x2,y:this.y2},n=ci(e,a,i,t),s=ci(e,a,i,t+.001);return{x:n.x,y:n.y,angle:ct(n,s)}},r}(Ct),Ki=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ChordLink",t.middleLine=t.createChild(ca),t.middleLine.shouldClone=!1,t.middleLine.strokeOpacity=0,t.applyTheme(),t}return r.prototype.validate=function(){if(h.prototype.validate.call(this),!this.isTemplate){var t=this.startAngle,e=this.endAngle,i=this.arc,a=this.radius,n=this.dataItem.fromNode,s=this.dataItem.toNode,o=0,l=0;n&&(o=n.pixelX+n.dx,l=n.pixelY+n.dy);var d=0,u=0;if(s&&(d=s.pixelX+s.dx,u=s.pixelY+s.dy),a>0){var p=a*k(t)+o,f=a*V(t)+l,c=a*k(e)+d,y=a*V(e)+u,v={x:0,y:0},g=W({x:p,y:f});g+=rt(t,i,a),g+=It({x:c,y},v),g+=rt(e,i,a),g+=It({x:p,y:f},v),i>0?this.link.path=g:this.link.path="",this.maskBullets&&(this.bulletsMask.path=g,this.bulletsContainer.mask=this.bulletsMask);var m=t+i/2,b=e+i/2,D=this.middleLine;D.x1=a*k(m)+o,D.y1=a*V(m)+l,D.x2=a*k(b)+d,D.y2=a*V(b)+u,D.cpx=0,D.cpy=0,D.stroke=this.fill,this.positionBullets()}}},Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(t){this.setPropertyValue("arc",t,!0)},enumerable:!0,configurable:!0}),r}(De);T.registeredClasses.ChordLink=Ki;var ya=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ChordDiagramDataItem",t.applyTheme(),t}return r}(ti),va=function(h){S(r,h);function r(){var t=h.call(this)||this;t.valueAngle=0,t.className="ChordDiagram",t.startAngle=-90,t.endAngle=270,t.radius=R(80),t.innerRadius=-15,t.nodePadding=5;var e=t.chartContainer.createChild(H);return e.align="center",e.valign="middle",e.shouldClone=!1,e.layout="absolute",t.chordContainer=e,t.nodesContainer.parent=e,t.linksContainer.parent=e,t.chartContainer.events.on("maxsizechanged",t.invalidate,t,!1),t.applyTheme(),t}return r.prototype.validate=function(){var t=this,e=this.chartContainer,i=this.endAngle,a=this.startAngle+this.nodePadding/2,n=Dt(this.startAngle,this.endAngle,1),s={x:0,y:0,width:0,height:0};n=ze([n,s]);var o=Math.min(e.innerWidth/n.width,e.innerHeight/n.height);x(o)||(o=0);var l=q(this.radius,o),d=q(this.innerRadius,l,!0),u=this.dataItem.values.value.sum,p=0,f=0;O(this._sorted,function(c){var y=c[1];t.getNodeValue(y),p++;var v=y.total;y.total/u<t.minNodeSize&&(v=u*t.minNodeSize),f+=v}),this.valueAngle=(i-this.startAngle-this.nodePadding*p)/f,O(this._sorted,function(c){var y=c[1],v=y.slice;v.radius=l,v.innerRadius=d;var g=y.total;y.total/u<t.minNodeSize&&(g=u*t.minNodeSize),y.adjustedTotal=g;var m;t.nonRibbon?m=(i-t.startAngle)/p-t.nodePadding:m=t.valueAngle*g,v.arc=m,v.startAngle=a,y.trueStartAngle=a,y.parent=t.nodesContainer,y.validate(),a+=m+t.nodePadding}),this.chordContainer.definedBBox={x:l*n.x,y:l*n.y,width:l*n.width,height:l*n.height},this.chordContainer.invalidateLayout(),h.prototype.validate.call(this)},r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Chord diagram"))},r.prototype.createDataItem=function(){return new ya},Object.defineProperty(r.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(t){this.setPropertyValue("nonRibbon",t,!0),this.links.template.middleLine.strokeOpacity=1,this.links.template.link.fillOpacity=0},enumerable:!0,configurable:!0}),r.prototype.createNode=function(){var t=new Ui;return this._disposers.push(t),t},r.prototype.createLink=function(){var t=new Ki;return this._disposers.push(t),t},r}(ei);T.registeredClasses.ChordDiagram=va;var Xt=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="Column",t.width=R(80),t.height=R(80),t.events.disableType("transformed"),t.applyOnClones=!0,t.strokeOpacity=1,t.layout="none",t.createAssets(),t.events.on("childadded",t.handleKidAdded,t,!1),t}return r.prototype.handleKidAdded=function(){this.layout=="none"&&(this.layout="absolute")},r.prototype.createAssets=function(){this.column=this.createChild(me),this.column.shouldClone=!1,this.column.isMeasured=!1,this.column.cornerRadius(0,0,0,0),this._disposers.push(this.column)},r.prototype.validate=function(){h.prototype.validate.call(this);var t=this.column;t&&(t.width=tt(this.pixelWidth,this.maxWidth),t.height=tt(this.pixelHeight,this.maxHeight),t.invalid&&t.validate())},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.column&&this.column.copyFrom(t.column)},Object.defineProperty(r.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.column?{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}:{x:0,y:0,width:tt(this.pixelWidth,this.maxWidth),height:tt(this.pixelHeight,this.maxHeight)}},enumerable:!0,configurable:!0}),r}(H);T.registeredClasses.Column=Xt;var Tt=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ColumnSeriesDataItem",t.locations.dateX=.5,t.locations.dateY=.5,t.locations.categoryX=.5,t.locations.categoryY=.5,t.applyTheme(),t}return Object.defineProperty(r.prototype,"column",{get:function(){return this._column},set:function(t){this.setColumn(t)},enumerable:!0,configurable:!0}),r.prototype.setColumn=function(t){var e=this;if(this._column&&t!=this._column&&_i(this.sprites,this._column),this._column=t,t){var i=t.dataItem;i&&i!=this&&(i.column=void 0),this.addSprite(t),this._disposers.push(new wt(function(){e.component&&e.component.columns.removeValue(t)}))}},Object.defineProperty(r.prototype,"width",{get:function(){var t=this.properties.width;return this._adapterO&&(t=this._adapterO.apply("width",t)),t},set:function(t){this.properties.width!=t&&(this.properties.width=t,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){var t=this.properties.height;return this._adapterO&&(t=this._adapterO.apply("height",t)),t},set:function(t){this.properties.height!=t&&(this.properties.height=t,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rangesColumns",{get:function(){return this._rangesColumns||(this._rangesColumns=new Et),this._rangesColumns},enumerable:!0,configurable:!0}),r}(xe),Yt=function(h){S(r,h);function r(){var t=h.call(this)||this;t._startLocation=0,t._endLocation=1,t.className="ColumnSeries",t.width=R(100),t.height=R(100),t.strokeOpacity=0,t.fillOpacity=1,t.clustered=!0;var e=t.mainContainer.createChild(H);return e.shouldClone=!1,e.isMeasured=!1,e.layout="none",t._columnsContainer=e,t.columns.template.pixelPerfect=!1,t.tooltipColorSource=t.columns.template,t.applyTheme(),t}return Object.defineProperty(r.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:!0,configurable:!0}),r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Column Series"))},r.prototype.createDataItem=function(){return new Tt},r.prototype.validate=function(){var t=this;if(this.group.node.removeAttribute("fill"),this.chart&&this.xAxis&&this.yAxis){var e=this.chart.series,i=0,a=0,n=[];O(e.iterator(),function(y){if(y instanceof r&&t.baseAxis==y.baseAxis){var v;t.baseAxis==t.xAxis?v=t.chart.yAxes.indexOf(y.yAxis):v=t.chart.xAxes.indexOf(y.xAxis),n.push({series:y,axis:v})}}),n.sort(function(y,v){return y.axis-v.axis});var s;Z(n,function(y){var v=y.series;v instanceof r&&((!v.stacked&&v.clustered||s!=y.axis&&v.clustered)&&i++,v==t&&(a=i-1)),s=y.axis}),this.clustered||(a=0,i=1);var o=this.baseAxis.renderer,l=o.cellStartLocation,d=o.cellEndLocation;this._startLocation=l+a/i*(d-l),this._endLocation=l+(a+1)/i*(d-l);var u=this.xAxis,p=this.yAxis;u instanceof E&&p instanceof M&&u.sortBySeries==this&&this.sortCategoryAxis(u,"valueY"),p instanceof E&&u instanceof M&&p.sortBySeries==this&&this.sortCategoryAxis(p,"valueX")}h.prototype.validate.call(this);for(var f=0;f<this.startIndex;f++){var c=this.dataItems.getIndex(f);this.disableUnusedColumns(c)}for(var f=this.dataItems.length-1;f>this.endIndex;f--){var c=this.dataItems.getIndex(f);this.disableUnusedColumns(c)}this._propertiesChanged=!1},r.prototype.sortCategoryAxis=function(t,e){var i=this;this.dataItems.values.sort(function(n,s){return s.values[e].workingValue-n.values[e].workingValue});var a=0;this.dataItems.each(function(n){n._index=a,a++}),t.dataItems.each(function(n){var s=n.component,o=s.categoryToPosition(n.category)-n.deltaPosition,l=s.getSeriesDataItemByCategory(n.category,i);if(l){var d=i.dataItems.indexOf(l);n._index=d;var u=j((d+.5)/i.dataItems.length-o,3);n.deltaAnimation&&!n.deltaAnimation.isDisposed()&&n.deltaAnimation.animationOptions[0].to==u||u!=j(n.deltaPosition,3)&&(n.deltaAnimation&&n.deltaAnimation.stop(),n.deltaAnimation=n.animate({property:"deltaPosition",from:-u,to:0},s.interpolationDuration,s.interpolationEasing),i._disposers.push(n.deltaAnimation))}}),t.dataItems.values.sort(function(n,s){return n.index-s.index})},r.prototype.validateDataElement=function(t){this.chart&&this.xAxis&&this.yAxis&&(this.validateDataElementReal(t),h.prototype.validateDataElement.call(this,t))},r.prototype.getStartLocation=function(t){var e=this._startLocation;return this.baseAxis==this.xAxis?e+=t.locations[this.xOpenField]-.5:e+=t.locations[this.yOpenField]-.5,e},r.prototype.getEndLocation=function(t){var e=this._endLocation;return this.baseAxis==this.xAxis?e+=t.locations[this.xField]-.5:e+=t.locations[this.yField]-.5,e},r.prototype.validateDataElementReal=function(t){var e=this,i,a,n,s,o=this.getStartLocation(t),l=this.getEndLocation(t),d=this.xField,u=this.xOpenField,p=this.yField,f=this.yOpenField,c=this.columns.template,y=c.percentWidth,v=c.percentHeight,g=c.pixelWidth,m=c.pixelHeight,b=c.maxWidth,D=c.maxHeight,C=c.pixelPaddingLeft,_=c.pixelPaddingRight,P=c.pixelPaddingTop,I=c.pixelPaddingBottom,F=!1,z=t.width;A(z)&&(x(z)&&(g=z),z instanceof yt&&(y=z.value*100));var X=t.height;if(A(X)&&(x(X)&&(m=X),X instanceof yt&&(v=X.value*100)),this.xAxis instanceof E&&this.yAxis instanceof E){if(!t.hasValue(this._xValueFields)||!t.hasValue(this._yValueFields))return;if(o=0,l=1,!st(y)){var w=j((l-o)*(1-y/100)/2,5);o+=w,l-=w}if(i=this.xAxis.getX(t,u,o),a=this.xAxis.getX(t,d,l),st(y)){var w=(a-i-g)/2;i+=w,a-=w}if(!st(b)&&b<Math.abs(a-i)){var w=(a-i-b)/2;i+=w,a-=w}if(o=0,l=1,!st(v)){var w=j((1-v/100)/2,5);o+=w,l-=w}if(n=this.yAxis.getY(t,f,o),s=this.yAxis.getY(t,p,l),st(v)){var w=(s-n-m)/2;s+=w,n-=w}if(!st(D)&&D<Math.abs(s-n)){var w=(s-n-D)/2;s+=w,n-=w}a=this.fixHorizontalCoordinate(a),i=this.fixHorizontalCoordinate(i),n=this.fixVerticalCoordinate(n),s=this.fixVerticalCoordinate(s)}else if(this.baseAxis==this.xAxis){if(!t.hasValue(this._yValueFields))return;if(!st(y)){var w=j((l-o)*(1-y/100)/2,5);o+=w,l-=w}if(i=this.xAxis.getX(t,u,o),a=this.xAxis.getX(t,d,l),st(y)){var w=(a-i-g)/2;i+=w,a-=w}if(!st(b)&&b<Math.abs(a-i)){var w=(a-i-b)/2;i+=w,a-=w}var ft=t.locations[f],Pt=t.locations[p];this.yAxis instanceof M&&this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(ft=0,Pt=0),s=this.yAxis.getY(t,f,ft),n=this.yAxis.getY(t,p,Pt);var gt=Math.ceil(this.yAxis.axisLength);(n<0&&s<0||n>gt&&s>gt)&&(F=!0),n=this.fixVerticalCoordinate(n),s=this.fixVerticalCoordinate(s),Math.abs(a-i)-C-_==0&&(F=!0)}else{if(!t.hasValue(this._xValueFields))return;if(!st(v)){var w=j((l-o)*(1-v/100)/2,5);o+=w,l-=w}if(n=this.yAxis.getY(t,f,o),s=this.yAxis.getY(t,p,l),st(v)){var w=(s-n-m)/2;s-=w,n+=w}if(!st(D)&&D<Math.abs(s-n)){var w=(s-n-D)/2;s-=w,n+=w}var se=t.locations[d],nt=t.locations[u];this.xAxis instanceof M&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(se=0,nt=0),a=this.xAxis.getX(t,d,se),i=this.xAxis.getX(t,u,nt);var gt=Math.ceil(this.xAxis.axisLength);(a<0&&i<0||a>gt&&i>gt)&&(F=!0),a=this.fixHorizontalCoordinate(a),i=this.fixHorizontalCoordinate(i),Math.abs(n-s)-P-I==0&&(F=!0)}var Vt=Math.abs(a-i),kt=Math.abs(s-n),jt=Math.min(i,a),Wt=Math.min(n,s);if(F)this.disableUnusedColumns(t);else{var Y;t.column?(Y=t.column,this._propertiesChanged&&($(this,Y,G),$(this.columns.template,Y,G),Z(G,function(ut){Y[ut]=Y[ut]}))):(Y=this.columns.create(),$(this,Y,G),$(this.columns.template,Y,G),t.addSprite(Y),t.column=Y,Y.paper=this.paper,this.itemsFocusable()?(A(this.role)||(this.role="menu"),A(Y.role)||(Y.role="menuitem"),Y.focusable=!0):(A(this.role)||(this.role="list"),A(Y.role)||(Y.role="listitem"),Y.focusable=!1),Y.focusable&&(Y.events.on("focus",function(ut){Y.readerTitle=e.populateString(e.itemReaderText,t)},void 0,!1),Y.events.on("blur",function(ut){Y.readerTitle=""},void 0,!1)),Y.hoverable&&(Y.events.on("over",function(ut){Y.readerTitle=e.populateString(e.itemReaderText,t)},void 0,!1),Y.events.on("out",function(ut){Y.readerTitle=""},void 0,!1)),Y.parent=this.columnsContainer,Y.virtualParent=this),Y.width=Vt,Y.height=kt,Y.x=jt,Y.y=Wt,Y.realX=i,Y.realY=n,Y.realWidth=a-i,Y.realHeight=s-n,this.setColumnStates(Y),Y.invalid&&Y.validate(),Y.__disabled=!1,O(this.axisRanges.iterator(),function(ut){var et=t.rangesColumns.getKey(ut.uid);et||(et=e.columns.create(),$(ut.contents,et,G),t.addSprite(et),t.rangesColumns.setKey(ut.uid,et),et.paper=e.paper),et.parent=ut.contents,et.width=Vt,et.height=kt,et.x=jt,et.y=Wt,e.setColumnStates(et),et.invalid&&et.validate(),et.__disabled=!1})}t.itemWidth=Vt,t.itemHeight=kt},r.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.width=0,t.column.height=0,t.column.__disabled=!0),O(this.axisRanges.iterator(),function(e){var i=t.rangesColumns.getKey(e.uid);i&&(i.width=0,i.height=0,i.__disabled=!0)}))},r.prototype.setColumnStates=function(t){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var e=t.dataItem;if(this.xAxis instanceof M||this.yAxis instanceof M){var i,a=void 0,n=void 0;this.baseAxis==this.yAxis?(this.xOpenField&&this.xField&&this.xAxis instanceof M&&(i=e.getValue(this.xOpenField),a=e.getValue(this.xField)),n=e.getValue(this.xAxis.axisFieldName+"X","previousChange")):(this.yOpenField&&this.yField&&this.yAxis instanceof M&&(i=e.getValue(this.yOpenField),a=e.getValue(this.yField)),n=e.getValue(this.yAxis.axisFieldName+"Y","previousChange")),a<i?(e.droppedFromOpen=!0,t.defaultState.copyFrom(this._dropFromOpenState),t.setState(this._dropFromOpenState,0)):(e.droppedFromOpen=!1,t.defaultState.copyFrom(this._riseFromOpenState),t.setState(this._riseFromOpenState,0)),n<0?(e.droppedFromPrevious=!0,t.defaultState.copyFrom(this._dropFromPreviousState),t.setState(this._dropFromPreviousState,0)):(e.droppedFromPrevious=!1,t.defaultState.copyFrom(this._riseFromPreviousState),t.setState(this._riseFromPreviousState,0))}}},Object.defineProperty(r.prototype,"columns",{get:function(){return this._columns||(this._columns=new vt(this.createColumnTemplate()),this._disposers.push(new dt(this._columns)),this._disposers.push(this._columns.template)),this._columns},enumerable:!0,configurable:!0}),r.prototype.createColumnTemplate=function(){return new Xt},Object.defineProperty(r.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(t){this.setPropertyValue("clustered",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropFromOpenState",{get:function(){return this._dropFromOpenState||(this._dropFromOpenState=this.states.create("dropFromOpenState")),this._dropFromOpenState},set:function(t){this._dropFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropFromPreviousState",{get:function(){return this._dropFromPreviousState||(this._dropFromPreviousState=this.states.create("dropFromPreviousState")),this._dropFromPreviousState},set:function(t){this._dropFromPreviousState=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"riseFromOpenState",{get:function(){return this._riseFromOpenState||(this._riseFromOpenState=this.states.create("riseFromOpenState")),this._riseFromOpenState},set:function(t){this._riseFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"riseFromPreviousState",{get:function(){return this._riseFromPreviousState||(this._riseFromPreviousState=this.states.create("riseFromPreviousState")),this._riseFromPreviousState},set:function(t){this._riseFromPreviousState=t},enumerable:!0,configurable:!0}),r.prototype.updateLegendValue=function(t,e){var i=this;if(h.prototype.updateLegendValue.call(this,t,e),this.legendDataItem){var a=this.legendDataItem.marker,n,s;t&&(t.droppedFromOpen?n=this._dropFromOpenState:n=this._riseFromOpenState,t.droppedFromPrevious?s=this._dropFromPreviousState:s=this._riseFromPreviousState),O(a.children.iterator(),function(o){t?(o.setState(s),o.setState(n)):(o.setState(i._riseFromPreviousState),o.setState(i._riseFromOpenState))})}},r.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var a=t.createChild(me);a.shouldClone=!1,$(this,a,G),a.copyFrom(this.columns.template),a.padding(0,0,0,0),a.width=e,a.height=i;var n=t.dataItem;n.color=this.fill,n.colorOrig=this.fill},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.columns.template.copyFrom(t.columns.template)},r.prototype.getBulletLocationX=function(t,e){if(this.baseAxis==this.xAxis){var i=t.locationX;x(i)||(i=.5);var a=this.getEndLocation(t.dataItem),n=this.getStartLocation(t.dataItem);return a-(a-n)*i}else return h.prototype.getBulletLocationX.call(this,t,e)},r.prototype.getBulletLocationY=function(t,e){if(this.baseAxis==this.yAxis){var i=t.locationY;x(i)||(i=.5);var a=this.getEndLocation(t.dataItem),n=this.getStartLocation(t.dataItem);return a-(a-n)*i}else return h.prototype.getBulletLocationY.call(this,t,e)},r.prototype.getAdjustedXLocation=function(t,e,i){return x(i)||(t?i=t.locations[e]:i=.5),this._endLocation-(this._endLocation-this._startLocation)*(1-i)},r.prototype.getAdjustedYLocation=function(t,e,i){return x(i)||(t?i=t.locations[e]:i=.5),this._endLocation-(this._endLocation-this._startLocation)*i},r.prototype.fixVerticalCoordinate=function(t){var e=this.columns.template.pixelPaddingBottom,i=this.columns.template.pixelPaddingTop,a=-i,n=this.yAxis.axisLength+e;return N(t,a,n)},r.prototype.fixHorizontalCoordinate=function(t){var e=this.columns.template.pixelPaddingLeft,i=this.columns.template.pixelPaddingRight,a=-e,n=this.xAxis.axisLength+i;return N(t,a,n)},r.prototype.disposeData=function(){h.prototype.disposeData.call(this),this.columns.clear()},r}(Mt);T.registeredClasses.ColumnSeries=Yt;T.registeredClasses.ColumnSeriesDataItem=Tt;var Gi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="TreeMapSeriesDataItem",t.applyTheme(),t}return Object.defineProperty(r.prototype,"parentName",{get:function(){var t=this.treeMapDataItem;if(t&&t.parent)return t.parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){var t=this.treeMapDataItem;if(t)return t.value},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:!0,configurable:!0}),r.prototype.hide=function(t,e,i,a){var n=this.treeMapDataItem;return n&&n.hide(t),h.prototype.hide.call(this,t,e,i,a)},r.prototype.show=function(t,e,i){var a=this.treeMapDataItem;return a&&a.show(t,e,i),h.prototype.show.call(this,t,e,i)},r}(Tt),Le=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="TreeMapSeries",t.applyTheme(),t.fillOpacity=1,t.strokeOpacity=1,t.minBulletDistance=0,t.columns.template.tooltipText="{parentName} {name}: {value}",t.columns.template.configField="config";var e=new pt;return t.stroke=e.getFor("background"),t.dataFields.openValueX="x0",t.dataFields.valueX="x1",t.dataFields.openValueY="y0",t.dataFields.valueY="y1",t.sequencedInterpolation=!1,t.showOnInit=!1,t.columns.template.pixelPerfect=!1,t}return r.prototype.processDataItem=function(t,e){e.seriesDataItem=t,h.prototype.processDataItem.call(this,t,e)},r.prototype.createDataItem=function(){return new Gi},r.prototype.show=function(t){if(!this.preventShow){var e=this.defaultState.transitionDuration;return x(t)&&(e=t),this.dataItems.each(function(i){i.show(t)}),h.prototype.showReal.call(this,e)}},r.prototype.hide=function(t){var e=this.defaultState.transitionDuration;x(t)&&(e=t);var i=h.prototype.hideReal.call(this,e);return this.dataItems.each(function(a){a.hide(t)}),i},r.prototype.processValues=function(){},r.prototype.getStartLocation=function(t){return 0},r.prototype.getEndLocation=function(t){return 1},r.prototype.dataChangeUpdate=function(){},r.prototype.processConfig=function(t){t&&(!A(t.dataFields)||!gi(t.dataFields))&&(t.dataFields={}),h.prototype.processConfig.call(this,t)},r.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var a=t.createChild(me);a.shouldClone=!1,$(this,a,G),a.padding(0,0,0,0),a.width=e,a.height=i;var n=t.dataItem;n.color=a.fill,n.colorOrig=a.fill},r.prototype.disableUnusedColumns=function(t){h.prototype.disableUnusedColumns.call(this,t),t.column&&(t.column.__disabled=!1)},r}(Yt);T.registeredClasses.TreeMapSeries=Le;T.registeredClasses.TreeMapSeriesDataItem=Gi;var ga=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.rows=[],t.className="TreeMapDataItem",t.values.value={workingValue:0},t.values.x0={},t.values.y0={},t.values.x1={},t.values.y1={},t.hasChildren.children=!0,t.applyTheme(),t}return Object.defineProperty(r.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,t.label&&(t.label.dataItem=this),t.valueLabel&&(t.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),r.prototype.getDuration=function(){return 0},Object.defineProperty(r.prototype,"value",{get:function(){var t=0;return!this.children||this.children.length==0?t=this.values.value.workingValue:O(this.children.iterator(),function(e){var i=e.value;x(i)&&(t+=i)}),t},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"x0",{get:function(){return this.values.x0.value},set:function(t){this.setValue("x0",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"x1",{get:function(){return this.values.x1.value},set:function(t){this.setValue("x1",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y0",{get:function(){return this.values.y0.value},set:function(t){this.setValue("y0",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y1",{get:function(){return this.values.y1.value},set:function(t){this.setValue("y1",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this.properties.name},set:function(t){this.setProperty("name",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"children",{get:function(){return this.properties.children},set:function(t){this.setProperty("children",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"color",{get:function(){var t=this.properties.color;return t==null&&this.parent&&(t=this.parent.color),t==null&&this.component&&(t=this.component.colors.getIndex(this.component.colors.step*this.index)),t},set:function(t){this.setProperty("color",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"series",{get:function(){return this._series},set:function(t){t!=this._series&&(this._series&&(this.component.series.removeValue(this._series),this._series.dispose()),this._series=t,this._disposers.push(t))},enumerable:!0,configurable:!0}),r.prototype.hide=function(t,e,i,a){this.setWorkingValue("value",0),this.children&&this.children.each(function(s){s.hide(t,e,i,a)});var n=this.seriesDataItem;return n&&n.bullets.each(function(s,o){o.hide(),o.preventShow=!0}),h.prototype.hide.call(this,t,e,i,a)},r.prototype.show=function(t,e,i){this.setWorkingValue("value",this.values.value.value),this.children&&this.children.each(function(n){n.show(t,e,i)});var a=this.seriesDataItem;return a&&a.bullets.each(function(n,s){s.preventShow=!1}),h.prototype.show.call(this,t,e,i)},r}(Ke),ma=function(h){S(r,h);function r(){var t=h.call(this)||this;t.layoutAlgorithm=t.squarify,t.zoomable=!0,t.className="TreeMap",t._usesData=!0,t.maxLevels=2,t.currentLevel=0,t.hideParentColumns=!1,t.colors=new Ee,t.sorting="descending";var e=t.xAxes.push(new M);e.title.disabled=!0,e.strictMinMax=!0;var i=e.renderer;i.inside=!0,i.labels.template.disabled=!0,i.ticks.template.disabled=!0,i.grid.template.disabled=!0,i.axisFills.template.disabled=!0,i.minGridDistance=100,i.line.disabled=!0,i.baseGrid.disabled=!0;var a=t.yAxes.push(new M);a.title.disabled=!0,a.strictMinMax=!0;var n=a.renderer;n.inside=!0,n.labels.template.disabled=!0,n.ticks.template.disabled=!0,n.grid.template.disabled=!0,n.axisFills.template.disabled=!0,n.minGridDistance=100,n.line.disabled=!0,n.baseGrid.disabled=!0,n.inversed=!0,t.xAxis=e,t.yAxis=a;var s=new Le;return t.seriesTemplates=new Di(s),s.virtualParent=t,t._disposers.push(new Si(t.seriesTemplates)),t._disposers.push(s),t.zoomOutButton.events.on("hit",function(){t.zoomToChartDataItem(t._homeDataItem)},void 0,!1),t.seriesTemplates.events.on("insertKey",function(o){o.newValue.isTemplate=!0},void 0,!1),t.applyTheme(),t}return Object.defineProperty(r.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(t){var e=this;this._navigationBar!=t&&(this._navigationBar=t,t.parent=this,t.toBack(),t.links.template.events.on("hit",function(i){var a=i.target.dataItem.dataContext;a.isDisposed()||(e.zoomToChartDataItem(a),e.createTreeSeries(a))},void 0,!0),this._disposers.push(t))},enumerable:!0,configurable:!0}),r.prototype.validateData=function(){this.series.clear(),this._tempSeries=[],h.prototype.validateData.call(this),this._homeDataItem&&this._homeDataItem.dispose();var t=this.dataItems.template.clone();this._homeDataItem=t,O(this.dataItems.iterator(),function(a){a.parent=t}),t.children=this.dataItems,t.x0=0,t.y0=0,t.name=this._homeText;var e=1e3,i=Math.round(e*this.pixelHeight/this.pixelWidth/10)*10||1e3;t.x1=e,t.y1=i,this.xAxis.min=0,this.xAxis.max=e,this.xAxis.getMinMax(),this.yAxis.min=0,this.yAxis.max=i,this.yAxis.getMinMax(),this.layoutItems(t),this.createTreeSeries(t),this.feedLegend()},r.prototype.layoutItems=function(t,e){if(t){var i=t.children;e||(e=this.sorting),e=="ascending"&&i.values.sort(function(o,l){return o.value-l.value}),e=="descending"&&i.values.sort(function(o,l){return l.value-o.value}),this._updateDataItemIndexes(0),this.layoutAlgorithm(t);for(var a=0,n=i.length;a<n;a++){var s=i.getIndex(a);s.children&&this.layoutItems(s)}}},r.prototype.createTreeSeries=function(t){var e=this;this._tempSeries=[];for(var i=[t],a=t.parent;a!=null;)this.initSeries(a),i.push(a),a=a.parent;i.reverse(),this.navigationBar&&(this.navigationBar.data=i),this.createTreeSeriesReal(t),Z(this._tempSeries,function(n){e.series.indexOf(n)==-1&&e.series.push(n),n.zIndex=n.level})},r.prototype.createTreeSeriesReal=function(t){if(t.children){var e=t.level;if(e<this.currentLevel+this.maxLevels){this.initSeries(t);for(var i=0;i<t.children.length;i++){var a=t.children.getIndex(i);a.children&&this.createTreeSeriesReal(a)}}}},r.prototype.setData=function(t){this.currentLevel=0,this.currentlyZoomed=void 0,this.xAxis.start=0,this.xAxis.end=1,this.yAxis.start=0,this.yAxis.end=1,h.prototype.setData.call(this,t)},r.prototype.seriesAppeared=function(){return!0},r.prototype.initSeries=function(t){var e=this;if(!t.series){var i=void 0,a=this.seriesTemplates.getKey(t.level.toString());a?i=a.clone():i=this.series.create(),i.dataItem.dataContext=t,i.name=t.name,i.parentDataItem=t,t.series=i;var n=t.level;i.level=n;var s=t.dataContext;s&&(i.config=s.config),this.dataUsers.removeValue(i),i.data=t.children.values,i.fill=t.color,i.columnsContainer.hide(0),i.bulletsContainer.hide(0),i.columns.template.adapter.add("fill",function(o,l){var d=l.dataItem;if(d){var u=d.treeMapDataItem;if(u)return l.fill=u.color,l.adapter.remove("fill"),u.color}}),this.zoomable&&(t.level>this.currentLevel||t.children&&t.children.length>0)&&(i.columns.template.cursorOverStyle=ve.pointer,this.zoomable&&i.columns.template.events.on("hit",function(o){var l=o.target.dataItem;t.level>e.currentLevel?e.zoomToChartDataItem(l.treeMapDataItem.parent):e.zoomToSeriesDataItem(l)},this,void 0))}this._tempSeries.push(t.series)},r.prototype.toggleBullets=function(t){var e=this;O(this.series.iterator(),function(i){e._tempSeries.indexOf(i)==-1?(i.columnsContainer.hide(),i.bulletsContainer.hide(t)):(i.columnsContainer.show(),i.bulletsContainer.show(t),i.dataItems.each(function(a){a.bullets.each(function(n,s){s.show()})}),i.level<e.currentLevel?(e.hideParentColumns&&i.columnsContainer.hide(),i.bulletsContainer.hide(t)):i.level==e.currentLevel&&e.maxLevels>1&&i.dataItems.each(function(a){a.treeMapDataItem.children&&a.bullets.each(function(n,s){s.hide()})}))})},r.prototype.zoomToSeriesDataItem=function(t){this.zoomToChartDataItem(t.treeMapDataItem)},r.prototype.zoomToChartDataItem=function(t){var e=this;t||(t=this._homeDataItem);var i=this.zoomOutButton;if(i&&(t!=this._homeDataItem?i.show():i.hide()),t&&t.children){this.xAxis.zoomToValues(t.x0,t.x1),this.yAxis.zoomToValues(t.y0,t.y1),this.currentLevel=t.level,this.currentlyZoomed=t,this.createTreeSeries(t);var a=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;a&&!a.isDisposed()&&!a.isFinished()?(this._dataDisposers.push(a),a.events.once("animationended",function(){e.toggleBullets()})):this.toggleBullets()}},r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("TreeMap chart"))},r.prototype.createDataItem=function(){return new ga},Object.defineProperty(r.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(t){this.setPropertyValue("maxLevels",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(t){this.setPropertyValue("currentLevel",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(t){this.setPropertyValue("hideParentColumns",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(t){this.setPropertyValue("sorting",t,!0)},enumerable:!0,configurable:!0}),r.prototype.createSeries=function(){return new Le},Object.defineProperty(r.prototype,"homeText",{get:function(){return this._homeText},set:function(t){this._homeText=t,this._homeDataItem&&(this._homeDataItem.name=this._homeText)},enumerable:!0,configurable:!0}),r.prototype.processConfig=function(t){if(t){if(A(t.layoutAlgorithm)&&at(t.layoutAlgorithm))switch(t.layoutAlgorithm){case"squarify":t.layoutAlgorithm=this.squarify;break;case"binaryTree":t.layoutAlgorithm=this.binaryTree;break;case"slice":t.layoutAlgorithm=this.slice;break;case"dice":t.layoutAlgorithm=this.dice;break;case"sliceDice":t.layoutAlgorithm=this.sliceDice;break;default:delete t.layoutAlgorithm;break}A(t.navigationBar)&&!A(t.navigationBar.type)&&(t.navigationBar.type="NavigationBar"),h.prototype.processConfig.call(this,t)}},r.prototype.validateLayout=function(){h.prototype.validateLayout.call(this),this.layoutItems(this.currentlyZoomed)},r.prototype.validateDataItems=function(){h.prototype.validateDataItems.call(this),this.layoutItems(this._homeDataItem),O(this.series.iterator(),function(t){t.validateRawData()}),this.zoomToChartDataItem(this._homeDataItem)},r.prototype.binaryTree=function(t){var e=t.children,i,a=e.length,n,s=new Array(a+1);for(s[0]=n=i=0;i<a;++i)s[i+1]=n+=e.getIndex(i).value;a>0&&o(0,a,t.value,t.x0,t.y0,t.x1,t.y1);function o(l,d,u,p,f,c,y){if(l>=d-1){var v=e.getIndex(l);v.x0=p,v.y0=f,v.x1=c,v.y1=y;return}for(var g=s[l],m=u/2+g,b=l+1,D=d-1;b<D;){var C=b+D>>>1;s[C]<m?b=C+1:D=C}m-s[b-1]<s[b]-m&&l+1<b&&--b;var _=s[b]-g,P=u-_;if(u==0){var v=e.getIndex(l);v.x0=p,v.y0=f,v.x1=c,v.y1=y;return}if(c-p>y-f){var I=(p*P+c*_)/u;o(l,b,_,p,f,I,y),o(b,d,P,I,f,c,y)}else{var F=(f*P+y*_)/u;o(l,b,_,p,f,c,F),o(b,d,P,p,F,c,y)}}},r.prototype.slice=function(t){for(var e=t.x0,i=t.x1,a=t.y0,n=t.y1,s=t.children,o,l=-1,d=s.length,u=t.value&&(n-a)/t.value;++l<d;)o=s.getIndex(l),o.x0=e,o.x1=i,o.y0=a,a+=o.value*u,o.y1=a},r.prototype.dice=function(t){for(var e=t.x0,i=t.x1,a=t.y0,n=t.y1,s=t.children,o,l=-1,d=s.length,u=t.value&&(i-e)/t.value;++l<d;)o=s.getIndex(l),o.y0=a,o.y1=n,o.x0=e,e+=o.value*u,o.x1=e},r.prototype.sliceDice=function(t){t.level&1?this.slice(t):this.dice(t)},r.prototype.squarify=function(t){for(var e=(1+Math.sqrt(5))/2,i=t.x0,a=t.x1,n=t.y0,s=t.y1,o=t.children,l,d=0,u=0,p=o.length,f,c,y=t.value,v,g,m,b,D,C,_;d<p;){f=a-i,c=s-n;do v=o.getIndex(u++).value;while(!v&&u<p);for(g=m=v,C=Math.max(c/f,f/c)/(y*e),_=v*v*C,D=Math.max(m/_,_/g);u<p;++u){if(v+=l=o.getIndex(u).value,l<g&&(g=l),l>m&&(m=l),_=v*v*C,b=Math.max(m/_,_/g),b>D){v-=l;break}D=b}var P=this.dataItems.template.clone();P.value=v,P.dice=f<c,P.children=o.slice(d,u),P.x0=i,P.y0=n,P.x1=a,P.y1=s,P.dice?(P.y1=y?n+=c*v/y:s,this.dice(P)):(P.x1=y?i+=f*v/y:a,this.slice(P)),y-=v,d=u}},r.prototype.handleSeriesAdded2=function(){},r.prototype.handleDataItemValueChange=function(t,e){e=="value"&&this.invalidateDataItems()},r.prototype.handleDataItemWorkingValueChange=function(t,e){e=="value"&&this.invalidateDataItems()},r.prototype.getLegendLevel=function(t){if(t&&t.children){if(t.children.length>1)return t;if(t.children.length==1){var e=t.children.getIndex(0);return e.children?this.getLegendLevel(e):t}else return t}},r.prototype.handleLegendSeriesAdded=function(t){},Object.defineProperty(r.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:!0,configurable:!0}),r.prototype.feedLegend=function(){var t=this.legend;if(t){t.dataFields.name="name";var e=this.getLegendLevel(this._homeDataItem);if(e){var i=[];e.children.each(function(a){i.push(a)}),t.data=i}}},r.prototype.disposeData=function(){h.prototype.disposeData.call(this),this._homeDataItem=void 0,this.series.clear(),this.navigationBar&&this.navigationBar.disposeData(),this.xAxis.disposeData(),this.yAxis.disposeData()},r.prototype.getExporting=function(){var t=this,e=h.prototype.getExporting.call(this);return e.adapter.add("formatDataFields",function(i){return(i.format=="csv"||i.format=="xlsx")&&A(t.dataFields.children)&&delete i.dataFields[t.dataFields.children],i}),e},r}(_t);T.registeredClasses.TreeMap=ma;var Zi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t._chart=new ot,t.className="AxisRendererX3D",t._disposers.push(t._chart),t.applyTheme(),t}return r.prototype.updateGridElement=function(t,e,i){e=e+(i-e)*t.location;var a=this.positionToPoint(e);if(t.element){var n=this.chart.dx3D||0,s=this.chart.dy3D||0,o=this.getHeight();t.path=W({x:n,y:s})+L({x:n,y:o+s})+L({x:0,y:o})}this.positionItem(t,a),this.toggleVisibility(t,e,0,1)},r.prototype.updateBaseGridElement=function(){h.prototype.updateBaseGridElement.call(this);var t=this.getHeight(),e=this.chart.dx3D||0,i=this.chart.dy3D||0;this.baseGrid.path=W({x:e,y:i})+L({x:0,y:0})+L({x:0,y:t})},Object.defineProperty(r.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){t&&this._chart.set(t,t.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),r.prototype.handle3DChanged=function(t){(t.property=="depth"||t.property=="angle")&&this.invalidate()},r}(fe);T.registeredClasses.AxisRendererX3D=Zi;var xa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t._chart=new ot,t.className="AxisRendererY3D",t._disposers.push(t._chart),t.applyTheme(),t}return r.prototype.updateGridElement=function(t,e,i){e=e+(i-e)*t.location;var a=this.positionToPoint(e);if(t.element){var n=this.chart.dx3D||0,s=this.chart.dy3D||0,o=this.getWidth();t.path=W({x:0,y:0})+L({x:n,y:s})+L({x:o+n,y:s})}this.positionItem(t,a),this.toggleVisibility(t,e,0,1)},r.prototype.updateBaseGridElement=function(){h.prototype.updateBaseGridElement.call(this);var t=this.chart.dx3D||0,e=this.chart.dy3D||0,i=this.getWidth();this.baseGrid.path=W({x:0,y:0})+L({x:i,y:0})+L({x:i+t,y:e})},Object.defineProperty(r.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){t&&this._chart.set(t,t.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),r.prototype.handle3DChanged=function(t){(t.property=="depth"||t.property=="angle")&&this.invalidate()},r}($t),qi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="Column3D",t}return r.prototype.createAssets=function(){this.column3D=this.createChild(qr),this.column3D.shouldClone=!1,this.column3D.strokeOpacity=0,this.column=this.column3D},r.prototype.validate=function(){h.prototype.validate.call(this),this.column3D&&(this.column3D.width=this.pixelWidth,this.column3D.height=this.pixelHeight,this.column3D.invalid&&this.column3D.validate())},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.column3D&&this.column3D.copyFrom(t.column3D)},r.prototype.setFill=function(t){h.prototype.setFill.call(this,t),this.column.fill=t},r}(Xt);T.registeredClasses.Column3D=qi;var ba=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ColumnSeries3DDataItem",t.applyTheme(),t}return r}(Tt),Me=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ColumnSeries3D",t.columns.template.column3D.applyOnClones=!0,t.columns.template.hiddenState.properties.visible=!0,t.applyTheme(),t}return Object.defineProperty(r.prototype,"columnsContainer",{get:function(){var t=this.chart;return t&&t.columnsContainer&&t.leftAxesContainer.layout!="vertical"&&t.rightAxesContainer.layout!="vertical"&&t.bottomAxesContainer.layout!="horizontal"&&t.topAxesContainer.layout!="horizontal"?t.columnsContainer:this._columnsContainer},enumerable:!0,configurable:!0}),r.prototype.validateDataElementReal=function(t){h.prototype.validateDataElementReal.call(this,t),t.column&&(t.column.dx=this.dx,t.column.dy=this.dy,t.column.visible=this.visible)},r.prototype.validateDataElements=function(){h.prototype.validateDataElements.call(this),this.chart&&this.chart.invalidateLayout()},r.prototype.createColumnTemplate=function(){return new qi},Object.defineProperty(r.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0);var e=this.columns.template;e.column3D.depth=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t);var e=this.columns.template;e.column3D.angle=t},enumerable:!0,configurable:!0}),r}(Yt);T.registeredClasses.ColumnSeries3D=Me;T.registeredClasses.ColumnSeries3DDataItem=ba;(function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="XYChart3DDataItem",t.applyTheme(),t}return r})(Ke);var Ca=function(h){S(r,h);function r(){var t=h.call(this)||this;t._axisRendererX=Zi,t._axisRendererY=xa,t.className="XYChart3D",t.depth=30,t.angle=30;var e=t.seriesContainer.createChild(H);return e.shouldClone=!1,e.isMeasured=!1,e.layout="none",t.columnsContainer=e,t.columnsContainer.mask=t.createChild(lt),t.applyTheme(),t}return r.prototype.updateSeriesMasks=function(){if(h.prototype.updateSeriesMasks.call(this),ye()){var t=this.columnsContainer,e=t.mask;t.mask=void 0,t.mask=e}},Object.defineProperty(r.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dx3D",{get:function(){return k(this.angle)*this.depth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dy3D",{get:function(){return-V(this.angle)*this.depth},enumerable:!0,configurable:!0}),r.prototype.validateLayout=function(){h.prototype.validateLayout.call(this),this.fixColumns()},r.prototype.fixLayout=function(){this.chartContainer.paddingTop=-this.dy3D,this.chartContainer.paddingRight=this.dx3D,this.scrollbarX&&(this.scrollbarX.dy=this.dy3D,this.scrollbarX.dx=this.dx3D),this.scrollbarY&&(this.scrollbarY.dy=this.dy3D,this.scrollbarY.dx=this.dx3D),this.fixColumns(),h.prototype.fixLayout.call(this)},r.prototype.fixColumns=function(){var t=this,e=1,i=0;O(this.series.iterator(),function(n){n instanceof Me&&(!n.clustered&&i>0&&e++,n.depthIndex=e-1,i++)});var a=0;O(this.series.iterator(),function(n){if(n instanceof Me){n.depth=t.depth/e,n.angle=t.angle,n.columnsContainer==t.columnsContainer&&(n.dx=t.depth/e*k(t.angle)*n.depthIndex,n.dy=-t.depth/e*V(t.angle)*n.depthIndex);var s=!1;(n.baseAxis==n.xAxis&&n.xAxis.renderer.inversed||n.baseAxis==n.yAxis&&n.yAxis.renderer.inversed)&&(s=!0);var o=1;n.dataItems.each(function(l){var d=l.column;d&&(s?d.zIndex=1e3*(1e3-o)+a-n.depthIndex*100:d.zIndex=1e3*o+a-n.depthIndex*100),o++}),s?a--:a++}}),this.maskColumns()},r.prototype.processConfig=function(t){if(t&&A(t.series)&&At(t.series))for(var e=0,i=t.series.length;e<i;e++)t.series[e].type=t.series[e].type||"ColumnSeries3D";h.prototype.processConfig.call(this,t)},r.prototype.maskColumns=function(){var t=this.plotContainer.pixelWidth,e=this.plotContainer.pixelHeight,i=this.dx3D,a=this.dy3D,n=W({x:0,y:0})+L({x:i,y:a})+L({x:t+i,y:a})+L({x:t+i,y:e+a})+L({x:t,y:e})+L({x:t,y:e})+L({x:0,y:e})+Lt(),s=this.columnsContainer;s&&s.mask&&(s.mask.path=n)},r}(_t);T.registeredClasses.XYChart3D=Ca;var ge=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="Candlestick",t.layout="none",t}return r.prototype.createAssets=function(){h.prototype.createAssets.call(this),this.lowLine=this.createChild(Ct),this.lowLine.shouldClone=!1,this.highLine=this.createChild(Ct),this.highLine.shouldClone=!1},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.lowLine&&this.lowLine.copyFrom(t.lowLine),this.highLine&&this.highLine.copyFrom(t.highLine)},r}(Xt);T.registeredClasses.Candlestick=ge;var ii=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.values.lowValueX={},t.values.lowValueY={},t.values.highValueX={},t.values.highValueY={},t.className="CandlestickSeriesDataItem",t.applyTheme(),t}return Object.defineProperty(r.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(t){this.setValue("lowValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(t){this.setValue("lowValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(t){this.setValue("highValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(t){this.setValue("highValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),r}(Tt),$i=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="CandlestickSeries",t.groupFields.lowValueX="low",t.groupFields.lowValueY="low",t.groupFields.highValueX="high",t.groupFields.highValueY="high",t.strokeOpacity=1;var e=new pt,i=e.getFor("positive"),a=e.getFor("negative");return t.dropFromOpenState.properties.fill=a,t.dropFromOpenState.properties.stroke=a,t.riseFromOpenState.properties.fill=i,t.riseFromOpenState.properties.stroke=i,t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Candlestick Series"))},r.prototype.createDataItem=function(){return new ii},r.prototype.validateDataElementReal=function(t){h.prototype.validateDataElementReal.call(this,t),this.validateCandlestick(t)},r.prototype.validateCandlestick=function(t){var e=t.column;if(e){var i=e.lowLine,a=e.highLine;if(this.baseAxis==this.xAxis){var n=e.pixelWidth/2;i.x=n,a.x=n;var s=t.getWorkingValue(this.yOpenField),o=t.getWorkingValue(this.yField),l=this.yAxis.getY(t,this.yOpenField),d=this.yAxis.getY(t,this.yField),u=this.yAxis.getY(t,this.yLowField),p=this.yAxis.getY(t,this.yHighField),f=e.pixelY;i.y1=u-f,a.y1=p-f,s<o?(i.y2=l-f,a.y2=d-f):(i.y2=d-f,a.y2=l-f)}if(this.baseAxis==this.yAxis){var c=e.pixelHeight/2;i.y=c,a.y=c;var y=t.getWorkingValue(this.xOpenField),v=t.getWorkingValue(this.xField),g=this.xAxis.getX(t,this.xOpenField),m=this.xAxis.getX(t,this.xField),b=this.xAxis.getX(t,this.xLowField),D=this.xAxis.getX(t,this.xHighField),C=e.pixelX;i.x1=b-C,a.x1=D-C,y<v?(i.x2=g-C,a.x2=m-C):(i.x2=m-C,a.x2=g-C)}O(this.axisRanges.iterator(),function(_){var P=t.rangesColumns.getKey(_.uid);if(P){var I=P.lowLine;I.x=i.x,I.y=i.y,I.x1=i.x1,I.x2=i.x2,I.y1=i.y1,I.y2=i.y2;var F=P.highLine;F.x=a.x,F.y=a.y,F.x1=a.x1,F.x2=a.x2,F.y1=a.y1,F.y2=a.y2}})}},Object.defineProperty(r.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:!0,configurable:!0}),r.prototype.defineFields=function(){h.prototype.defineFields.call(this);var t=this.xAxis,e=this.yAxis;if(t&&e){if(this.baseAxis==t){var i=ce(e.axisFieldName);this._yLowField="low"+i+"Y",this._yHighField="high"+i+"Y"}if(this.baseAxis==e){var a=ce(t.axisFieldName);this._xLowField="low"+a+"X",this._xHighField="high"+a+"X"}this.addValueField(t,this._xValueFields,this._xLowField),this.addValueField(t,this._xValueFields,this._xHighField),this.addValueField(e,this._yValueFields,this._yLowField),this.addValueField(e,this._yValueFields,this._yHighField)}},r.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var a=t.createChild(ge);a.shouldClone=!1,a.copyFrom(this.columns.template);var n,s,o=a.lowLine,l=a.highLine;this.baseAxis==this.yAxis?(n=e/3,s=i,o.y=i/2,l.y=i/2,o.x2=e/3,l.x2=e/3,l.x=e/3*2,a.column.x=e/3):(n=e,s=i/3,o.x=e/2,l.x=e/2,o.y2=i/3,l.y2=i/3,l.y=i/3*2,a.column.y=i/3),a.width=n,a.height=s,$(this,t,G),$(this.columns.template,a,G),a.stroke=this.riseFromOpenState.properties.stroke,a.fill=a.stroke;var d=t.dataItem;d.color=a.fill,d.colorOrig=a.fill},r.prototype.createColumnTemplate=function(){return new ge},r}(Yt);T.registeredClasses.CandlestickSeries=$i;T.registeredClasses.CandlestickSeriesDataItem=ii;var Xe=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="OHLC",t.layout="none",t}return r.prototype.createAssets=function(){this.openLine=this.createChild(Ct),this.openLine.shouldClone=!1,this.highLowLine=this.createChild(Ct),this.highLowLine.shouldClone=!1,this.closeLine=this.createChild(Ct),this.closeLine.shouldClone=!1},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.openLine&&this.openLine.copyFrom(t.openLine),this.highLowLine&&this.highLowLine.copyFrom(t.highLowLine),this.closeLine&&this.closeLine.copyFrom(t.closeLine)},r}(ge);T.registeredClasses.OHLC=Xe;var Ji=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="OHLCSeriesDataItem",t.applyTheme(),t}return r}(ii),Pa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="OHLCSeries",t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("OHLC Series"))},r.prototype.createDataItem=function(){return new Ji},r.prototype.validateCandlestick=function(t){var e=t.column;if(e){var i=e.openLine,a=e.highLowLine,n=e.closeLine;if(this.baseAxis==this.xAxis){var s=e.pixelWidth/2;a.x=s,t.getWorkingValue(this.yOpenField),t.getWorkingValue(this.yField);var o=this.yAxis.getY(t,this.yOpenField),l=this.yAxis.getY(t,this.yField),d=this.yAxis.getY(t,this.yLowField),u=this.yAxis.getY(t,this.yHighField),p=e.pixelY;i.y1=o-p,i.y2=o-p,i.x1=0,i.x2=s,n.y1=l-p,n.y2=l-p,n.x1=s,n.x2=2*s,a.y1=u-p,a.y2=d-p}if(this.baseAxis==this.yAxis){var f=e.pixelHeight/2;a.y=f,t.getWorkingValue(this.xOpenField),t.getWorkingValue(this.xField);var c=this.xAxis.getX(t,this.xOpenField),y=this.xAxis.getX(t,this.xField),v=this.xAxis.getX(t,this.xLowField),g=this.xAxis.getX(t,this.xHighField),m=e.pixelX;i.x1=c-m,i.x2=c-m,i.y1=f,i.y2=2*f,n.x1=y-m,n.x2=y-m,n.y1=0,n.y2=f,a.x1=g-m,a.x2=v-m}O(this.axisRanges.iterator(),function(b){var D=t.rangesColumns.getKey(b.uid);if(D){var C=D.openLine;C.x=i.x,C.y=i.y,C.x1=i.x1,C.x2=i.x2,C.y1=i.y1,C.y2=i.y2;var _=D.closeLine;_.x=n.x,_.y=n.y,_.x1=n.x1,_.x2=n.x2,_.y1=n.y1,_.y2=n.y2;var P=D.highLowLine;P.x=a.x,P.y=a.y,P.x1=a.x1,P.x2=a.x2,P.y1=a.y1,P.y2=a.y2}})}},r.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var a=t.createChild(Xe);a.shouldClone=!1,a.copyFrom(this.columns.template);var n,s,o=a.openLine,l=a.closeLine,d=a.highLowLine;this.baseAxis==this.yAxis?(n=e/3,s=i,d.y=i/2,d.x2=e,o.x=e/3*2,o.y2=i/2,l.x=e/3,l.y2=i,l.y1=i/2):(n=e,s=i/3,d.x=e/2,d.y2=i,o.y=i/3*2,o.x2=e/2,l.y=i/3,l.x2=e,l.x1=e/2),a.width=n,a.height=s,$(this,t,G),$(this.columns.template,a,G),a.stroke=this.riseFromOpenState.properties.stroke;var u=t.dataItem;u.color=a.stroke,u.colorOrig=a.stroke},r.prototype.createColumnTemplate=function(){return new Xe},r}($i);T.registeredClasses.OHLCSeries=Pa;T.registeredClasses.OHLCSeriesDataItem=Ji;var Qi=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="StepLineSeriesSegment",t}return r.prototype.drawSegment=function(t,e,i,a,n,s){if(t.length>0&&e.length>0)if(n){var o=W(t[0]);if(t.length>0)for(var l=1;l<t.length;l++){var d=t[l];l/2==Math.round(l/2)?o+=W(d):o+=L(d)}this.strokeSprite.path=o,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(o=W(t[0])+pe(t),o+=L(e[0])+pe(e),o+=L(t[0]),o+=Lt(),this.fillSprite.path=o)}else{var o=W(t[0])+pe(t);this.strokeSprite.path=o,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(o+=L(e[0])+pe(e),o+=L(t[0]),o+=Lt(),this.fillSprite.path=o)}else this.strokeSprite.path="",this.fillSprite.path=""},r}(Ge);T.registeredClasses.StepLineSeriesSegment=Qi;var tr=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="StepLineSeriesDataItem",t.applyTheme(),t}return r}(be),Aa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="StepLineSeries",t.applyTheme(),t.startLocation=0,t.endLocation=1,t}return r.prototype.createDataItem=function(){return new tr},r.prototype.addPoints=function(t,e,i,a,n){var s,o,l,d;this.baseAxis==this.xAxis&&(s=this.startLocation,o=this.endLocation,l=this.getAdjustedXLocation(e,this.yOpenField),d=this.getAdjustedXLocation(e,this.yField)),this.baseAxis==this.yAxis&&(l=this.startLocation,d=this.endLocation,s=this.getAdjustedXLocation(e,this.xOpenField),o=this.getAdjustedXLocation(e,this.xField));var u=this.xAxis.getX(e,i,s),p=this.yAxis.getY(e,a,l),f=this.xAxis.getX(e,i,o),c=this.yAxis.getY(e,a,d);if(u=N(u,-1e5,1e5),p=N(p,-1e5,1e5),f=N(f,-1e5,1e5),c=N(c,-1e5,1e5),!this.noRisers&&t.length>1){var y=t[t.length-1];this.baseAxis==this.xAxis&&(n?t.push({x:y.x,y:c}):t.push({x:u,y:y.y})),this.baseAxis==this.yAxis&&(n?t.push({x:f,y:y.y}):t.push({x:y.x,y:p}))}var v={x:u,y:p},g={x:f,y:c};n?t.push(g,v):t.push(v,g)},r.prototype.drawSegment=function(t,e,i){var a=!1;this.yAxis==this.baseAxis&&(a=!0),t.drawSegment(e,i,this.tensionX,this.tensionY,this.noRisers,a)},r.prototype.createSegment=function(){return new Qi},Object.defineProperty(r.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(t){this.setPropertyValue("noRisers",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),r}(Ze);T.registeredClasses.StepLineSeries=Aa;T.registeredClasses.StepLineSeriesDataItem=tr;var er=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="RadarColumn",t}return r.prototype.createAssets=function(){this.radarColumn=this.createChild(Ue),this.radarColumn.shouldClone=!1,this.radarColumn.strokeOpacity=void 0,this.column=this.radarColumn},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.radarColumn&&this.radarColumn.copyFrom(t.radarColumn)},r.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");return x(t)?t:this.radarColumn.getTooltipX()},r.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipX");return x(t)?t:this.radarColumn.getTooltipY()},r}(Xt);T.registeredClasses.RadarColumn=er;var Da=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ColumnSeriesDataItem",t.applyTheme(),t}return r}(Tt),Sa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="RadarColumnSeries",t.applyTheme(),t}return r.prototype.createColumnTemplate=function(){return new er},r.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),h.prototype.validate.call(this)},r.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.__disabled=!0),O(this.axisRanges.iterator(),function(e){var i=t.rangesColumns.getKey(e.uid);i&&(i.__disabled=!0)}))},r.prototype.validateDataElementReal=function(t){var e=this,i=this.chart.startAngle,a=this.chart.endAngle,n=this.yField,s=this.yOpenField,o=this.xField,l=this.xOpenField,d,u,p,f,c=this.getStartLocation(t),y=this.getEndLocation(t),v=(a-i)/(this.dataItems.length*(this.end-this.start)),g=t.column;g||(g=this.columns.create(),t.column=g,$(this,g,G),$(this.columns.template,g,G),t.addSprite(g),g.paper=this.paper,this.setColumnStates(g));var m=g.width,b=100;m instanceof yt&&(b=m.percent);var D=j((y-c)*(1-b/100)/2,5);if(c+=D,y-=D,this.xAxis instanceof E&&this.yAxis instanceof E)p=U({x:this.yAxis.getX(t,n,0,"valueY"),y:this.yAxis.getY(t,n,0,"valueY")}),f=U({x:this.yAxis.getX(t,s,1,"valueY"),y:this.yAxis.getY(t,s,1,"valueY")}),d=this.xAxis.getAngle(t,l,0,"valueX"),u=this.xAxis.getAngle(t,o,1,"valueX"),i=i+c*v,a=a-(1-y)*v;else if(this.baseAxis==this.xAxis)p=U({x:this.yAxis.getX(t,n,t.locations[n],"valueY"),y:this.yAxis.getY(t,n,t.locations[n],"valueY")}),f=U({x:this.yAxis.getX(t,s,t.locations[s],"valueY"),y:this.yAxis.getY(t,s,t.locations[s],"valueY")}),d=this.xAxis.getAngle(t,l,c,"valueX"),u=this.xAxis.getAngle(t,o,y,"valueX"),i=i+c*v,a=a-(1-y)*v;else{if(p=U({x:this.yAxis.getX(t,n,c,"valueY"),y:this.yAxis.getY(t,n,c,"valueY")}),f=U({x:this.yAxis.getX(t,s,y,"valueY"),y:this.yAxis.getY(t,s,y,"valueY")}),x(m)){var C=Math.abs(p-f);if(C>m){var _=(C-m)/2;p+=_,f-=_}}d=this.xAxis.getAngle(t,o,t.locations[o],"valueX"),u=this.xAxis.getAngle(t,l,t.locations[l],"valueX")}if(u<d){var P=u;u=d,d=P}d=N(d,i,a),u=N(u,i,a);var I=g.radarColumn;I.startAngle=d;var F=u-d;F>0?(I.arc=F,I.radius=p,I.innerRadius=f,g.__disabled=!1,g.parent=this.columnsContainer,O(this.axisRanges.iterator(),function(z){var X=t.rangesColumns.getKey(z.uid);X||(X=e.columns.create(),$r(e.columns.template,X,G),$(z.contents,X,G),X.dataItem&&_i(X.dataItem.sprites,X),t.addSprite(X),X.paper=e.paper,e.setColumnStates(X),t.rangesColumns.setKey(z.uid,X));var w=X.radarColumn;w.startAngle=d,w.arc=F,w.radius=p,w.innerRadius=f,w.invalid&&(w.paper=e.paper,w.validate()),X.__disabled=!1,X.parent=z.contents})):this.disableUnusedColumns(t)},r.prototype.getPoint=function(t,e,i,a,n,s,o){s||(s="valueX"),o||(o="valueY");var l=this.yAxis.getX(t,i,n,o),d=this.yAxis.getY(t,i,n,o),u=U({x:l,y:d});u==0&&(u=1e-5);var p=this.xAxis.getAngle(t,e,a,s);return{x:u*k(p),y:u*V(p)}},r.prototype.getMaskPath=function(){var t=this.yAxis.renderer;return ae(t.startAngle,t.endAngle-t.startAngle,t.pixelRadius,t.pixelInnerRadius)},r.prototype.positionBulletReal=function(t,e,i){var a=this.xAxis,n=this.yAxis;(e<a.start||e>a.end||i<n.start||i>n.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,i))},r.prototype.setXAxis=function(t){h.prototype.setXAxis.call(this,t),this.updateRendererRefs()},r.prototype.setYAxis=function(t){h.prototype.setYAxis.call(this,t),this.updateRendererRefs()},r.prototype.updateRendererRefs=function(){var t=this.xAxis.renderer,e=this.yAxis.renderer;t.axisRendererY=e},r}(Yt);T.registeredClasses.RadarColumnSeries=Sa;T.registeredClasses.RadarColumnSeriesDataItem=Da;var Ye=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.slice=t.createChild(lt),t.slice.shouldClone=!1,t.slice.setElement(t.paper.add("path")),t.slice.isMeasured=!1,t.orientation="vertical",t.bottomWidth=R(100),t.topWidth=R(100),t.isMeasured=!1,t.width=10,t.height=10,t.expandDistance=0,t.className="FunnelSlice",t.applyTheme(),t}return r.prototype.draw=function(){h.prototype.draw.call(this);var t=this.pixelPaddingTop,e=this.pixelPaddingBottom,i=this.pixelPaddingRight,a=this.pixelPaddingLeft,n=this.pixelWidth-i-a,s=this.pixelHeight-t-e,o=this.expandDistance,l="";if(this.orientation=="vertical"){var d=Q(this.topWidth,n),u=Q(this.bottomWidth,n),p={x:(n-d)/2+a,y:t},f={x:(n+d)/2+a,y:t},c={x:(n+u)/2+a,y:t+s},y={x:(n-u)/2+a,y:t+s},v={x:f.x+(c.x-f.x)/2+o*s,y:f.y+.5*s},g={x:p.x+(y.x-p.x)/2-o*s,y:p.y+.5*s},m=L(c),b=L(p);o!=0&&(m=It(c,v),b=It(p,g)),l=W(p)+L(f)+m+L(y)+b,this.tickPoint={x:f.x+(c.x-f.x)/2,y:f.y+(c.y-f.y)/2}}else{var d=Q(this.topWidth,s),u=Q(this.bottomWidth,s),D={x:a,y:(s-d)/2+t},C={x:a,y:(s+d)/2+t},_={x:a+n,y:(s-u)/2+t},P={x:a+n,y:(s+u)/2+t},v={y:D.y+(_.y-D.y)/2-o*n,x:D.x+.5*n},g={y:C.y+(P.y-C.y)/2+o*n,x:C.x+.5*n},m=L(_),b=L(C);o!=0&&(m=It(_,v),b=It(C,g)),l=W(C)+L(D)+m+L(P)+b,this.tickPoint={y:C.y+(P.y-C.y)/2,x:C.x+(P.x-C.x)/2}}this.slice.path=l,this.invalidateLayout()},r.prototype.getPoint=function(t,e){var i=this.pixelPaddingTop,a=this.pixelPaddingBottom,n=this.pixelPaddingRight,s=this.pixelPaddingLeft,o=this.pixelWidth-n-s,l=this.pixelHeight-i-a;if(this.orientation=="vertical"){var d=Q(this.topWidth,o),u=Q(this.bottomWidth,o),p={x:(o-d)/2+s,y:i},f={x:(o+d)/2+s,y:i},c={x:(o+u)/2+s,y:i+l},y={x:(o-u)/2+s,y:i+l},v=p.x+(y.x-p.x)*e,g=f.x+(c.x-f.x)*e;return{x:v+(g-v)*t,y:f.y+(c.y-f.y)*e}}else{var d=Q(this.topWidth,l),u=Q(this.bottomWidth,l),m={x:s,y:(l-d)/2+i},b={x:s,y:(l+d)/2+i},D={x:s+o,y:(l-u)/2+i},C={x:s+o,y:(l+u)/2+i},_=m.y+(D.y-m.y)*t,P=b.y+(C.y-b.y)*t;return{y:_+(P-_)*e,x:m.x+(D.x-m.x)*t}}},Object.defineProperty(r.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(t){this.setPropertyValue("expandDistance",t,!0)},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.slice&&this.slice.copyFrom(t.slice)},r}(H);T.registeredClasses.FunnelSlice=Ye;var ir=function(h){S(r,h);function r(){var t=h.call(this)||this;return t._label=new ot,t._slice=new ot,t.className="FunnelTick",t.element=t.paper.add("path"),t._disposers.push(t._label),t._disposers.push(t._slice),t.setPropertyValue("locationX",0),t.setPropertyValue("locationY",0),t.applyTheme(),t}return r.prototype.draw=function(){h.prototype.draw.call(this);var t=this.slice,e=t.getPoint(this.locationX,this.locationY);if(e){var i=this.label,a=t.dataItem.component,n=void 0,s=void 0,o=void 0;if(a.orientation=="vertical"){var l=i.pixelX,d=i.pixelY;a.labelsOpposite||(l+=i.maxRight),n=Zt(e,t,this.parent),o=Zt({x:l,y:d},i.parent,this.parent),s={x:i.parent.pixelX-this.length,y:o.y},a.labelsOpposite||(s.x=i.parent.measuredWidth+this.length)}else{var l=i.pixelX,d=i.pixelY;a.labelsOpposite||(d+=i.maxBottom),n=Zt(e,t,this.parent),o=Zt({x:l,y:d},i.parent,this.parent),s={x:o.x,y:i.parent.pixelY-this.length},a.labelsOpposite||(s.y=i.parent.measuredHeight+this.length)}this.path=W(n)+L(s)+L(o)}},Object.defineProperty(r.prototype,"slice",{get:function(){return this._slice.get()},set:function(t){this._slice.set(t,new re([t.events.on("transformed",this.invalidate,this,!1),t.events.on("validated",this.invalidate,this,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"label",{get:function(){return this._label.get()},set:function(t){this._label.set(t,t.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(t){this.setPropertyValue("locationX",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(t){this.setPropertyValue("locationY",t,!1,!0)},enumerable:!0,configurable:!0}),r}(He);T.registeredClasses.FunnelTick=ir;var ri=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="FunnelSeriesDataItem",t.events.on("visibilitychanged",function(){t.component&&t.component.invalidateDataItems()},t,!1),t.applyTheme(),t}return Object.defineProperty(r.prototype,"sliceLink",{get:function(){var t=this;if(!this._sliceLink){var e=this.component.sliceLinks.create();this._sliceLink=e,this._disposers.push(e),e.parent=this.component.slicesContainer,this._disposers.push(new wt(function(){t.component&&t.component.sliceLinks.removeValue(e)})),this.addSprite(e),e.visible=this.visible}return this._sliceLink},enumerable:!0,configurable:!0}),r}(Pe),rr=function(h){S(r,h);function r(){var t=h.call(this)||this;return t._nextY=0,t.className="FunnelSeries",t.orientation="vertical",t.width=R(100),t.height=R(100),t.slicesContainer.width=R(100),t.slicesContainer.height=R(100),t._disposers.push(t.slicesContainer.events.on("maxsizechanged",t.invalidateDataItems,t,!1)),t.labelsOpposite=!0,t.labelsContainer.layout="absolute",t.bottomRatio=0,t.applyTheme(),t}return r.prototype.createSlice=function(){return new Ye},r.prototype.createTick=function(){return new ir},r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Funnel Series"))},r.prototype.createDataItem=function(){return new ri},r.prototype.initSlice=function(t){t.isMeasured=!1,t.defaultState.properties.scale=1,t.observe("scale",this.handleSliceScale,this),t.observe(["dx","dy","x","y"],this.handleSliceMove,this),t.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})";var e=t.states.create("hover");e.properties.expandDistance=.2},r.prototype.initLabel=function(t){h.prototype.initLabel.call(this,t),t.verticalCenter="middle",t.horizontalCenter="middle",t.isMeasured=!0,t.padding(5,5,5,5)},r.prototype.validate=function(){h.prototype.validate.call(this),this._nextY=0},r.prototype.validateDataElements=function(){var t=this,e=this.slicesContainer,i=this.labelsContainer,a=this.labels.template;this.alignLabels?(a.interactionsEnabled=!0,e.isMeasured=!0,i.isMeasured=!0):(a.interactionsEnabled=!1,e.isMeasured=!1,i.isMeasured=!1);var n=0,s=0;this.dataItems.each(function(o){A(o.value)&&(s++,o.value>0?n+=Math.abs(o.getWorkingValue("value")/o.value):t.ignoreZeroValues||!o.visible||o.__disabled||o.isHiding?s--:n+=1)}),this._total=1/s*n,this._count=s,h.prototype.validateDataElements.call(this),this.arrangeLabels()},r.prototype.getNextValue=function(t){var e=t.index,i=t.getWorkingValue("value");if(e<this.dataItems.length-1){var a=this.dataItems.getIndex(e+1);if(i=a.getWorkingValue("value"),!a.visible||a.isHiding||a.__disabled||a.value==0&&this.ignoreZeroValues)return this.getNextValue(a)}return i},r.prototype.formDataElement=function(){},r.prototype.validateDataElement=function(t){var e=this,i=t.slice;i.orientation=this.orientation;var a=t.sliceLink;a.orientation=this.orientation;var n=t.tick,s=t.label;n.slice=i,n.label=s,A(t.value)?(this.decorateSlice(t),Z(t.sprites,function(o){t.value==0&&e.ignoreZeroValues?o.__disabled=!0:o.__disabled=!1})):Z(t.sprites,function(o){o.__disabled=!0}),t.index==this.dataItems.length-1&&(a.disabled=!0),h.prototype.validateDataElement.call(this,t),a.fill=i.fill},r.prototype.decorateSlice=function(t){var e=t.slice,i=t.sliceLink,a=t.label,n=t.tick,s=this.slicesContainer.innerWidth,o=this.slicesContainer.innerHeight,l=this.getNextValue(t),d=Math.abs(t.getWorkingValue("value")),u=this.bottomRatio,p=1;if(t.value!=0?p=d/Math.abs(t.value):(t.__disabled||t.isHiding||!t.visible)&&(p=1e-6),this.ignoreZeroValues&&t.value==0){t.__disabled=!0;return}else t.__disabled=!1;if(this._nextY==1/0&&(this._nextY=0),this.orientation=="vertical"){var f=i.pixelHeight*p;o=o+f,e.topWidth=d/this.dataItem.values.value.high*s,e.bottomWidth=(d-(d-l)*u)/this.dataItem.values.value.high*s,i.topWidth=e.bottomWidth,i.bottomWidth=(d-(d-l))/this.dataItem.values.value.high*s,e.y=this._nextY,e.height=Math.min(1e5,ht(0,o/this._count*p/this._total-f)),e.x=s/2,this.alignLabels?a.x=void 0:a.x=e.x,a.y=e.pixelY+e.pixelHeight*n.locationY,this._nextY+=e.pixelHeight+f,i.y=this._nextY-f,i.x=e.x}else{var c=i.pixelWidth*p;s=s+c,e.topWidth=d/this.dataItem.values.value.high*o,e.bottomWidth=(d-(d-l)*u)/this.dataItem.values.value.high*o,i.topWidth=e.bottomWidth,i.bottomWidth=(d-(d-l))/this.dataItem.values.value.high*o,e.x=this._nextY,e.width=Math.min(1e5,s/this._count*p*1/this._total-c),e.y=o/2,this.alignLabels?a.y=this.labelsContainer.measuredHeight:a.y=e.y,a.x=e.pixelX+e.pixelWidth*n.locationX,this._nextY+=e.pixelWidth+c,i.x=this._nextY-c,i.y=e.y}},r.prototype.getLastLabel=function(t){if(t>0){var e=this.labels.getIndex(t);return e.__disabled||!e.visible?this.getLastLabel(t-1):e}},r.prototype.arrangeLabels=function(){if(this.alignLabels){var t=this.labels.length;if(t>1){var e=this.getLastLabel(t-1);if(e){var i=e.pixelY,a=e.pixelX;if(t>1){for(var n=t-2;n>=0;n--){var s=this.labels.getIndex(n);s.visible&&!s.__disabled&&(s.invalid&&s.validate(),this.orientation=="vertical"?s.pixelY+s.measuredHeight>i&&(s.y=Math.min(1e6,i-s.measuredHeight)):s.pixelX+s.measuredWidth>a&&(s.x=Math.min(1e6,a-s.measuredWidth)),i=s.pixelY,a=s.pixelX)}i=0,a=0;for(var n=0;n<t;n++){var s=this.labels.getIndex(n);s.visible&&!s.__disabled&&(s.invalid&&s.validate(),this.orientation=="vertical"?s.pixelY<i&&(s.y=Math.min(1e6,i)):s.pixelX<a&&(s.x=Math.min(1e6,a)),i+=s.measuredHeight,a+=s.measuredWidth)}}}}}},r.prototype.positionBullet=function(t){h.prototype.positionBullet.call(this,t);var e=t.dataItem,i=e.slice,a=t.locationX;x(a)||(a=.5);var n=t.locationY;x(n)||(n=1),t.x=i.pixelX+i.measuredWidth*a,t.y=i.pixelY+i.measuredHeight*n},Object.defineProperty(r.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t)&&(this.labelsOpposite=this.labelsOpposite,this.invalidate(),t=="vertical"?(this.ticks.template.locationX=1,this.ticks.template.locationY=.5,this.labels.template.rotation=0,this.layout="horizontal"):(this.ticks.template.locationX=.5,this.ticks.template.locationY=1,this.labels.template.rotation=-90,this.layout="vertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(t){this.setPropertyValue("bottomRatio",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var t=new Ye;t.applyOnClones=!0,t.fillOpacity=.5,t.expandDistance=-.3,t.hiddenState.properties.opacity=0,this._disposers.push(t),this._sliceLinks=new vt(t),this._disposers.push(new dt(this._sliceLinks))}return this._sliceLinks},enumerable:!0,configurable:!0}),r.prototype.show=function(t){var e=this,i=this.startIndex,a=this.endIndex,n=this.defaultState.transitionDuration;x(t)&&(n=t);var s=0;O(Jt(this.dataItems.iterator()),function(l){var d=l[0],u=l[1];e.sequencedInterpolation&&(s=e.sequencedInterpolationDelay*d+n*(d-i)/(a-i)),u.show(n,s,["value"])});var o=h.prototype.show.call(this,t);return o},r.prototype.hide=function(t){var e=this,i=["value"],a=0,n=this.startIndex,s=this.endIndex,o=0,l=this.hiddenState.transitionDuration;x(t)&&(l=t),O(Jt(this.dataItems.iterator()),function(u){var p=u[0],f=u[1];e.sequencedInterpolation&&(o=e.sequencedInterpolationDelay*p+l*(p-n)/(s-n)),f.hide(l,o,a,i)});var d=h.prototype.hide.call(this,t);return d&&!d.isFinished()&&d.delay(o),d},r.prototype.setAlignLabels=function(t){h.prototype.setAlignLabels.call(this,t),this.ticks.template.disabled=!t;var e=this.labelsContainer;e&&(t?(e.height=void 0,e.width=void 0,e.margin(10,10,10,10)):(e.width=R(100),e.height=R(100))),this.labelsOpposite=this.labelsOpposite},Object.defineProperty(r.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(t){this.setPropertyValue("labelsOpposite",t);var e=this.labels.template,i="none",a="none";this.alignLabels?t?(this.labelsContainer.toFront(),this.orientation=="vertical"?(this.ticks.template.locationX=1,e.horizontalCenter="left",i="right"):(this.ticks.template.locationY=1,e.horizontalCenter="right",a="bottom")):(this.labelsContainer.toBack(),this.orientation=="vertical"?(this.ticks.template.locationX=0,i="left"):(a="top",this.ticks.template.locationY=0)):this.orientation=="vertical"?i="center":a="middle",e.align=i,e.valign=a,this.validateLayout(),this.ticks.each(function(n){n.invalidate()}),this.invalidateDataItems()},enumerable:!0,configurable:!0}),r}(ne);T.registeredClasses.FunnelSeries=rr;T.registeredClasses.FunnelSeriesDataItem=ri;var ai=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PyramidSeriesDataItem",t.applyTheme(),t}return r}(ri),ar=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PyramidSeries",t.topWidth=R(0),t.bottomWidth=R(100),t.pyramidHeight=R(100),t.valueIs="area",t.sliceLinks.template.width=0,t.sliceLinks.template.height=0,t.applyTheme(),t}return r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},r.prototype.createDataItem=function(){return new ai},r.prototype.validate=function(){h.prototype.validate.call(this),this._nextWidth=void 0},r.prototype.getNextValue=function(t){var e=t.index,i=t.getWorkingValue("value");if(e<this.dataItems.length-1){var a=this.dataItems.getIndex(e+1);i=a.getWorkingValue("value")}return i==0&&(i=1e-6),i},r.prototype.validateDataElements=function(){var t=this,e=this.slicesContainer.innerWidth,i=this.slicesContainer.innerHeight;if(this.dataItems.each(function(s){if(s.value>0){var o=s.getWorkingValue("value")/s.value,l=s.sliceLink;t.orientation=="vertical"?i-=l.pixelHeight*o:e-=l.pixelWidth*o}}),this._pyramidHeight=Q(this.pyramidHeight,i),this._pyramidWidth=Q(this.pyramidHeight,e),this.orientation=="vertical"){var a=(i-this._pyramidHeight)/2;this.slicesContainer.y=a,this.labelsContainer.y=a,this.ticksContainer.y=a}else{var n=(e-this._pyramidWidth)/2;this.slicesContainer.x=n,this.labelsContainer.x=n,this.ticksContainer.x=n}h.prototype.validateDataElements.call(this)},r.prototype.decorateSlice=function(t){var e=this.dataItem.values.value.absoluteSum;if(e!=0){var i=t.slice,a=t.sliceLink,n=t.label,s=t.tick;this.getNextValue(t);var o=Math.abs(t.getWorkingValue("value")),l=this._pyramidWidth,d=this._pyramidHeight,u=this.slicesContainer.innerWidth,p=this.slicesContainer.innerHeight,f=a.pixelWidth,c=a.pixelHeight;if((t.value==0||t.value==null)&&this.ignoreZeroValues?t.__disabled=!0:t.__disabled=!1,this.orientation=="vertical"){var y=Q(this.topWidth,u);x(this._nextWidth)||(this._nextWidth=y);var v=Q(this.bottomWidth,u),g=this._nextWidth,m=Math.atan2(d,y-v),b=Math.tan(Math.PI/2-m);b==0&&(b=1e-8);var D=void 0,C=void 0;if(this.valueIs=="area"){var _=(y+v)/2*d,P=_*o/e,I=Math.abs(g*g-2*P*b);D=(g-Math.sqrt(I))/b,D>0?C=(2*P-D*g)/D:C=g}else D=d*o/e,C=g-D*b;i.height=D,i.width=u,i.bottomWidth=C,i.topWidth=g,a.topWidth=i.bottomWidth,a.bottomWidth=i.bottomWidth,i.y=this._nextY,this.alignLabels?n.x=0:n.x=u/2,n.y=i.pixelY+i.pixelHeight*s.locationY+i.dy,this._nextY+=i.pixelHeight+c*o/Math.max(Math.abs(t.value),1e-8),a.y=this._nextY-c,a.x=u/2}else{var y=Q(this.topWidth,p);x(this._nextWidth)||(this._nextWidth=y);var v=Q(this.bottomWidth,p),g=this._nextWidth,m=Math.atan2(l,y-v),b=Math.tan(Math.PI/2-m);b==0&&(b=1e-8);var F=void 0,C=void 0;if(this.valueIs=="area"){var _=(y+v)/2*l,P=_*o/e;F=(g-Math.sqrt(g*g-2*P*b))/b,C=(2*P-F*g)/F}else F=l*o/e,C=g-F*b;i.width=F,i.height=p,i.bottomWidth=C,i.topWidth=g,a.topWidth=i.bottomWidth,a.bottomWidth=i.bottomWidth,i.x=this._nextY,this.alignLabels?n.y=this.labelsContainer.measuredHeight:n.y=p/2,n.x=i.pixelX+i.pixelWidth*s.locationX+i.dx,this._nextY+=i.pixelWidth+f*o/Math.max(Math.abs(t.value),1e-8),a.x=this._nextY-f,a.y=p/2}this._nextWidth=i.bottomWidth}},Object.defineProperty(r.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(t){this.setPercentProperty("pyramidHeight",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(t){this.setPropertyValue("valueIs",t)&&this.invalidate()},enumerable:!0,configurable:!0}),r}(rr);T.registeredClasses.PyramidSeries=ar;T.registeredClasses.PyramidSeriesDataItem=ai;var nr=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PictorialStackedSeriesDataItem",t.applyTheme(),t}return r}(ai),_a=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="PictorialStackedSeries",t.topWidth=R(100),t.bottomWidth=R(100),t.valueIs="height",t.applyTheme(),t.startLocation=0,t.endLocation=1,t.align="center",t.valign="middle",t._maskSprite=t.slicesContainer.createChild(lt),t._maskSprite.visible=!1,t._maskSprite.zIndex=100,t._maskSprite.shouldClone=!1,t}return r.prototype.validateDataElements=function(){var t=this.slicesContainer.maxWidth,e=this.slicesContainer.maxHeight,i=this._maskSprite,a=i.measuredWidth/i.scale,n=i.measuredHeight/i.scale,s=tt(e/n,t/a);s==1/0&&(s=1),s=ht(.001,s);var o=this.startLocation,l=this.endLocation,d=tt(t,a*s),u=tt(e,n*s);i.scale=s,this.orientation=="vertical"?(this.topWidth=d+4,this.bottomWidth=d+4,this.pyramidHeight=u*(l-o),i.x=t/2,i.y=u/2):(this.topWidth=u+4,this.bottomWidth=u+4,this.pyramidHeight=d*(l-o),i.valign="middle",i.x=d/2,i.y=e/2),i.verticalCenter="middle",i.horizontalCenter="middle",h.prototype.validateDataElements.call(this);var p,f;this.orientation=="vertical"?(this.valign=="bottom"&&(p=e-u),this.valign=="middle"&&(p=(e-u)/2),this.valign=="top"&&(p=0),this.align=="left"&&(f=-(t-d)/2),this.align=="center"&&(f=0),this.align=="right"&&(f=(t-d)/2),this.slices.template.dy=o*u,this.alignLabels&&(this.slicesContainer.dx=f)):(this.valign=="bottom"&&(p=(e-u)/2),this.valign=="middle"&&(p=0),this.valign=="top"&&(p=-(e-u)/2),this.align=="left"&&(f=0),this.align=="center"&&(f=(t-d)/2),this.align=="right"&&(f=t-d),this.slices.template.dx=o*d,this.alignLabels&&(this.slicesContainer.dy=p)),this.slicesContainer.x=f,this.labelsContainer.x=f,this.ticksContainer.x=f,this.slicesContainer.y=p,this.labelsContainer.y=p,this.ticksContainer.y=p,d>0&&u>0&&(this.slicesContainer.mask=i)},r.prototype.applyInternalDefaults=function(){h.prototype.applyInternalDefaults.call(this),A(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},r.prototype.createDataItem=function(){return new nr},Object.defineProperty(r.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:!0,configurable:!0}),r.prototype.initSlice=function(t){h.prototype.initSlice.call(this,t);var e=t.states.getKey("hover");e&&(e.properties.expandDistance=0)},Object.defineProperty(r.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),r}(ar);T.registeredClasses.PictorialStackedSeries=_a;T.registeredClasses.PictorialStackedSeriesDataItem=nr;var sr=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ConeColumn",t}return r.prototype.createAssets=function(){this.coneColumn=this.createChild(Jr),this.coneColumn.shouldClone=!1,this.column=this.coneColumn},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.coneColumn&&this.coneColumn.copyFrom(t.coneColumn)},r}(Xt);T.registeredClasses.ConeColumn=sr;var Ta=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ConeSeriesDataItem",t.applyTheme(),t}return r}(Tt),Va=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ConeSeries",t.applyTheme(),t}return r.prototype.createColumnTemplate=function(){return new sr},r.prototype.getMaskPath=function(){var t=0,e=0,i=this.columns.getIndex(0);if(i)return this.baseAxis==this.xAxis?e=i.coneColumn.innerWidth/2+1:t=i.coneColumn.innerHeight/2+1,zt({x:-t,y:0,width:this.xAxis.axisLength+t,height:this.yAxis.axisLength+e})},r.prototype.validateDataElementReal=function(t){h.prototype.validateDataElementReal.call(this,t);var e=t.column;if(e){var i=t.column.coneColumn;i.fill=t.column.fill,this.baseAxis==this.yAxis?i.orientation="horizontal":i.orientation="vertical"}},r}(Yt);T.registeredClasses.ConeSeries=Va;T.registeredClasses.ConeSeriesDataItem=Ta;var or=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="CurvedColumn",t}return r.prototype.createAssets=function(){this.curvedColumn=this.createChild(lt),this.curvedColumn.shouldClone=!1,this.setPropertyValue("tension",.7),this.width=R(120),this.height=R(120),this.column=this.curvedColumn},r.prototype.draw=function(){h.prototype.draw.call(this);var t=this.realWidth,e=this.realHeight,i=this.realX-this.pixelX,a=this.realY-this.pixelY,n;Qt(this.width);var s=1,o=1;this.orientation=="vertical"?(s=this.tension,n=[{x:0,y:e+a},{x:t/2,y:a},{x:t,y:e+a}]):(o=this.tension,e=Math.abs(e),n=[{x:i,y:e},{x:i+t,y:e/2},{x:i,y:0}]);var l=W(n[0])+new ie(s,o).smooth(n);this.column.path=l},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.curvedColumn&&this.curvedColumn.copyFrom(t.curvedColumn)},Object.defineProperty(r.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),r}(Xt);T.registeredClasses.CurvedColumn=or;var ka=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="CurvedColumnSeriesDataItem",t.applyTheme(),t}return r}(Tt),Oa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="CurvedColumnSeries",t.applyTheme(),t}return r.prototype.createColumnTemplate=function(){return new or},r.prototype.validateDataElementReal=function(t){h.prototype.validateDataElementReal.call(this,t);var e=t.column;if(e=t.column,e){var i=t.column.curvedColumn;i.fill=t.column.fill,this.baseAxis==this.yAxis?e.orientation="horizontal":e.orientation="vertical"}},r}(Yt);T.registeredClasses.CurvedColumnSeries=Oa;T.registeredClasses.CurvedColumnSeriesDataItem=ka;var Fa=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="CircleBullet";var e=t.createChild(Be);return e.shouldClone=!1,e.radius=5,e.isMeasured=!1,t.circle=e,t.applyTheme(),t}return r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.circle.copyFrom(t.circle)},r}(Kt);T.registeredClasses.CircleBullet=Fa;var Ia=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="ErrorBullet",t.errorLine=t.createChild(lt),t.errorLine.shouldClone=!1,t.width=20,t.height=20,t.strokeOpacity=1,t.isDynamic=!0,t}return r.prototype.validatePosition=function(){h.prototype.validatePosition.call(this);var t=this.pixelWidth/2,e=this.pixelHeight/2;this.errorLine.path=W({x:-t,y:-e})+L({x:t,y:-e})+W({x:0,y:-e})+L({x:0,y:e})+W({x:-t,y:e})+L({x:t,y:e})},r.prototype.copyFrom=function(t){h.prototype.copyFrom.call(this,t),this.errorLine.copyFrom(t.errorLine)},r}(Kt);T.registeredClasses.ErrorBullet=Ia;var wa=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="NavigationBarDataItem",t.applyTheme(),t}return Object.defineProperty(r.prototype,"name",{get:function(){return this.properties.name},set:function(t){this.setProperty("name",t)},enumerable:!0,configurable:!0}),r}(Qr),Ra=function(h){S(r,h);function r(){var t=h.call(this)||this;t.className="NavigationBar";var e=new pt,i=new yi;i.valign="middle",i.paddingTop=8,i.paddingBottom=8,t.paddingBottom=2,t.links=new vt(i),t._disposers.push(new dt(t.links)),t._disposers.push(i),t._linksIterator=new Pi(t.links,function(){return t.links.create()}),t._linksIterator.createNewItems=!0;var a=new ta;a.direction="right",a.width=8,a.height=12,a.fill=e.getFor("alternativeBackground"),a.fillOpacity=.5,a.valign="middle",a.marginLeft=10,a.marginRight=10,t.separators=new vt(a),t._disposers.push(new dt(t.separators)),t._disposers.push(a);var n=new yi;return t.activeLink=n,n.copyFrom(i),n.valign="middle",n.fontWeight="bold",t.width=R(100),t.layout="grid",t.dataFields.name="name",t.applyTheme(),t}return r.prototype.validateDataElements=function(){this.removeChildren(),this._linksIterator.reset(),h.prototype.validateDataElements.call(this)},r.prototype.validateDataElement=function(t){h.prototype.validateDataElement.call(this,t);var e;if(t.index<this.dataItems.length-1){e=this._linksIterator.getLast(),e.parent=this;var i=this.separators.create();i.parent=this,i.valign="middle"}else e=this.activeLink,e.events.copyFrom(this.links.template.events),e.hide(0),e.show(),e.parent=this;e.dataItem=t,e.text=t.name,e.validate()},r}(ea);T.registeredClasses.NavigationBar=Ra;T.registeredClasses.NavigationBarDataItem=wa;var lr=function(h){S(r,h);function r(){var t=h.call(this)||this;t.point={x:0,y:0},t._stick="none",t.className="Cursor",t.width=R(100),t.height=R(100),t.shouldClone=!1,t.hide(0),t.trackable=!0,t.clickable=!0,t.isMeasured=!1;var e=bt();return t._disposers.push(e.body.events.on("down",t.handleCursorDown,t)),t._disposers.push(e.body.events.on("up",t.handleCursorUp,t)),t._disposers.push(e.body.events.on("track",t.handleCursorMove,t)),t.applyTheme(),t}return r.prototype.handleCursorMove=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)){if((this._generalBehavior!="zoom"&&this._generalBehavior!="pan"||!this.downPoint)&&!bt().isLocalElement(t.pointer,this.paper.svg,this.uid)){(!this.isHidden||!this.isHiding)&&this.hide();return}var e=Te(t.pointer.point,this);return this._stick=="hard"&&this._stickPoint&&(e=this._stickPoint),this._stick=="soft"&&this._stickPoint&&(this.fitsToBounds(e)||(e=this._stickPoint)),this._adapterO&&this._adapterO.apply("cursorPoint",e),this.triggerMove(e),e}},r.prototype.hideReal=function(t){if(!((this._stick=="hard"||this._stick=="soft")&&this._stickPoint))return h.prototype.hideReal.call(this,t)},r.prototype.triggerMove=function(t,e,i){t.x=j(t.x,1),t.y=j(t.y,1),e&&(this._stick=e),(e=="hard"||e=="soft")&&(this._stickPoint=t),this.triggerMoveReal(t,i)},r.prototype.triggerMoveReal=function(t,e){(this.point.x!=t.x||this.point.y!=t.y||e)&&(this.point=t,this.invalidatePosition(),this.fitsToBounds(t)?this.show(0):this.downPoint||this.hide(0),this.visible&&(this.getPositions(),this.dispatch("cursorpositionchanged")))},r.prototype.triggerDown=function(t){this.triggerDownReal(t)},r.prototype.triggerDownReal=function(t){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted"),bt().setGlobalStyle(ve.grabbing);break}},r.prototype.triggerUp=function(t){this.triggerUpReal(t)},r.prototype.triggerUpReal=function(t){ia.requestFrame(),this.updatePoint(this.upPoint);var e=bt();if(U(this._upPointOrig,this._downPointOrig)>e.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended"),e.setGlobalStyle(ve.default);break}this.downPoint=void 0,this.updateSelection()}},r.prototype.updateSelection=function(){},r.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth,this.yPosition=1-this.point.y/this.innerHeight},r.prototype.handleCursorDown=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch||!bt().isLocalElement(t.pointer,this.paper.svg,this.uid))){ra();var e=Te(t.pointer.point,this);this._stick=="hard"&&this._stickPoint&&(e=this._stickPoint),this._adapterO&&this._adapterO.apply("cursorPoint",e),this.fitsToBounds(e)&&(this._downPointOrig={x:e.x,y:e.y},t.event.cancelable&&this.shouldPreventGestures(t.touch)&&this.fitsToBounds(e)&&t.event.preventDefault(),this.triggerMove(e),this.triggerDown(e))}},r.prototype.shouldPreventGestures=function(t){return!0},r.prototype.updatePoint=function(t){},r.prototype.handleCursorUp=function(t){if(this.interactionsEnabled&&!(!this.downPoint&&!bt().isLocalElement(t.pointer,this.paper.svg,this.uid))){var e=Te(t.pointer.point,this);this._adapterO&&this._adapterO.apply("cursorPoint",e),!(!this.downPoint||!this.fitsToBounds(this.downPoint))&&(this._stick=="hard"&&this._stickPoint&&(e=this._stickPoint),this._upPointOrig={x:e.x,y:e.y},this.triggerMove(e),this.triggerUp(e))}},Object.defineProperty(r.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t,A(this._chart.plotContainer)&&bt().lockElement(this._chart.plotContainer.interactions)},enumerable:!0,configurable:!0}),r}(H);T.registeredClasses.Cursor=lr;var hr=function(h){S(r,h);function r(){var t=h.call(this)||this;t._lineX=new ot,t._lineY=new ot,t._xAxis=new ot,t._yAxis=new ot,t._snapToDisposers=[],t.className="XYCursor",t.behavior="zoomX",t.maxPanOut=.1;var e=new pt;t.snapOnPan=!0;var i=t.createChild(lt);i.shouldClone=!1,i.fillOpacity=.2,i.fill=e.getFor("alternativeBackground"),i.isMeasured=!1,i.visible=!1,i.interactionsEnabled=!1,t.selection=i,t._disposers.push(t.selection);var a=t.createChild(lt);a.shouldClone=!1,a.stroke=e.getFor("grid"),a.fill=Ut(),a.strokeDasharray="3,3",a.isMeasured=!1,a.strokeOpacity=.4,a.interactionsEnabled=!1,a.y=0,t.lineX=a,t._disposers.push(t.lineX);var n=t.createChild(lt);return n.shouldClone=!1,n.stroke=e.getFor("grid"),n.fill=Ut(),n.strokeDasharray="3,3",n.isMeasured=!1,n.strokeOpacity=.4,n.interactionsEnabled=!1,n.x=0,t.lineY=n,t._disposers.push(t.lineY),t.events.on("sizechanged",t.updateSize,t,!1),t._disposers.push(t._lineX),t._disposers.push(t._lineY),t._disposers.push(t._xAxis),t._disposers.push(t._yAxis),t.mask=t,t.hideSeriesTooltipsOnSelection=!0,t.applyTheme(),t}return r.prototype.updateSize=function(){this.lineX&&(this.lineX.path=W({x:0,y:0})+L({x:0,y:this.innerHeight})),this.lineY&&(this.lineY.path=W({x:0,y:0})+L({x:this.innerWidth,y:0}))},r.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint,e=this.behavior;if(t){var i=this.point;this.lineX&&(i.x=this.lineX.pixelX),this.lineY&&(i.y=this.lineY.pixelY);var a=this.selection,n=Math.min(i.x,t.x),s=Math.min(i.y,t.y),o=j(Math.abs(t.x-i.x),this._positionPrecision),l=j(Math.abs(t.y-i.y),this._positionPrecision);switch(e){case"zoomX":s=0,l=this.pixelHeight;break;case"zoomY":n=0,o=this.pixelWidth;break;case"selectX":s=0,l=this.pixelHeight;break;case"selectY":n=0,o=this.pixelWidth;break}a.x=n,a.y=s,a.path=Ve(o,l),a.validatePosition()}else this._generalBehavior!="select"&&this.selection.hide()}},r.prototype.fixPoint=function(t){return t.x=Math.max(0,t.x),t.y=Math.max(0,t.y),t.x=Math.min(this.pixelWidth,t.x),t.y=Math.min(this.pixelHeight,t.y),t},r.prototype.triggerMoveReal=function(t,e){h.prototype.triggerMoveReal.call(this,t,e);var i=this.snapToSeries;if(i&&!this.downPoint)if(i instanceof Mt)i.isHidden&&this.updateLinePositions(t);else{var a=!0;Z(i,function(n){n.isHidden||(a=!1)}),a&&this.updateLinePositions(t)}else this.updateLinePositions(t);this.downPoint&&U(this.downPoint,t)>3&&this._generalBehavior=="pan"&&(this.getPanningRanges(),this.dispatch("panning"))},r.prototype.updateLinePositions=function(t){t=this.fixPoint(this.point),this.lineX&&this.lineX.visible&&!this.xAxis&&(this.lineX.x=t.x),this.lineY&&this.lineY.visible&&!this.yAxis&&(this.lineY.y=t.y),this.updateSelection()},r.prototype.triggerDownReal=function(t){if(this.visible&&!this.isHiding)if(this._generalBehavior=="select"&&(this.selection.parent=this.parent),this.fitsToBounds(t)){this.downPoint={x:t.x,y:t.y},this.updatePoint(t),this.point.x=this.downPoint.x,this.point.y=this.downPoint.y;var e=this.selection,i=this.downPoint.x,a=this.downPoint.y;this._usesSelection&&(e.x=i,e.y=a,e.path="",e.show()),h.prototype.triggerDownReal.call(this,t)}else this.downPoint=void 0;else this.downPoint=void 0},r.prototype.updatePoint=function(t){this.lineX&&(t.x=this.lineX.pixelX),this.lineY&&(t.y=this.lineY.pixelY)},r.prototype.triggerUpReal=function(t){if(this.hasMoved())this.downPoint&&(this.upPoint=t,this.updatePoint(this.upPoint),this._generalBehavior!="pan"&&this.getRanges(),this._generalBehavior!="select"&&this.selection.hide(),h.prototype.triggerUpReal.call(this,t));else{if(this._generalBehavior!="select"?this.selection.hide(0):(this.xRange=void 0,this.yRange=void 0,this.dispatchImmediately("selectended")),this._generalBehavior=="pan"){var e=bt();e.setGlobalStyle(ve.default)}this.dispatchImmediately("behaviorcanceled")}this.downPoint=void 0,this.dispatch("cursorpositionchanged")},r.prototype.hasMoved=function(){var t;return this.behavior=="zoomX"||this.behavior=="panX"?t=aa(this._upPointOrig,this._downPointOrig):this.behavior=="zoomY"||this.behavior=="panY"?t=na(this._upPointOrig,this._downPointOrig):t=U(this._upPointOrig,this._downPointOrig),t>bt().getHitOption(this.interactions,"hitTolerance")},r.prototype.getPanningRanges=function(){var t=j(this.downPoint.x/this.innerWidth,5),e=1-j(this.downPoint.y/this.innerHeight,5),i=j(this.point.x/this.innerWidth,5),a=1-j(this.point.y/this.innerHeight,5),n=t-i,s=e-a;this.xRange={start:n,end:1+n},this.yRange={start:s,end:1+s},this.behavior=="panX"&&(this.yRange.start=0,this.yRange.end=1),this.behavior=="panY"&&(this.xRange.start=0,this.xRange.end=1)},r.prototype.getRanges=function(){this.lineX&&(this.upPoint.x=this.lineX.pixelX),this.lineY&&(this.upPoint.y=this.lineY.pixelY),Qt(this.selection);var t=j(this.downPoint.x/this.innerWidth,5),e=j(this.upPoint.x/this.innerWidth,5),i=1-j(this.downPoint.y/this.innerHeight,5),a=1-j(this.upPoint.y/this.innerHeight,5);this.xRange={start:tt(t,e),end:ht(t,e)},this.yRange={start:tt(i,a),end:ht(i,a)}},Object.defineProperty(r.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(t){this.setPropertyValue("behavior",t,!0),this._usesSelection=!1,t.indexOf("zoom")!=-1&&(this._generalBehavior="zoom",this._usesSelection=!0),t.indexOf("select")!=-1&&(this._generalBehavior="select",this._usesSelection=!0),t.indexOf("pan")!=-1&&(this._generalBehavior="pan",this._usesSelection=!1)},enumerable:!0,configurable:!0}),r.prototype.shouldPreventGestures=function(t){return(!this.interactions.isTouchProtected||!t)&&this.behavior!="none"},Object.defineProperty(r.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(t){this.setPropertyValue("fullWidthLineX",t),t||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(t){this.setPropertyValue("fullWidthLineY",t),t||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(t){this.setPropertyValue("hideSeriesTooltipsOnSelection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(t){this.setPropertyValue("maxTooltipDistance",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(t){this.setPropertyValue("maxPanOut",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(t){var e=this;this._xAxis.get()!=t&&this._xAxis.set(t,new re([t.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,!1),t.events.on("rangechangestarted",function(i){e.hide(0),e.preventShow=!0},void 0,!1),t.events.on("rangechangeended",function(i){e.preventShow=!1,e.hide(0),e.dispatch("cursorpositionchanged")},void 0,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(t){var e=this;this._yAxis.get()!=t&&this._yAxis.set(t,new re([t.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,!1),t.events.on("rangechangestarted",function(i){e.hide(0),e.__disabled=!0},void 0,!1),t.events.on("rangechangeended",function(i){e.__disabled=!1,e.hide(0),e.dispatch("cursorpositionchanged")},void 0,!1)]))},enumerable:!0,configurable:!0}),r.prototype.handleXTooltipPosition=function(t){var e=this.xAxis.tooltip,i=St({x:e.pixelX,y:e.pixelY},this),a=i.x;if(i.y=1,this.lineX&&(this.lineX.x=a,this.fitsToBounds(i)||this.hide()),this.xAxis&&this.fullWidthLineX){var n=this.xAxis.currentItemStartPoint,s=this.xAxis.currentItemEndPoint;if(n&&s){this.lineX.x=a;var o=s.x-n.x;this.lineX.path=Ve(o,this.innerHeight,-o/2)}}},r.prototype.handleYTooltipPosition=function(t){var e=this.yAxis.tooltip,i=St({x:e.pixelX,y:e.pixelY},this),a=i.y;if(i.x=1,this.lineY&&(this.lineY.y=a,this.fitsToBounds(i)||this.hide()),this.yAxis&&this.fullWidthLineY){var n=this.yAxis.currentItemStartPoint,s=this.yAxis.currentItemEndPoint;if(n&&s){this.lineY.y=a;var o=s.y-n.y;this.lineY.path=Ve(this.innerWidth,o,0,-o/2)}}},Object.defineProperty(r.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(t){t?(t.setElement(this.paper.add("path")),this._lineX.set(t,t.events.on("positionchanged",this.updateSelection,this,!1)),t.interactionsEnabled=!1,t.parent=this):this._lineX.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(t){t?(t.setElement(this.paper.add("path")),this._lineY.set(t,t.events.on("positionchanged",this.updateSelection,this,!1)),t.parent=this,t.interactionsEnabled=!1):this._lineY.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){return this._selection},set:function(t){this._selection=t,t&&(t.element=this.paper.add("path"),t.parent=this)},enumerable:!0,configurable:!0}),r.prototype.processConfig=function(t){var e=this;if(t&&(A(t.xAxis)&&at(t.xAxis)&&(this.map.hasKey(t.xAxis)?t.xAxis=this.map.getKey(t.xAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+t.xAxis+'" found for `xAxis`'),delete t.xAxis)),A(t.yAxis)&&at(t.yAxis)&&(this.map.hasKey(t.yAxis)?t.yAxis=this.map.getKey(t.yAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+t.yAxis+'" found for `yAxis`'),delete t.yAxis)),A(t.snapToSeries))){var i=At(t.snapToSeries)?t.snapToSeries:[t.snapToSeries],a=!1;Z(i,function(n,s){at(n)&&(e.map.hasKey(n)?i[s]=e.map.getKey(n):(e.processingErrors.push('[XYCursor] No series with id "'+n+'" found for `series`'),a=!0))}),a?delete t.snapToSeries:t.snapToSeries=i}h.prototype.processConfig.call(this,t)},Object.defineProperty(r.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(t){var e=this;this.setPropertyValue("snapToSeries",t)&&(t instanceof Mt&&(t=[t]),this._snapToDisposers&&Z(this._snapToDisposers,function(i){i.dispose()}),this._snapToDisposers=[],t&&Z(t,function(i){e._snapToDisposers.push(i.events.on("tooltipshownat",function(){e.handleSnap(i)},void 0,!1))}))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"snapOnPan",{get:function(){return this.getPropertyValue("snapOnPan")},set:function(t){this.setPropertyValue("snapOnPan",t)},enumerable:!0,configurable:!0}),r.prototype.handleSnap=function(t){if(!this.downPoint){var e=t.getTooltipX()+t.xAxis.pixelX,i=t.getTooltipY()+t.yAxis.pixelY,a=t.xAxis,n=t.yAxis;a&&a.renderer.opposite&&(i-=this.pixelHeight),this.point={x:e,y:i},this.getPositions();var s=e,o=i;e-=this.pixelWidth,n&&n.renderer.opposite&&(e+=this.pixelWidth);var l=t.tooltip,d=l.animationDuration,u=l.animationEasing;a instanceof M&&!(a instanceof B)&&n instanceof M&&!(n instanceof B)?(t.yAxis.showTooltipAtPosition(this.yPosition),t.xAxis.showTooltipAtPosition(this.xPosition)):(t.baseAxis==t.xAxis&&t.yAxis.showTooltipAtPosition(this.yPosition),t.baseAxis==t.yAxis&&t.xAxis.showTooltipAtPosition(this.xPosition)),this.lineY.x=e,this.lineX.y=i,this.xAxis||this.lineX.animate([{property:"x",to:s}],d,u),this.yAxis||this.lineY.animate([{property:"y",to:o}],d,u)}},r.prototype.dispose=function(){this.hide(0),h.prototype.dispose.call(this)},r}(lr);T.registeredClasses.XYCursor=hr;var La=function(h){S(r,h);function r(){var t=h.call(this)||this;return t.className="RadarCursor",t.radius=R(100),t.innerRadius=R(0),t.applyTheme(),t.mask=void 0,t}return r.prototype.fitsToBounds=function(t){var e=U(t);return e<this.truePixelRadius+1&&e>this.pixelInnerRadius-1},Object.defineProperty(r.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),r.prototype.triggerMoveReal=function(t,e){(!this.xAxis||this.xAxis&&(!this.xAxis.cursorTooltipEnabled||this.xAxis.tooltip.disabled))&&this.updateLineX(this.point),(!this.yAxis||this.yAxis&&(!this.yAxis.cursorTooltipEnabled||this.yAxis.tooltip.disabled))&&this.updateLineY(this.point),this.updateSelection(),h.prototype.triggerMoveReal.call(this,t,e)},r.prototype.updateLineX=function(t){var e=this.pixelRadius,i=this.startAngle,a=this.endAngle,n=this.pixelInnerRadius;if(e>0&&x(i)&&x(a)&&x(n)){var s=xt(ct(t),i,a),o=void 0;if(this.lineX&&this.lineX.visible){if(this.lineX.moveTo({x:0,y:0}),this.xAxis&&this.fullWidthLineX){var l=this.xAxis.currentItemStartPoint,d=this.xAxis.currentItemEndPoint;if(l&&d){var u=xt(ct(l),i,a),p=xt(ct(d),i,a),f=p-u;i<a?f<0&&(f+=360):f>0&&(f-=360),s-=f/2,o=W({x:n*k(s),y:n*V(s)})+L({x:e*k(s),y:e*V(s)})+rt(s,f,e)+L({x:n*k(s+f),y:n*V(s+f)})+rt(s+f,-f,n)}}o||(o=W({x:n*k(s),y:n*V(s)})+L({x:e*k(s),y:e*V(s)})),this.lineX.path=o}}},r.prototype.updateLineY=function(t){if(this.lineY&&this.lineY.visible){var e=this.startAngle,i=this.endAngle,a=this.truePixelRadius,n=N(U(t),0,this.truePixelRadius);if(x(n)&&x(e)){this.lineY.moveTo({x:0,y:0});var s=void 0,o=i-e;if(this.yAxis&&this.fullWidthLineY){var l=this.yAxis.currentItemStartPoint,d=this.yAxis.currentItemEndPoint;if(l&&d){var u=N(U(l),0,a);n=N(U(d),0,a),s=W({x:n*k(e),y:n*V(e)})+rt(e,o,n),s+=W({x:u*k(i),y:u*V(i)})+rt(i,-o,u)}}s||(s=W({x:n*k(e),y:n*V(e)})+rt(e,i-e,n)),this.lineY.path=s}}},r.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint;if(t){var e=this.point,i=this.pixelRadius,a=this.truePixelRadius,n=this.pixelInnerRadius,s=Math.min(this.startAngle,this.endAngle),o=Math.max(this.startAngle,this.endAngle),l=xt(ct(t),s,o),d=xt(ct(e),s,o),u=U(t);if(u<a){var p=N(U(e),0,a);this._prevAngle=d;var f=W({x:0,y:0}),c=V(l),y=k(l),v=V(d),g=k(d),m=this.behavior;m=="zoomX"||m=="selectX"?f+=L({x:i*y,y:i*c})+rt(l,d-l,i)+L({x:n*g,y:n*v})+rt(d,l-d,n):m=="zoomY"||m=="selectY"?f=W({x:p*k(s),y:p*V(s)})+rt(s,o-s,p)+L({x:u*k(o),y:u*V(o)})+rt(o,s-o,u)+Lt():m=="zoomXY"&&(f=W({x:p*k(l),y:p*V(l)})+rt(l,d-l,p)+L({x:u*k(d),y:u*V(d)})+rt(d,l-d,u)+Lt()),this.selection.path=f}this.selection.moveTo({x:0,y:0})}}},r.prototype.getPositions=function(){var t=this.chart;if(t){var e=this.pixelInnerRadius,i=this.truePixelRadius-e,a=this.startAngle,n=this.endAngle,s=xt(ct(this.point),a,n),o=(s-a)/(n-a);this.xPosition=o,this.yPosition=N((U(this.point)-e)/i,0,1)}},r.prototype.updatePoint=function(t){},r.prototype.handleXTooltipPosition=function(t){if(this.xAxis.cursorTooltipEnabled){var e=this.xAxis.tooltip;this.updateLineX(St({x:e.pixelX,y:e.pixelY},this))}},r.prototype.handleYTooltipPosition=function(t){if(this.yAxis.cursorTooltipEnabled){var e=this.yAxis.tooltip;this.updateLineY(St({x:e.pixelX,y:e.pixelY},this))}},r.prototype.updateLinePositions=function(t){},r.prototype.getRanges=function(){var t=this.downPoint;if(t){var e=this.upPoint,i=this.chart;if(i){var a=this.pixelRadius,n=this.startAngle,s=this.endAngle,o=xt(ct(t),this.startAngle,this.endAngle),l=xt(ct(e),this.startAngle,this.endAngle),d=N(U(t),0,a),u=N(U(e),0,a),p=0,f=1,c=0,y=1,v=this.behavior;if(v=="zoomX"||v=="selectX"||v=="zoomXY"||v=="selectXY"){var g=s-n;p=j((o-n)/g,5),f=j((l-n)/g,5)}(v=="zoomY"||v=="selectY"||v=="zoomXY"||v=="selectXY")&&(c=j(d/a,5),y=j(u/a,5)),this.xRange={start:Math.min(p,f),end:Math.max(p,f)},this.yRange={start:Math.min(c,y),end:Math.max(c,y)},this.behavior=="selectX"||this.behavior=="selectY"||this.behavior=="selectXY"||this.selection.hide()}}},r.prototype.updateSize=function(){},Object.defineProperty(r.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelRadius",{get:function(){return q(this.radius,this.truePixelRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"truePixelRadius",{get:function(){return Q(R(100),tt(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pixelInnerRadius",{get:function(){var t=this.innerRadius;return t instanceof yt&&(t=R(100*t.value*this.chart.innerRadiusModifyer)),q(t,this.truePixelRadius)||0},enumerable:!0,configurable:!0}),r.prototype.fixPoint=function(t){return t},r}(hr);T.registeredClasses.RadarCursor=La;export{Yt as C,B as D,Ze as L,Ni as P,hr as X,_t as a,Qe as b,E as c};
